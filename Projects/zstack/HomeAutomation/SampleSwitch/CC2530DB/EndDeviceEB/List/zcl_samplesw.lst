###############################################################################
#
# IAR C/C++ Compiler V10.20.1.5333 for 8051               09/Apr/2022  13:04:29
# Copyright 2004-2018 IAR Systems AB.
# PC-locked license - IAR Embedded Workbench for 8051
#
#    Core               =  plain
#    Code model         =  banked
#    Data model         =  large
#    Calling convention =  xdata reentrant
#    Constant location  =  data_rom
#    Dptr setup         =  1,16
#                          
#    Source file        =  
#        C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\Source\zcl_samplesw.c
#    Command line       =  
#        -f C:\Users\icetz\AppData\Local\Temp\EW865E.tmp ("C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\Source\zcl_samplesw.c"
#        -D SECURE=1 -D TC_LINKKEY_JOIN -D NV_INIT -D NV_RESTORE -D xZTOOL_P1
#        -D xMT_TASK -D xMT_APP_FUNC -D xMT_SYS_FUNC -D xMT_ZDO_FUNC -D
#        xMT_ZDO_MGMT -D xMT_APP_CNF_FUNC -D LCD_SUPPORTED=DEBUG -D
#        MULTICAST_ENABLED=FALSE -D ZCL_READ -D ZCL_DISCOVER -D ZCL_WRITE -D
#        ZCL_BASIC -D ZCL_IDENTIFY -D ZCL_ON_OFF -D ZCL_GROUPS -D
#        ZCL_REPORTING_DEVICE -D HAL_LED=TRUE -D HAL_KEY=TRUE -D
#        ISR_KEYINTERRUPT -D HAL_UART=TRUE -D INT_HEAP_LEN=2300 -D HAL_LCD=TRUE
#        -D xHAL_LCD_OLED12864 -D HAL_ADC=TRUE -lC "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\EndDeviceEB\List"
#        -lA "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\EndDeviceEB\List"
#        --diag_suppress Pe001,Pa010 -o "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\EndDeviceEB\Obj"
#        -e --debug --core=plain --dptr=16,1 --data_model=large
#        --code_model=banked --calling_convention=xdata_reentrant
#        --place_constants=data_rom --nr_virtual_regs 16 -f "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\Tools\CC2530DB\f8wEndev.cfg"
#        (-DCPU32MHZ -DROOT=__near_func -DMAC_CFG_TX_DATA_MAX=3
#        -DMAC_CFG_TX_MAX=6 -DMAC_CFG_RX_MAX=3) -f "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg"
#        (-DZIGBEEPRO -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR
#        -DDEFAULT_CHANLIST=0x00000800 -DZDAPP_CONFIG_PAN_ID=0xFFFF
#        -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MASK=0x007F
#        -DBEACON_REQUEST_DELAY=100 -DBEACON_REQ_DELAY_MASK=0x00FF
#        -DLINK_STATUS_JITTER_MASK=0x007F -DROUTE_EXPIRY_TIME=30
#        -DAPSC_ACK_WAIT_DURATION_POLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7
#        -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3
#        -DNWK_MAX_DATA_RETRIES=2 -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9
#        -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40 -DNWK_MAX_BINDING_ENTRIES=4
#        -DMAX_BINDING_CLUSTER_IDS=4 -DDEFAULT_KEY={0} -DMAC_MAX_FRAME_SIZE=116
#        -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const __code"
#        -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000
#        -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100 -DREJOIN_POLL_RATE=440
#        -DREJOIN_BACKOFF=900000 -DREJOIN_SCAN=900000 -DENABLE_LED4_DISABLE_S1)
#        -f "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\Tools\CC2530DB\f8wZCL.cfg"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\Source\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\Source\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\ZMain\TI2530DB\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\include\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mac\include\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mac\high_level\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\single_chip\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mt\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\osal\include\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\services\saddr\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\services\sdata\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\af\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\bdb\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\gp\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\nwk\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\sapi\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\sec\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\sys\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\zcl\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\zdo\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\zmac\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\zmac\f8w\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\Common\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\SPI\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\HW_LCD\Font\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\HW_LCD\HAL_LCD_SPI\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\HW_LCD\HAL_OLED\"
#        -I "C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\HW_LCD\HAL_TFT\"
#        -Ohz --require_prototypes)
#    Locale             =  Chinese (Traditional)_TWN.950
#    List file          =  
#        C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\EndDeviceEB\List\zcl_samplesw.lst
#    Object file        =  
#        C:\Texas
#        Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\EndDeviceEB\Obj\zcl_samplesw.r51
#
###############################################################################

C:\Texas Instruments\David\Projects\zstack\HomeAutomation\SampleSwitch\Source\zcl_samplesw.c
      1          /**************************************************************************************************
      2            Filename:       zcl_samplesw.c
      3            Revised:        $Date: 2015-08-19 17:11:00 -0700 (Wed, 19 Aug 2015) $
      4            Revision:       $Revision: 44460 $
      5          
      6            Description:    Zigbee Cluster Library - sample switch application.
      7          
      8          
      9            Copyright 2006-2013 Texas Instruments Incorporated. All rights reserved.
     10          
     11            IMPORTANT: Your use of this Software is limited to those specific rights
     12            granted under the terms of a software license agreement between the user
     13            who downloaded the software, his/her employer (which must be your employer)
     14            and Texas Instruments Incorporated (the "License").  You may not use this
     15            Software unless you agree to abide by the terms of the License. The License
     16            limits your use, and you acknowledge, that the Software may not be modified,
     17            copied or distributed unless embedded on a Texas Instruments microcontroller
     18            or used solely and exclusively in conjunction with a Texas Instruments radio
     19            frequency transceiver, which is integrated into your product.  Other than for
     20            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     21            works of, modify, distribute, perform, display or sell this Software and/or
     22            its documentation for any purpose.
     23          
     24            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     25            PROVIDED AS IS?WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     26            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     27            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     28            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     29            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     30            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     31            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     32            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     33            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     34            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     35          
     36            Should you have any questions regarding your right to use this Software,
     37            contact Texas Instruments Incorporated at www.TI.com.
     38          **************************************************************************************************/
     39          
     40          /*********************************************************************
     41            This application implements a ZigBee On/Off Switch, based on Z-Stack 3.0.
     42          
     43            This application is based on the common sample-application user interface. Please see the main
     44            comment in zcl_sampleapp_ui.c. The rest of this comment describes only the content specific for
     45            this sample applicetion.
     46            
     47            Application-specific UI peripherals being used:
     48          
     49            - none (LED1 is currently unused by this application).
     50          
     51            Application-specific menu system:
     52          
     53              <TOGGLE LIGHT> Send an On, Off or Toggle command targeting appropriate devices from the binding table.
     54                Pressing / releasing [OK] will have the following functionality, depending on the value of the 
     55                zclSampleSw_OnOffSwitchActions attribute:
     56                - OnOffSwitchActions == 0: pressing [OK] will send ON command, releasing it will send OFF command;
     57                - OnOffSwitchActions == 1: pressing [OK] will send OFF command, releasing it will send ON command;
     58                - OnOffSwitchActions == 2: pressing [OK] will send TOGGLE command, releasing it will not send any command.
     59          
     60          *********************************************************************/
     61          
     62          #if ! defined ZCL_ON_OFF
     63          #error ZCL_ON_OFF must be defined for this project.
     64          #endif
     65          
     66          /*********************************************************************
     67           * INCLUDES
     68           */
     69          #include "ZComDef.h"
     70          #include "OSAL.h"
     71          #include "AF.h"
     72          #include "ZDApp.h"
     73          #include "ZDObject.h"
     74          #include "ZDProfile.h"
     75          #include "MT_SYS.h"
     76          
     77          #include "zcl.h"
     78          #include "zcl_general.h"
     79          #include "zcl_ha.h"
     80          #include "zcl_samplesw.h"
     81          #include "zcl_diagnostic.h"
     82          
     83          #include "onboard.h"

   \                                 In  segment SFR_AN, at 0xf3
   \   unsigned char volatile __sfr P0SEL
   \                     P0SEL:
   \   000000                DS 1

   \                                 In  segment SFR_AN, at 0xfd
   \   unsigned char volatile __sfr P0DIR
   \                     P0DIR:
   \   000000                DS 1
     84          
     85          /* HAL */
     86          #include "hal_lcd.h"
     87          #include "hal_led.h"
     88          #include "hal_key.h"
     89          #include "hal_adc.h"
     90          
     91          #if defined (OTA_CLIENT) && (OTA_CLIENT == TRUE)
     92          #include "zcl_ota.h"
     93          #include "hal_ota.h"
     94          #endif
     95          
     96          #include "bdb.h"
     97          #include "bdb_interface.h"
     98          
     99          #include <stdio.h>
    100          #include "string.h"
    101          
    102          /*********************************************************************
    103           * MACROS
    104           */
    105          
    106          #define APP_TITLE "TI Sample Switch"
    107          
    108          #define DATA_PIN P0_6            //定义P0.6口为传感器的输入端CS
    109          
    110          /*********************************************************************
    111           * TYPEDEFS
    112           */
    113          
    114          /*********************************************************************
    115           * GLOBAL VARIABLES
    116           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    117          byte zclSampleSw_TaskID;
   \                     zclSampleSw_TaskID:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    118          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    119          uint8 zclSampleSwSeqNum;
   \                     zclSampleSwSeqNum:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    120          

   \                                 In  segment XDATA_I, align 1, keep-with-next
    121          uint8 zclSampleSw_OnOffSwitchType = ON_OFF_SWITCH_TYPE_MOMENTARY;
   \                     zclSampleSw_OnOffSwitchType:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zclSampleSw_OnOffSwitchType>`
   \   000001                REQUIRE __INIT_XDATA_I
    122          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    123          uint8 zclSampleSw_OnOffSwitchActions;
   \                     zclSampleSw_OnOffSwitchActions:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z
    124          
    125          
    126          #define DATA_H 5
    127          #define DATA_L 6

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    128          uint16 test_word;
   \                     test_word:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    129          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    130          uint16 temp_VOC;
   \                     temp_VOC:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    131          uint16 temp_O3;
   \                     temp_O3:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    132          uint16 temp_CHO2;
   \                     temp_CHO2:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    133          uint16 temp_CO;
   \                     temp_CO:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    134          uint16 temp_HUMIDITY;
   \                     temp_HUMIDITY:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    135          uint16 temp_TEMPERATURE;
   \                     temp_TEMPERATURE:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    136          uint16 temp_PM25;
   \                     temp_PM25:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    137          uint16 temp_CO2;
   \                     temp_CO2:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    138          uint16 temp_O2;
   \                     temp_O2:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    139          
    140          
    141          /*********************************************************************
    142           * GLOBAL FUNCTIONS
    143           */
    144          
    145          /*********************************************************************
    146           * LOCAL VARIABLES
    147           */

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    148          afAddrType_t zclSampleSw_DstAddr;
   \                     zclSampleSw_DstAddr:
   \   000000                DS 12
   \   00000C                REQUIRE __INIT_XDATA_Z
    149          
    150          // Endpoint to allow SYS_APP_MSGs

   \                                 In  segment XDATA_I, align 1, keep-with-next
    151          static endPointDesc_t sampleSw_TestEp =
   \                     sampleSw_TestEp:
   \   000000                DS 7
   \   000007                REQUIRE `?<Initializer for sampleSw_TestEp>`
   \   000007                REQUIRE __INIT_XDATA_I
    152          {
    153            SAMPLESW_ENDPOINT,                  // endpoint
    154            0,
    155            &zclSampleSw_TaskID,
    156            (SimpleDescriptionFormat_t *)NULL,  // No Simple description for this test endpoint
    157            (afNetworkLatencyReq_t)0            // No Network Latency req
    158          };
    159          
    160          //static uint8 aProcessCmd[] = { 1, 0, 0, 0 }; // used for reset command, { length + cmd0 + cmd1 + data }
    161          

   \                                 In  segment XDATA_I, align 1, keep-with-next
    162          devStates_t zclSampleSw_NwkState = DEV_INIT;
   \                     zclSampleSw_NwkState:
   \   000000                DS 1
   \   000001                REQUIRE `?<Initializer for zclSampleSw_NwkState>`
   \   000001                REQUIRE __INIT_XDATA_I
    163          
    164          #if defined (OTA_CLIENT) && (OTA_CLIENT == TRUE)
    165          #define DEVICE_POLL_RATE                 8000   // Poll rate for end device
    166          #endif
    167          
    168          #define SAMPLESW_TOGGLE_TEST_EVT   0x1000
    169          /*********************************************************************
    170           * LOCAL FUNCTIONS
    171           */
    172          static void zclSampleSw_HandleKeys( byte shift, byte keys );
    173          static void zclSampleSw_BasicResetCB( void );
    174          
    175          static void zclSampleSw_ProcessCommissioningStatus(bdbCommissioningModeMsg_t *bdbCommissioningModeMsg);
    176          
    177          
    178          // Functions to process ZCL Foundation incoming Command/Response messages
    179          static void zclSampleSw_ProcessIncomingMsg( zclIncomingMsg_t *msg );
    180          #ifdef ZCL_READ
    181          static uint8 zclSampleSw_ProcessInReadRspCmd( zclIncomingMsg_t *pInMsg );
    182          #endif
    183          #ifdef ZCL_WRITE
    184          static uint8 zclSampleSw_ProcessInWriteRspCmd( zclIncomingMsg_t *pInMsg );
    185          #endif
    186          static uint8 zclSampleSw_ProcessInDefaultRspCmd( zclIncomingMsg_t *pInMsg );
    187          #ifdef ZCL_DISCOVER
    188          static uint8 zclSampleSw_ProcessInDiscCmdsRspCmd( zclIncomingMsg_t *pInMsg );
    189          static uint8 zclSampleSw_ProcessInDiscAttrsRspCmd( zclIncomingMsg_t *pInMsg );
    190          static uint8 zclSampleSw_ProcessInDiscAttrsExtRspCmd( zclIncomingMsg_t *pInMsg );
    191          #endif
    192          #ifdef ZCL_REPORT
    193          static uint8 zclSampleSw_ProcessInReportCmd( zclIncomingMsg_t *pInMsg );
    194          #endif // ZCL_REPORT
    195          
    196          #if defined (OTA_CLIENT) && (OTA_CLIENT == TRUE)
    197          static void zclSampleSw_ProcessOTAMsgs( zclOTA_CallbackMsg_t* pMsg );
    198          #endif
    199          
    200          // Uart
    201          #define ZCLSAMPLESW_UART_BUF_LEN        128

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    202          static uint8 zclSampleSw_UartBuf[ZCLSAMPLESW_UART_BUF_LEN];
   \                     zclSampleSw_UartBuf:
   \   000000                DS 128
   \   000080                REQUIRE __INIT_XDATA_Z
    203          static void zclSampleSw_InitUart(void);
    204          static void zclSampleSw_UartCB(uint8 port, uint8 event);
    205          
    206          #ifdef ZDO_COORDINATOR
    207          #else
    208            static void zclSampleSw_ReportTest(void);
    209          #endif
    210          
    211          /*********************************************************************
    212           * CONSTANTS
    213           */
    214          
    215          /*********************************************************************
    216           * REFERENCED EXTERNALS
    217           */
    218          extern int16 zdpExternalStateTaskID;
    219          
    220          /*********************************************************************
    221           * ZCL General Profile Callback table
    222           */

   \                                 In  segment XDATA_I, align 1, keep-with-next
    223          static zclGeneral_AppCallbacks_t zclSampleSw_CmdCallbacks =
   \                     zclSampleSw_CmdCallbacks:
   \   000000                DS 18
   \   000012                REQUIRE `?<Initializer for zclSampleSw_CmdCallbacks>`
   \   000012                REQUIRE __INIT_XDATA_I
    224          {
    225            zclSampleSw_BasicResetCB,               // Basic Cluster Reset command
    226            NULL,                                   // Identify Trigger Effect command
    227          
    228          #ifdef ZDO_COORDINATOR
    229            NULL,
    230          #else
    231            NULL,    // On/Off cluster commands
    232          #endif
    233            
    234            NULL,                                   // On/Off cluster enhanced command Off with Effect
    235            NULL,                                   // On/Off cluster enhanced command On with Recall Global Scene
    236            NULL,                                   // On/Off cluster enhanced command On with Timed Off
    237          #ifdef ZCL_LEVEL_CTRL
    238            NULL,                                   // Level Control Move to Level command
    239            NULL,                                   // Level Control Move command
    240            NULL,                                   // Level Control Step command
    241            NULL,                                   // Level Control Stop command
    242          #endif
    243          #ifdef ZCL_GROUPS
    244            NULL,                                   // Group Response commands
    245          #endif
    246          #ifdef ZCL_SCENES
    247            NULL,                                   // Scene Store Request command
    248            NULL,                                   // Scene Recall Request command
    249            NULL,                                   // Scene Response command
    250          #endif
    251          #ifdef ZCL_ALARMS
    252            NULL,                                   // Alarm (Response) commands
    253          #endif
    254          #ifdef SE_UK_EXT
    255            NULL,                                   // Get Event Log command
    256            NULL,                                   // Publish Event Log command
    257          #endif
    258            NULL,                                   // RSSI Location command
    259            NULL                                    // RSSI Location Response command
    260          };
    261          
    262          /*********************************************************************
    263           * @fn          zclSampleSw_Init
    264           *
    265           * @brief       Initialization function for the zclGeneral layer.
    266           *
    267           * @param       none
    268           *
    269           * @return      none
    270           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    271          void zclSampleSw_Init( byte task_id )
   \                     zclSampleSw_Init:
    272          {
   \   000000   74F7         MOV       A,#-0x9
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 29
   \   000005   74E3         MOV       A,#-0x1d
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
   \   00000A   E9           MOV       A,R1
    273            zclSampleSw_TaskID = task_id;
   \   00000B   90....       MOV       DPTR,#zclSampleSw_TaskID
   \   00000E   F0           MOVX      @DPTR,A
    274          
    275            // Set destination address to indirect
    276            zclSampleSw_DstAddr.addrMode = (afAddrMode_t)AddrNotPresent;
   \   00000F   90....       MOV       DPTR,#zclSampleSw_DstAddr + 8
   \   000012   E4           CLR       A
   \   000013   F0           MOVX      @DPTR,A
    277            zclSampleSw_DstAddr.endPoint = 0;
   \   000014   A3           INC       DPTR
   \   000015   F0           MOVX      @DPTR,A
    278            zclSampleSw_DstAddr.addr.shortAddr = 0;
   \   000016   90....       MOV       DPTR,#zclSampleSw_DstAddr
   \   000019   F0           MOVX      @DPTR,A
   \   00001A   A3           INC       DPTR
   \   00001B   F0           MOVX      @DPTR,A
    279            
    280            P0SEL &= ~0x40;                 //设置P0.6为普通IO口
   \   00001C   53F3BF       ANL       0xf3,#0xbf
    281            P0DIR &= ~0x40;                 //P0.6定义为输入口
   \   00001F   53FDBF       ANL       0xfd,#0xbf
    282          
    283            // Register the Simple Descriptor for this application
    284            bdb_RegisterSimpleDescriptor( &zclSampleSw_SimpleDesc );
   \   000022                ; Setup parameters for call to function bdb_RegisterSimpleDescriptor
   \   000022   7A..         MOV       R2,#zclSampleSw_SimpleDesc & 0xff
   \   000024   7B..         MOV       R3,#(zclSampleSw_SimpleDesc >> 8) & 0xff
   \   000026   12....       LCALL     `??bdb_RegisterSimpleDescriptor::?relay`; Banked call to: bdb_RegisterSimpleDescriptor
    285          
    286            // Register the ZCL General Cluster Library callback functions
    287            zclGeneral_RegisterCmdCallbacks( SAMPLESW_ENDPOINT, &zclSampleSw_CmdCallbacks );
   \   000029                ; Setup parameters for call to function zclGeneral_RegisterCmdCallbacks
   \   000029   7A..         MOV       R2,#zclSampleSw_CmdCallbacks & 0xff
   \   00002B   7B..         MOV       R3,#(zclSampleSw_CmdCallbacks >> 8) & 0xff
   \   00002D   7908         MOV       R1,#0x8
   \   00002F   12....       LCALL     `??zclGeneral_RegisterCmdCallbacks::?relay`; Banked call to: zclGeneral_RegisterCmdCallbacks
    288          
    289            zclSampleSw_ResetAttributesToDefaultValues();
   \   000032                ; Setup parameters for call to function zclSampleSw_ResetAttributesToDefaultValues
   \   000032   12....       LCALL     `??zclSampleSw_ResetAttributesToDefaultValues::?`; Banked call to: zclSampleSw_ResetAttributesToDefaultValues
    290            
    291            // Register the application's attribute list
    292            zcl_registerAttrList( SAMPLESW_ENDPOINT, zclSampleSw_NumAttributes, zclSampleSw_Attrs );
   \   000035                ; Setup parameters for call to function zcl_registerAttrList
   \   000035   7C..         MOV       R4,#zclSampleSw_Attrs & 0xff
   \   000037   7D..         MOV       R5,#(zclSampleSw_Attrs >> 8) & 0xff
   \   000039   90....       MOV       DPTR,#zclSampleSw_NumAttributes
   \   00003C   E4           CLR       A
   \   00003D   93           MOVC      A,@A+DPTR
   \   00003E   FA           MOV       R2,A
   \   00003F   7908         MOV       R1,#0x8
   \   000041   12....       LCALL     `??zcl_registerAttrList::?relay`; Banked call to: zcl_registerAttrList
    293          
    294            // Register the Application to receive the unprocessed Foundation command/response messages
    295            zcl_registerForMsg( zclSampleSw_TaskID );
   \   000044                ; Setup parameters for call to function zcl_registerForMsg
   \   000044   90....       MOV       DPTR,#zclSampleSw_TaskID
   \   000047   E0           MOVX      A,@DPTR
   \   000048   F9           MOV       R1,A
   \   000049   12....       LCALL     `??zcl_registerForMsg::?relay`; Banked call to: zcl_registerForMsg
    296            
    297            // Register for all key events - This app will handle all key events
    298            RegisterForKeys( zclSampleSw_TaskID );
   \   00004C                ; Setup parameters for call to function RegisterForKeys
   \   00004C   90....       MOV       DPTR,#zclSampleSw_TaskID
   \   00004F   E0           MOVX      A,@DPTR
   \   000050   F9           MOV       R1,A
   \   000051   12....       LCALL     `??RegisterForKeys::?relay`; Banked call to: RegisterForKeys
    299            
    300            bdb_RegisterCommissioningStatusCB( zclSampleSw_ProcessCommissioningStatus );
   \   000054                ; Setup parameters for call to function bdb_RegisterCommissioningStatusCB
   \   000054   7A..         MOV       R2,#`??zclSampleSw_ProcessCommissioningStatus::?rela` & 0xff
   \   000056   7B..         MOV       R3,#(`??zclSampleSw_ProcessCommissioningStatus::?rela` >> 8) & 0xff
   \   000058   12....       LCALL     `??bdb_RegisterCommissioningStatusCB::?relay`; Banked call to: bdb_RegisterCommissioningStatusCB
    301          
    302            // Register for a test endpoint
    303            afRegister( &sampleSw_TestEp );
   \   00005B                ; Setup parameters for call to function afRegister
   \   00005B   7A..         MOV       R2,#sampleSw_TestEp & 0xff
   \   00005D   7B..         MOV       R3,#(sampleSw_TestEp >> 8) & 0xff
   \   00005F   12....       LCALL     `??afRegister::?relay`; Banked call to: afRegister
    304            
    305              // Init Uart
    306            zclSampleSw_InitUart();
   \   000062   85..82       MOV       DPL,?XSP + 0
   \   000065   85..83       MOV       DPH,?XSP + 1
   \   000068   7401         MOV       A,#0x1
   \   00006A   F0           MOVX      @DPTR,A
   \   00006B   12....       LCALL     ?XSTACK_DISP0_8
   \   00006E   7404         MOV       A,#0x4
   \   000070   F0           MOVX      @DPTR,A
   \   000071   7402         MOV       A,#0x2
   \   000073   12....       LCALL     ?XSTACK_DISP0_8
   \   000076   E4           CLR       A
   \   000077   F0           MOVX      @DPTR,A
   \   000078   7403         MOV       A,#0x3
   \   00007A   12....       LCALL     ?XSTACK_DISP0_8
   \   00007D   E4           CLR       A
   \   00007E   F0           MOVX      @DPTR,A
   \   00007F   A3           INC       DPTR
   \   000080   F0           MOVX      @DPTR,A
   \   000081   740A         MOV       A,#0xa
   \   000083   12....       LCALL     ?XSTACK_DISP0_8
   \   000086   7480         MOV       A,#-0x80
   \   000088   F0           MOVX      @DPTR,A
   \   000089   A3           INC       DPTR
   \   00008A   E4           CLR       A
   \   00008B   F0           MOVX      @DPTR,A
   \   00008C   7412         MOV       A,#0x12
   \   00008E   12....       LCALL     ?XSTACK_DISP0_8
   \   000091   E4           CLR       A
   \   000092   F0           MOVX      @DPTR,A
   \   000093   A3           INC       DPTR
   \   000094   F0           MOVX      @DPTR,A
   \   000095   7405         MOV       A,#0x5
   \   000097   12....       LCALL     ?XSTACK_DISP0_8
   \   00009A   7406         MOV       A,#0x6
   \   00009C   F0           MOVX      @DPTR,A
   \   00009D   7416         MOV       A,#0x16
   \   00009F   12....       LCALL     ?XSTACK_DISP0_8
   \   0000A2   7401         MOV       A,#0x1
   \   0000A4   F0           MOVX      @DPTR,A
   \   0000A5   741B         MOV       A,#0x1b
   \   0000A7   12....       LCALL     ?XSTACK_DISP0_8
   \   0000AA   74..         MOV       A,#`??zclSampleSw_UartCB::?relay` & 0xff
   \   0000AC   F0           MOVX      @DPTR,A
   \   0000AD   A3           INC       DPTR
   \   0000AE   74..         MOV       A,#(`??zclSampleSw_UartCB::?relay` >> 8) & 0xff
   \   0000B0   F0           MOVX      @DPTR,A
   \   0000B1                ; Setup parameters for call to function HalUARTOpen
   \   0000B1   AA..         MOV       R2,?XSP + 0
   \   0000B3   AB..         MOV       R3,?XSP + 1
   \   0000B5   7900         MOV       R1,#0x0
   \   0000B7   12....       LCALL     `??HalUARTOpen::?relay`; Banked call to: HalUARTOpen
    307            HalUARTWrite(HAL_UART_PORT_0 ,  "UART0 Init Succeed\r\n" , 20);
   \   0000BA                ; Setup parameters for call to function HalUARTWrite
   \   0000BA   7C14         MOV       R4,#0x14
   \   0000BC   7D00         MOV       R5,#0x0
   \   0000BE   7A..         MOV       R2,#`?<Constant "UART0 Init Succeed\\r\\n">` & 0xff
   \   0000C0   7B..         MOV       R3,#(`?<Constant "UART0 Init Succeed\\r\\n">` >> 8) & 0xff
   \   0000C2   7900         MOV       R1,#0x0
   \   0000C4   12....       LCALL     `??HalUARTWrite::?relay`; Banked call to: HalUARTWrite
    308            
    309          #ifdef ZCL_DIAGNOSTIC
    310            // Register the application's callback function to read/write attribute data.
    311            // This is only required when the attribute data format is unknown to ZCL.
    312            zcl_registerReadWriteCB( SAMPLESW_ENDPOINT, zclDiagnostic_ReadWriteAttrCB, NULL );
    313          
    314            if ( zclDiagnostic_InitStats() == ZSuccess )
    315            {
    316              // Here the user could start the timer to save Diagnostics to NV
    317            }
    318          #endif
    319          
    320          #if defined (OTA_CLIENT) && (OTA_CLIENT == TRUE)
    321            // Register for callback events from the ZCL OTA
    322            zclOTA_Register(zclSampleSw_TaskID);
    323          #endif
    324          
    325            zdpExternalStateTaskID = zclSampleSw_TaskID;
   \   0000C7   90....       MOV       DPTR,#zclSampleSw_TaskID
   \   0000CA   E0           MOVX      A,@DPTR
   \   0000CB   90....       MOV       DPTR,#zdpExternalStateTaskID
   \   0000CE   F0           MOVX      @DPTR,A
   \   0000CF   A3           INC       DPTR
   \   0000D0   E4           CLR       A
   \   0000D1   F0           MOVX      @DPTR,A
    326            
    327          #ifdef ZDO_COORDINATOR
    328            // Init Uart
    329            zclSampleSw_InitUart();
    330            
    331            ZDO_RegisterForZDOMsg ( zclSampleSw_TaskID, Device_annce );
    332            
    333            bdb_StartCommissioning( BDB_COMMISSIONING_MODE_NWK_FORMATION |
    334                                    BDB_COMMISSIONING_MODE_FINDING_BINDING );
    335            
    336            NLME_PermitJoiningRequest(255);
    337          #else
    338            bdb_StartCommissioning( BDB_COMMISSIONING_MODE_NWK_STEERING |
    339                                    BDB_COMMISSIONING_MODE_FINDING_BINDING );
   \   0000D2                ; Setup parameters for call to function bdb_StartCommissioning
   \   0000D2   790A         MOV       R1,#0xa
   \   0000D4   12....       LCALL     `??bdb_StartCommissioning::?relay`; Banked call to: bdb_StartCommissioning
    340            
    341            osal_start_timerEx(zclSampleSw_TaskID, 
    342                               SAMPLEAPP_REPORT_EVT, 
    343                               SAMPLEAPP_REPORT_PERIOD);
   \   0000D7                ; Setup parameters for call to function osal_start_timerEx
   \   0000D7   90....       MOV       DPTR,#__Constant_bb8
   \   0000DA   12....       LCALL     ?PUSH_XSTACK8_X_FOUR
   \   0000DD   12....       LCALL     ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   0000E0   12....       LCALL     ?DEALLOC_XSTACK8
    344          #endif
    345          }
   \   0000E3   741D         MOV       A,#0x1d
   \   0000E5   12....       LCALL     ?DEALLOC_XSTACK8
   \   0000E8   7F01         MOV       R7,#0x1
   \   0000EA   02....       LJMP      ?BANKED_LEAVE_XDATA
   \   0000ED                REQUIRE P0SEL
   \   0000ED                REQUIRE P0DIR

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   7A40         MOV       R2,#0x40
   \   000002                REQUIRE ??Subroutine16_0
   \   000002                ; // Fall through to label ??Subroutine16_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine16_0:
   \   000000   7B00         MOV       R3,#0x0
   \   000002                REQUIRE ??Subroutine17_0
   \   000002                ; // Fall through to label ??Subroutine17_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine17_0:
   \   000000   90....       MOV       DPTR,#zclSampleSw_TaskID
   \   000003   E0           MOVX      A,@DPTR
   \   000004   F9           MOV       R1,A
   \   000005   12....       LCALL     `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   000008   7404         MOV       A,#0x4
   \   00000A   22           RET
    346          
    347          /*********************************************************************
    348           * @fn          zclSample_event_loop
    349           *
    350           * @brief       Event Loop Processor for zclGeneral.
    351           *
    352           * @param       none
    353           *
    354           * @return      none
    355           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    356          uint16 zclSampleSw_event_loop( uint8 task_id, uint16 events )
   \                     zclSampleSw_event_loop:
    357          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000   74F4         MOV       A,#-0xc
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 12
   \   000005                ; Auto size: 0
   \   000005   EA           MOV       A,R2
   \   000006   FE           MOV       R6,A
   \   000007   EB           MOV       A,R3
   \   000008   FF           MOV       R7,A
    358            afIncomingMSGPacket_t *MSGpkt;
    359            (void)task_id;  // Intentionally unreferenced parameter
    360          
    361            //Send toggle every 500ms
    362            if( events & SAMPLESW_TOGGLE_TEST_EVT )
   \   000009   5410         ANL       A,#0x10
   \   00000B   605C         JZ        ??zclSampleSw_event_loop_0
    363            {
    364              osal_start_timerEx(zclSampleSw_TaskID,SAMPLESW_TOGGLE_TEST_EVT,500);
   \   00000D                ; Setup parameters for call to function osal_start_timerEx
   \   00000D   90....       MOV       DPTR,#__Constant_1f4
   \   000010   12....       LCALL     ?PUSH_XSTACK8_X_FOUR
   \   000013   7A00         MOV       R2,#0x0
   \   000015   7B10         MOV       R3,#0x10
   \   000017   12....       LCALL     ??Subroutine17_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_48:
   \   00001A   12....       LCALL     ?DEALLOC_XSTACK8
    365              zclGeneral_SendOnOff_CmdToggle( SAMPLESW_ENDPOINT, &zclSampleSw_DstAddr, FALSE, 0 );
   \   00001D                ; Setup parameters for call to function zcl_SendCommand
   \   00001D   E4           CLR       A
   \   00001E   F5..         MOV       ?V0,A
   \   000020   F5..         MOV       ?V1,A
   \   000022   78..         MOV       R0,#?V0
   \   000024   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000027   78..         MOV       R0,#?V0
   \   000029   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00002C   78..         MOV       R0,#?V0
   \   00002E   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   000031   78..         MOV       R0,#?V0
   \   000033   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000036   78..         MOV       R0,#?V0
   \   000038   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   00003B   78..         MOV       R0,#?V0
   \   00003D   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   000040   75..01       MOV       ?V0,#0x1
   \   000043   78..         MOV       R0,#?V0
   \   000045   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   000048   75..02       MOV       ?V0,#0x2
   \   00004B   78..         MOV       R0,#?V0
   \   00004D   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   000050   7C06         MOV       R4,#0x6
   \   000052   7D00         MOV       R5,#0x0
   \   000054   7A..         MOV       R2,#zclSampleSw_DstAddr & 0xff
   \   000056   7B..         MOV       R3,#(zclSampleSw_DstAddr >> 8) & 0xff
   \   000058   7908         MOV       R1,#0x8
   \   00005A   12....       LCALL     `??zcl_SendCommand::?relay`; Banked call to: zcl_SendCommand
   \   00005D   740B         MOV       A,#0xb
   \   00005F   12....       LCALL     ?DEALLOC_XSTACK8
    366              
    367              // return unprocessed events
    368              return (events ^ SAMPLESW_TOGGLE_TEST_EVT);
   \   000062   EE           MOV       A,R6
   \   000063   FA           MOV       R2,A
   \   000064   EF           MOV       A,R7
   \   000065   6410         XRL       A,#0x10
   \   000067   807A         SJMP      ??zclSampleSw_event_loop_1
    369            }
    370            
    371            
    372            if ( events & SYS_EVENT_MSG )
   \                     ??zclSampleSw_event_loop_0:
   \   000069   EB           MOV       A,R3
   \   00006A   5480         ANL       A,#0x80
   \   00006C   7023         JNZ       ??zclSampleSw_event_loop_2
    373            {
    374              while ( (MSGpkt = (afIncomingMSGPacket_t *)osal_msg_receive( zclSampleSw_TaskID )) )
    375              {
    376                switch ( MSGpkt->hdr.event )
    377                {
    378                  case ZCL_INCOMING_MSG:
    379                    // Incoming ZCL Foundation command/response messages
    380                    zclSampleSw_ProcessIncomingMsg( (zclIncomingMsg_t *)MSGpkt );
    381                    break;
    382          
    383                  case KEY_CHANGE:
    384                    zclSampleSw_HandleKeys( ((keyChange_t *)MSGpkt)->state, ((keyChange_t *)MSGpkt)->keys );
    385                    break;
    386          
    387                  case ZDO_STATE_CHANGE:
    388                    
    389                    break;
    390          
    391          #if defined (OTA_CLIENT) && (OTA_CLIENT == TRUE)
    392                  case ZCL_OTA_CALLBACK_IND:
    393                    zclSampleSw_ProcessOTAMsgs( (zclOTA_CallbackMsg_t*)MSGpkt  );
    394                    break;
    395          #endif
    396                    
    397                  default:
    398                    break;
    399                }
    400          
    401                // Release the memory
    402                osal_msg_deallocate( (uint8 *)MSGpkt );
    403              }
    404          
    405              // return unprocessed events
    406              return (events ^ SYS_EVENT_MSG);
    407            }
    408          
    409          #if ZG_BUILD_ENDDEVICE_TYPE    
    410            if ( events & SAMPLEAPP_END_DEVICE_REJOIN_EVT )
   \   00006E   EA           MOV       A,R2
   \   00006F   A2E0         MOV       C,0xE0 /* A   */.0
   \   000071   5049         JNC       ??zclSampleSw_event_loop_3
    411            {
    412              bdb_ZedAttemptRecoverNwk();
   \   000073                ; Setup parameters for call to function bdb_ZedAttemptRecoverNwk
   \   000073   12....       LCALL     `??bdb_ZedAttemptRecoverNwk::?relay`; Banked call to: bdb_ZedAttemptRecoverNwk
    413              return ( events ^ SAMPLEAPP_END_DEVICE_REJOIN_EVT );
   \   000076   EE           MOV       A,R6
   \   000077   6401         XRL       A,#0x1
   \   000079   8066         SJMP      ??zclSampleSw_event_loop_4
    414            }
   \                     ??zclSampleSw_event_loop_5:
   \   00007B   A3           INC       DPTR
   \   00007C   A3           INC       DPTR
   \   00007D   A3           INC       DPTR
   \   00007E   E0           MOVX      A,@DPTR
   \   00007F   A2E5         MOV       C,0xE0 /* A   */.5
   \   000081   5007         JNC       ??zclSampleSw_event_loop_6
   \   000083                ; Setup parameters for call to function HalLedSet
   \   000083   7A08         MOV       R2,#0x8
   \   000085   7902         MOV       R1,#0x2
   \   000087   12....       LCALL     `??HalLedSet::?relay`; Banked call to: HalLedSet
   \                     ??zclSampleSw_event_loop_6:
   \   00008A                ; Setup parameters for call to function osal_msg_deallocate
   \   00008A   AA..         MOV       R2,?V0
   \   00008C   AB..         MOV       R3,?V1
   \   00008E   12....       LCALL     `??osal_msg_deallocate::?relay`; Banked call to: osal_msg_deallocate
   \                     ??zclSampleSw_event_loop_2:
   \   000091                ; Setup parameters for call to function osal_msg_receive
   \   000091   90....       MOV       DPTR,#zclSampleSw_TaskID
   \   000094   E0           MOVX      A,@DPTR
   \   000095   F9           MOV       R1,A
   \   000096   12....       LCALL     `??osal_msg_receive::?relay`; Banked call to: osal_msg_receive
   \   000099   8A..         MOV       ?V0,R2
   \   00009B   8B..         MOV       ?V1,R3
   \   00009D   EA           MOV       A,R2
   \   00009E   4B           ORL       A,R3
   \   00009F   6014         JZ        ??zclSampleSw_event_loop_7
   \   0000A1   8A82         MOV       DPL,R2
   \   0000A3   8B83         MOV       DPH,R3
   \   0000A5   E0           MOVX      A,@DPTR
   \   0000A6   24CC         ADD       A,#-0x34
   \   0000A8   6006         JZ        ??zclSampleSw_event_loop_8
   \   0000AA   2474         ADD       A,#0x74
   \   0000AC   60CD         JZ        ??zclSampleSw_event_loop_5
   \   0000AE   80DA         SJMP      ??zclSampleSw_event_loop_6
   \                     ??zclSampleSw_event_loop_8:
   \   0000B0                ; Setup parameters for call to function zclSampleSw_ProcessIncomingMsg
   \   0000B0   12....       LCALL     `??zclSampleSw_ProcessIncomingMsg::?relay`; Banked call to: zclSampleSw_ProcessIncomingMsg
   \   0000B3   80D5         SJMP      ??zclSampleSw_event_loop_6
   \                     ??zclSampleSw_event_loop_7:
   \   0000B5   EE           MOV       A,R6
   \   0000B6   FA           MOV       R2,A
   \   0000B7   EF           MOV       A,R7
   \   0000B8   6480         XRL       A,#0x80
   \   0000BA   8027         SJMP      ??zclSampleSw_event_loop_1
    415          #endif
    416            
    417          #ifdef ZDO_COORDINATOR
    418          #else
    419            // Rejoin
    420            if ( events & SAMPLEAPP_REJOIN_EVT )
   \                     ??zclSampleSw_event_loop_3:
   \   0000BC   5480         ANL       A,#0x80
   \   0000BE   600A         JZ        ??zclSampleSw_event_loop_9
    421            {
    422              bdb_StartCommissioning(BDB_COMMISSIONING_MODE_NWK_STEERING |
    423                                BDB_COMMISSIONING_MODE_FINDING_BINDING );
   \   0000C0                ; Setup parameters for call to function bdb_StartCommissioning
   \   0000C0   790A         MOV       R1,#0xa
   \   0000C2   12....       LCALL     `??bdb_StartCommissioning::?relay`; Banked call to: bdb_StartCommissioning
    424              
    425              return ( events ^ SAMPLEAPP_REJOIN_EVT );
   \   0000C5   EE           MOV       A,R6
   \   0000C6   6480         XRL       A,#0x80
   \   0000C8   8017         SJMP      ??zclSampleSw_event_loop_4
    426            }
    427            
    428            // Report
    429            if ( events & SAMPLEAPP_REPORT_EVT )
   \                     ??zclSampleSw_event_loop_9:
   \   0000CA   EA           MOV       A,R2
   \   0000CB   5440         ANL       A,#0x40
   \   0000CD   6017         JZ        ??zclSampleSw_event_loop_10
    430            {
    431                zclSampleSw_ReportTest();
   \   0000CF                ; Setup parameters for call to function zclSampleSw_ReportTest
   \   0000CF   12....       LCALL     `??zclSampleSw_ReportTest::?relay`; Banked call to: zclSampleSw_ReportTest
    432              
    433                osal_start_timerEx(zclSampleSw_TaskID, 
    434                               SAMPLEAPP_REPORT_EVT, 
    435                               SAMPLEAPP_REPORT_PERIOD);
   \   0000D2                ; Setup parameters for call to function osal_start_timerEx
   \   0000D2   90....       MOV       DPTR,#__Constant_bb8
   \   0000D5   12....       LCALL     ?PUSH_XSTACK8_X_FOUR
   \   0000D8   12....       LCALL     ?Subroutine8 & 0xFFFF
   \                     ??CrossCallReturnLabel_46:
   \   0000DB   12....       LCALL     ?DEALLOC_XSTACK8
    436                
    437                return ( events ^ SAMPLEAPP_REPORT_EVT );
   \   0000DE   EE           MOV       A,R6
   \   0000DF   6440         XRL       A,#0x40
   \                     ??zclSampleSw_event_loop_4:
   \   0000E1   FA           MOV       R2,A
   \   0000E2   EF           MOV       A,R7
   \                     ??zclSampleSw_event_loop_1:
   \   0000E3   FB           MOV       R3,A
   \   0000E4   8004         SJMP      ??zclSampleSw_event_loop_11
    438            }
    439          #endif
    440            
    441            // Discard unknown events
    442            return 0;
   \                     ??zclSampleSw_event_loop_10:
   \   0000E6   7A00         MOV       R2,#0x0
   \   0000E8   7B00         MOV       R3,#0x0
   \                     ??zclSampleSw_event_loop_11:
   \   0000EA   7F04         MOV       R7,#0x4
   \   0000EC   02....       LJMP      ?BANKED_LEAVE_XDATA
    443          }
    444          
    445          /*********************************************************************
    446           * @fn      zclSampleSw_HandleKeys
    447           *
    448           * @brief   Handles all key events for this device.
    449           *
    450           * @param   shift - true if in shift/alt.
    451           * @param   keys - bit field for key events. Valid entries:
    452           *                 HAL_KEY_SW_5
    453           *                 HAL_KEY_SW_4
    454           *                 HAL_KEY_SW_2
    455           *                 HAL_KEY_SW_1
    456           *
    457           * @return  none
    458           */
    459          static void zclSampleSw_HandleKeys( byte shift, byte keys )
    460          { 
    461            if(keys & HAL_KEY_SW_6)
    462            {
    463              HalLedSet(HAL_LED_2, HAL_LED_MODE_TOGGLE);  
    464            } 
    465          }
    466            
    467          /*********************************************************************
    468           * @fn      zclSampleSw_ProcessCommissioningStatus
    469           *
    470           * @brief   Callback in which the status of the commissioning process are reported
    471           *
    472           * @param   bdbCommissioningModeMsg - Context message of the status of a commissioning process
    473           *
    474           * @return  none
    475           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    476          static void zclSampleSw_ProcessCommissioningStatus(bdbCommissioningModeMsg_t *bdbCommissioningModeMsg)
   \                     zclSampleSw_ProcessCommissioningStatus:
    477          {
   \   000000   C082         PUSH      DPL
   \   000002   C083         PUSH      DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    478            switch(bdbCommissioningModeMsg->bdbCommissioningMode)
   \   000004   8A82         MOV       DPL,R2
   \   000006   8B83         MOV       DPH,R3
   \   000008   A3           INC       DPTR
   \   000009   E0           MOVX      A,@DPTR
   \   00000A   14           DEC       A
   \   00000B   601B         JZ        ??zclSampleSw_ProcessCommissioningStatus_0
   \   00000D   14           DEC       A
   \   00000E   6006         JZ        ??zclSampleSw_ProcessCommissioningStatus_1
   \   000010   24FD         ADD       A,#-0x3
   \   000012   6025         JZ        ??zclSampleSw_ProcessCommissioningStatus_2
   \   000014   803A         SJMP      ??zclSampleSw_ProcessCommissioningStatus_3
    479            {
    480              case BDB_COMMISSIONING_FORMATION:
    481                if(bdbCommissioningModeMsg->bdbCommissioningStatus == BDB_COMMISSIONING_SUCCESS)
   \                     ??zclSampleSw_ProcessCommissioningStatus_1:
   \   000016   8A82         MOV       DPL,R2
   \   000018   8B83         MOV       DPH,R3
   \   00001A   E0           MOVX      A,@DPTR
   \   00001B   7033         JNZ       ??zclSampleSw_ProcessCommissioningStatus_3
    482                {
    483                  //After formation, perform nwk steering again plus the remaining commissioning modes that has not been processed yet
    484                  bdb_StartCommissioning(BDB_COMMISSIONING_MODE_NWK_STEERING | bdbCommissioningModeMsg->bdbRemainingCommissioningModes);
   \   00001D                ; Setup parameters for call to function bdb_StartCommissioning
   \   00001D   A3           INC       DPTR
   \   00001E   A3           INC       DPTR
   \   00001F   E0           MOVX      A,@DPTR
   \   000020   4402         ORL       A,#0x2
   \   000022   F9           MOV       R1,A
   \   000023   12....       LCALL     `??bdb_StartCommissioning::?relay`; Banked call to: bdb_StartCommissioning
   \   000026   8028         SJMP      ??zclSampleSw_ProcessCommissioningStatus_3
    485                }
    486                else
    487                {
    488                  //Want to try other channels?
    489                  //try with bdb_setChannelAttribute
    490                }
    491              break;
    492              case BDB_COMMISSIONING_NWK_STEERING:
    493                if(bdbCommissioningModeMsg->bdbCommissioningStatus == BDB_COMMISSIONING_SUCCESS)
   \                     ??zclSampleSw_ProcessCommissioningStatus_0:
   \   000028   8A82         MOV       DPL,R2
   \   00002A   8B83         MOV       DPH,R3
   \   00002C   E0           MOVX      A,@DPTR
   \   00002D   6021         JZ        ??zclSampleSw_ProcessCommissioningStatus_3
    494                {
    495                  //YOUR JOB:
    496                  //We are on the nwk, what now?
    497                }
    498                else
    499                {
    500                  #ifdef ZDO_COORDINATOR
    501                  #else
    502                  osal_start_timerEx(zclSampleSw_TaskID, 
    503                                     SAMPLEAPP_REJOIN_EVT, 
    504                                     SAMPLEAPP_REJOIN_PERIOD);
   \   00002F                ; Setup parameters for call to function osal_start_timerEx
   \   00002F   90....       MOV       DPTR,#__Constant_3e8
   \   000032   12....       LCALL     ?PUSH_XSTACK8_X_FOUR
   \   000035   7A80         MOV       R2,#-0x80
   \   000037   8011         SJMP      ??zclSampleSw_ProcessCommissioningStatus_4
    505                  #endif
    506                }
    507              break;
    508              case BDB_COMMISSIONING_FINDING_BINDING:
    509                if(bdbCommissioningModeMsg->bdbCommissioningStatus == BDB_COMMISSIONING_SUCCESS)
    510                {
    511                  //YOUR JOB:
    512                }
    513                else
    514                {
    515                  //YOUR JOB:
    516                  //retry?, wait for user interaction?
    517                }
    518              break;
    519              case BDB_COMMISSIONING_INITIALIZATION:
    520                //Initialization notification can only be successful. Failure on initialization 
    521                //only happens for ZED and is notified as BDB_COMMISSIONING_PARENT_LOST notification
    522                
    523                //YOUR JOB:
    524                //We are on a network, what now?
    525                
    526              break;
    527          #if ZG_BUILD_ENDDEVICE_TYPE    
    528              case BDB_COMMISSIONING_PARENT_LOST:
    529                if(bdbCommissioningModeMsg->bdbCommissioningStatus == BDB_COMMISSIONING_NETWORK_RESTORED)
   \                     ??zclSampleSw_ProcessCommissioningStatus_2:
   \   000039   8A82         MOV       DPL,R2
   \   00003B   8B83         MOV       DPH,R3
   \   00003D   E0           MOVX      A,@DPTR
   \   00003E   640D         XRL       A,#0xd
   \   000040   600E         JZ        ??zclSampleSw_ProcessCommissioningStatus_3
    530                {
    531                  //We did recover from losing parent
    532                }
    533                else
    534                {
    535                  //Parent not found, attempt to rejoin again after a fixed delay
    536                  osal_start_timerEx(zclSampleSw_TaskID, SAMPLEAPP_END_DEVICE_REJOIN_EVT, SAMPLEAPP_END_DEVICE_REJOIN_DELAY);
   \   000042                ; Setup parameters for call to function osal_start_timerEx
   \   000042   90....       MOV       DPTR,#__Constant_2710
   \   000045   12....       LCALL     ?PUSH_XSTACK8_X_FOUR
   \   000048   7A01         MOV       R2,#0x1
    537                }
    538              break;
    539          #endif 
    540            }
   \                     ??zclSampleSw_ProcessCommissioningStatus_4:
   \   00004A   12....       LCALL     ??Subroutine16_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_47:
   \   00004D   12....       LCALL     ?DEALLOC_XSTACK8
    541          }
   \                     ??zclSampleSw_ProcessCommissioningStatus_3:
   \   000050                REQUIRE ?Subroutine0
   \   000050                ; // Fall through to label ?Subroutine0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   D083         POP       DPH
   \   000002   D082         POP       DPL
   \   000004   02....       LJMP      ?BRET
    542          
    543          /*********************************************************************
    544           * @fn      zclSampleSw_BasicResetCB
    545           *
    546           * @brief   Callback from the ZCL General Cluster Library
    547           *          to set all the Basic Cluster attributes to  default values.
    548           *
    549           * @param   none
    550           *
    551           * @return  none
    552           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    553          static void zclSampleSw_BasicResetCB( void )
   \                     zclSampleSw_BasicResetCB:
    554          {
   \   000000   C082         PUSH      DPL
   \   000002   C083         PUSH      DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    555            zclSampleSw_ResetAttributesToDefaultValues();
   \   000004                ; Setup parameters for call to function zclSampleSw_ResetAttributesToDefaultValues
   \   000004   12....       LCALL     `??zclSampleSw_ResetAttributesToDefaultValues::?`; Banked call to: zclSampleSw_ResetAttributesToDefaultValues
    556          }
   \   000007   80..         SJMP      ?Subroutine0
    557          
    558          /******************************************************************************
    559           *
    560           *  Functions for processing ZCL Foundation incoming Command/Response messages
    561           *
    562           *****************************************************************************/
    563          
    564          /*********************************************************************
    565           * @fn      zclSampleSw_ProcessIncomingMsg
    566           *
    567           * @brief   Process ZCL Foundation incoming message
    568           *
    569           * @param   pInMsg - pointer to the received message
    570           *
    571           * @return  none
    572           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    573          static void zclSampleSw_ProcessIncomingMsg( zclIncomingMsg_t *pInMsg )
   \                     zclSampleSw_ProcessIncomingMsg:
    574          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000   74F2         MOV       A,#-0xe
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 0
   \   000005   EA           MOV       A,R2
   \   000006   FE           MOV       R6,A
   \   000007   EB           MOV       A,R3
   \   000008   FF           MOV       R7,A
    575            switch ( pInMsg->zclHdr.commandID )
   \   000009   EA           MOV       A,R2
   \   00000A   2417         ADD       A,#0x17
   \   00000C   F5..         MOV       ?V0,A
   \   00000E   E4           CLR       A
   \   00000F   3F           ADDC      A,R7
   \   000010   F5..         MOV       ?V1,A
   \   000012   8A82         MOV       DPL,R2
   \   000014   8B83         MOV       DPH,R3
   \   000016   A3           INC       DPTR
   \   000017   A3           INC       DPTR
   \   000018   A3           INC       DPTR
   \   000019   A3           INC       DPTR
   \   00001A   A3           INC       DPTR
   \   00001B   A3           INC       DPTR
   \   00001C   A3           INC       DPTR
   \   00001D   E0           MOVX      A,@DPTR
   \   00001E   14           DEC       A
   \   00001F   6026         JZ        ??zclSampleSw_ProcessIncomingMsg_0
   \   000021   24FD         ADD       A,#-0x3
   \   000023   7003         JNZ       $+5
   \   000025   02....       LJMP      ??zclSampleSw_ProcessIncomingMsg_1 & 0xFFFF
   \   000028   24F7         ADD       A,#-0x9
   \   00002A   7003         JNZ       $+5
   \   00002C   02....       LJMP      ??zclSampleSw_ProcessIncomingMsg_2 & 0xFFFF
   \   00002F   24FB         ADD       A,#-0x5
   \   000031   7003         JNZ       $+5
   \   000033   02....       LJMP      ??zclSampleSw_ProcessIncomingMsg_3 & 0xFFFF
   \   000036   24FE         ADD       A,#-0x2
   \   000038   7003         JNZ       $+5
   \   00003A   02....       LJMP      ??zclSampleSw_ProcessIncomingMsg_3 & 0xFFFF
   \   00003D   24FE         ADD       A,#-0x2
   \   00003F   7003         JNZ       $+5
   \   000041   02....       LJMP      ??zclSampleSw_ProcessIncomingMsg_4 & 0xFFFF
   \   000044   02....       LJMP      ??zclSampleSw_ProcessIncomingMsg_5 & 0xFFFF
    576            {
    577          #ifdef ZCL_READ
    578              case ZCL_CMD_READ_RSP:
    579                zclSampleSw_ProcessInReadRspCmd( pInMsg );
   \                     ??zclSampleSw_ProcessIncomingMsg_0:
   \   000047   85..82       MOV       DPL,?V0
   \   00004A   85..83       MOV       DPH,?V1
   \   00004D   E0           MOVX      A,@DPTR
   \   00004E   F5..         MOV       ?V2,A
   \   000050   A3           INC       DPTR
   \   000051   E0           MOVX      A,@DPTR
   \   000052   F5..         MOV       ?V3,A
   \   000054   75..00       MOV       ?V4,#0x0
   \                     ??zclSampleSw_ProcessIncomingMsg_6:
   \   000057   85..82       MOV       DPL,?V2
   \   00005A   85..83       MOV       DPH,?V3
   \   00005D   E0           MOVX      A,@DPTR
   \   00005E   F8           MOV       R0,A
   \   00005F   E5..         MOV       A,?V4
   \   000061   C3           CLR       C
   \   000062   98           SUBB      A,R0
   \   000063   4003         JC        $+5
   \   000065   02....       LJMP      ??zclSampleSw_ProcessIncomingMsg_5 & 0xFFFF
   \   000068   8E82         MOV       DPL,R6
   \   00006A   8F83         MOV       DPH,R7
   \   00006C   A3           INC       DPTR
   \   00006D   A3           INC       DPTR
   \   00006E   A3           INC       DPTR
   \   00006F   A3           INC       DPTR
   \   000070   A3           INC       DPTR
   \   000071   A3           INC       DPTR
   \   000072   A3           INC       DPTR
   \   000073   A3           INC       DPTR
   \   000074   E0           MOVX      A,@DPTR
   \   000075   6407         XRL       A,#0x7
   \   000077   7002         JNZ       ??zclSampleSw_ProcessIncomingMsg_7
   \   000079   A3           INC       DPTR
   \   00007A   E0           MOVX      A,@DPTR
   \                     ??zclSampleSw_ProcessIncomingMsg_7:
   \   00007B   7049         JNZ       ??zclSampleSw_ProcessIncomingMsg_8
   \   00007D   E5..         MOV       A,?V4
   \   00007F   75F006       MOV       B,#0x6
   \   000082   A4           MUL       AB
   \   000083   F8           MOV       R0,A
   \   000084   A9F0         MOV       R1,B
   \   000086   E5..         MOV       A,?V2
   \   000088   28           ADD       A,R0
   \   000089   F8           MOV       R0,A
   \   00008A   E5..         MOV       A,?V3
   \   00008C   39           ADDC      A,R1
   \   00008D   F9           MOV       R1,A
   \   00008E   E8           MOV       A,R0
   \   00008F   FA           MOV       R2,A
   \   000090   E9           MOV       A,R1
   \   000091   FB           MOV       R3,A
   \   000092   8882         MOV       DPL,R0
   \   000094   F583         MOV       DPH,A
   \   000096   A3           INC       DPTR
   \   000097   E0           MOVX      A,@DPTR
   \   000098   6410         XRL       A,#0x10
   \   00009A   7002         JNZ       ??zclSampleSw_ProcessIncomingMsg_9
   \   00009C   A3           INC       DPTR
   \   00009D   E0           MOVX      A,@DPTR
   \                     ??zclSampleSw_ProcessIncomingMsg_9:
   \   00009E   7026         JNZ       ??zclSampleSw_ProcessIncomingMsg_8
   \   0000A0                ; Setup parameters for call to function HalLcdWriteStringValue
   \   0000A0   75..04       MOV       ?V5,#0x4
   \   0000A3   78..         MOV       R0,#?V5
   \   0000A5   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   0000A8   790A         MOV       R1,#0xa
   \   0000AA   8A82         MOV       DPL,R2
   \   0000AC   8B83         MOV       DPH,R3
   \   0000AE   A3           INC       DPTR
   \   0000AF   A3           INC       DPTR
   \   0000B0   A3           INC       DPTR
   \   0000B1   A3           INC       DPTR
   \   0000B2   A3           INC       DPTR
   \   0000B3   12....       LCALL     ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   0000B6   E0           MOVX      A,@DPTR
   \   0000B7   FC           MOV       R4,A
   \   0000B8   7D00         MOV       R5,#0x0
   \   0000BA   7A..         MOV       R2,#`?<Constant "Read:">` & 0xff
   \   0000BC   7B..         MOV       R3,#(`?<Constant "Read:">` >> 8) & 0xff
   \   0000BE   12....       LCALL     `??HalLcdWriteStringValue::?relay`; Banked call to: HalLcdWriteStringValue
   \   0000C1   7401         MOV       A,#0x1
   \   0000C3   12....       LCALL     ?DEALLOC_XSTACK8
   \                     ??zclSampleSw_ProcessIncomingMsg_8:
   \   0000C6   05..         INC       ?V4
   \   0000C8   808D         SJMP      ??zclSampleSw_ProcessIncomingMsg_6
    580                break;
    581          #endif
    582          #ifdef ZCL_WRITE
    583              case ZCL_CMD_WRITE_RSP:
    584                zclSampleSw_ProcessInWriteRspCmd( pInMsg );
   \                     ??zclSampleSw_ProcessIncomingMsg_1:
   \   0000CA   85..82       MOV       DPL,?V0
   \   0000CD   85..83       MOV       DPH,?V1
   \   0000D0   E0           MOVX      A,@DPTR
   \   0000D1   F8           MOV       R0,A
   \   0000D2   A3           INC       DPTR
   \   0000D3   E0           MOVX      A,@DPTR
   \   0000D4   8882         MOV       DPL,R0
   \   0000D6   F583         MOV       DPH,A
   \   0000D8   7800         MOV       R0,#0x0
   \                     ??zclSampleSw_ProcessIncomingMsg_10:
   \   0000DA   E0           MOVX      A,@DPTR
   \   0000DB   F9           MOV       R1,A
   \   0000DC   E8           MOV       A,R0
   \   0000DD   C3           CLR       C
   \   0000DE   99           SUBB      A,R1
   \   0000DF   502C         JNC       ??zclSampleSw_ProcessIncomingMsg_5
   \   0000E1   08           INC       R0
   \   0000E2   80F6         SJMP      ??zclSampleSw_ProcessIncomingMsg_10
    585                break;
    586          #endif
    587          #ifdef ZCL_REPORT
    588              // See ZCL Test Applicaiton (zcl_testapp.c) for sample code on Attribute Reporting
    589              case ZCL_CMD_CONFIG_REPORT:
    590                //zclSampleSw_ProcessInConfigReportCmd( pInMsg );
    591                break;
    592          
    593              case ZCL_CMD_CONFIG_REPORT_RSP:
    594                //zclSampleSw_ProcessInConfigReportRspCmd( pInMsg );
    595                break;
    596          
    597              case ZCL_CMD_READ_REPORT_CFG:
    598                //zclSampleSw_ProcessInReadReportCfgCmd( pInMsg );
    599                break;
    600          
    601              case ZCL_CMD_READ_REPORT_CFG_RSP:
    602                //zclSampleSw_ProcessInReadReportCfgRspCmd( pInMsg );
    603                break;
    604          
    605              case ZCL_CMD_REPORT:
    606                zclSampleSw_ProcessInReportCmd( pInMsg );
    607                break;
    608          #endif
    609              case ZCL_CMD_DEFAULT_RSP:
    610                zclSampleSw_ProcessInDefaultRspCmd( pInMsg );
    611                break;
    612          #ifdef ZCL_DISCOVER
    613              case ZCL_CMD_DISCOVER_CMDS_RECEIVED_RSP:
    614                zclSampleSw_ProcessInDiscCmdsRspCmd( pInMsg );
   \                     ??zclSampleSw_ProcessIncomingMsg_3:
   \   0000E4                ; Setup parameters for call to function zclSampleSw_ProcessInDiscCmdsRspCmd
    615                break;
    616          
    617              case ZCL_CMD_DISCOVER_CMDS_GEN_RSP:
    618                zclSampleSw_ProcessInDiscCmdsRspCmd( pInMsg );
   \   0000E4                ; Setup parameters for call to function zclSampleSw_ProcessInDiscCmdsRspCmd
   \   0000E4   12....       LCALL     `??zclSampleSw_ProcessInDiscCmdsRspCmd::?relay`; Banked call to: zclSampleSw_ProcessInDiscCmdsRspCmd
    619                break;
   \   0000E7   8024         SJMP      ??zclSampleSw_ProcessIncomingMsg_5
    620          
    621              case ZCL_CMD_DISCOVER_ATTRS_RSP:
    622                zclSampleSw_ProcessInDiscAttrsRspCmd( pInMsg );
   \                     ??zclSampleSw_ProcessIncomingMsg_2:
   \   0000E9   12....       LCALL     ?Subroutine9 & 0xFFFF
   \                     ??CrossCallReturnLabel_50:
   \   0000EC   8882         MOV       DPL,R0
   \   0000EE   8983         MOV       DPH,R1
   \   0000F0   A3           INC       DPTR
   \   0000F1   E0           MOVX      A,@DPTR
   \   0000F2   FB           MOV       R3,A
   \   0000F3   EA           MOV       A,R2
   \   0000F4   C3           CLR       C
   \   0000F5   9B           SUBB      A,R3
   \   0000F6   5015         JNC       ??zclSampleSw_ProcessIncomingMsg_5
   \   0000F8   0A           INC       R2
   \   0000F9   80F1         SJMP      ??CrossCallReturnLabel_50
    623                break;
    624          
    625              case ZCL_CMD_DISCOVER_ATTRS_EXT_RSP:
    626                zclSampleSw_ProcessInDiscAttrsExtRspCmd( pInMsg );
   \                     ??zclSampleSw_ProcessIncomingMsg_4:
   \   0000FB   12....       LCALL     ?Subroutine9 & 0xFFFF
    627                break;
    628          #endif
    629              default:
    630                break;
    631            }
   \                     ??CrossCallReturnLabel_51:
   \   0000FE   8001         SJMP      ??zclSampleSw_ProcessIncomingMsg_11
   \                     ??zclSampleSw_ProcessIncomingMsg_12:
   \   000100   0A           INC       R2
   \                     ??zclSampleSw_ProcessIncomingMsg_11:
   \   000101   8882         MOV       DPL,R0
   \   000103   8983         MOV       DPH,R1
   \   000105   A3           INC       DPTR
   \   000106   E0           MOVX      A,@DPTR
   \   000107   FB           MOV       R3,A
   \   000108   EA           MOV       A,R2
   \   000109   C3           CLR       C
   \   00010A   9B           SUBB      A,R3
   \   00010B   40F3         JC        ??zclSampleSw_ProcessIncomingMsg_12
    632          
    633            if ( pInMsg->attrCmd )
   \                     ??zclSampleSw_ProcessIncomingMsg_5:
   \   00010D   85..82       MOV       DPL,?V0
   \   000110   85..83       MOV       DPH,?V1
   \   000113   E0           MOVX      A,@DPTR
   \   000114   FA           MOV       R2,A
   \   000115   A3           INC       DPTR
   \   000116   E0           MOVX      A,@DPTR
   \   000117   FB           MOV       R3,A
   \   000118   EA           MOV       A,R2
   \   000119   4B           ORL       A,R3
   \   00011A   6003         JZ        ??zclSampleSw_ProcessIncomingMsg_13
    634              osal_mem_free( pInMsg->attrCmd );
   \   00011C                ; Setup parameters for call to function osal_mem_free
   \   00011C   12....       LCALL     `??osal_mem_free::?relay`; Banked call to: osal_mem_free
    635          }
   \                     ??zclSampleSw_ProcessIncomingMsg_13:
   \   00011F                REQUIRE ?Subroutine1
   \   00011F                ; // Fall through to label ?Subroutine1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   7F06         MOV       R7,#0x6
   \   000002   02....       LJMP      ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   85..82       MOV       DPL,?V0
   \   000003   85..83       MOV       DPH,?V1
   \   000006                REQUIRE ??Subroutine18_0
   \   000006                ; // Fall through to label ??Subroutine18_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine18_0:
   \   000000   E0           MOVX      A,@DPTR
   \   000001   F8           MOV       R0,A
   \   000002   A3           INC       DPTR
   \   000003   E0           MOVX      A,@DPTR
   \   000004   F9           MOV       R1,A
   \   000005   7A00         MOV       R2,#0x0
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   E0           MOVX      A,@DPTR
   \   000001   F8           MOV       R0,A
   \   000002   A3           INC       DPTR
   \   000003   E0           MOVX      A,@DPTR
   \   000004   F583         MOV       DPH,A
   \   000006   8882         MOV       DPL,R0
   \   000008   22           RET
    636          
    637          #ifdef ZCL_READ
    638          /*********************************************************************
    639           * @fn      zclSampleSw_ProcessInReadRspCmd
    640           *
    641           * @brief   Process the "Profile" Read Response Command
    642           *
    643           * @param   pInMsg - incoming message to process
    644           *
    645           * @return  none
    646           */
    647          static uint8 zclSampleSw_ProcessInReadRspCmd( zclIncomingMsg_t *pInMsg )
    648          {
    649            zclReadRspCmd_t *readRspCmd;
    650            uint8 i;
    651          
    652            readRspCmd = (zclReadRspCmd_t *)pInMsg->attrCmd;
    653            for (i = 0; i < readRspCmd->numAttr; i++)
    654            {
    655              // Notify the originator of the results of the original read attributes
    656              // attempt and, for each successfull request, the value of the requested
    657              // attribute
    658              if( pInMsg->clusterId == ZCL_CLUSTER_ID_GEN_ON_OFF_SWITCH_CONFIG &&
    659                  readRspCmd->attrList[i].attrID == ATTRID_ON_OFF_SWITCH_ACTIONS )
    660              {
    661                  uint8 val;
    662                  val = *(readRspCmd->attrList[i].data);
    663                  
    664                  HalLcdWriteStringValue("Read:", val, 10, 4);
    665              }
    666            }
    667          
    668            return TRUE;
    669          }
    670          #endif // ZCL_READ
    671          
    672          #ifdef ZCL_WRITE
    673          /*********************************************************************
    674           * @fn      zclSampleSw_ProcessInWriteRspCmd
    675           *
    676           * @brief   Process the "Profile" Write Response Command
    677           *
    678           * @param   pInMsg - incoming message to process
    679           *
    680           * @return  none
    681           */
    682          static uint8 zclSampleSw_ProcessInWriteRspCmd( zclIncomingMsg_t *pInMsg )
    683          {
    684            zclWriteRspCmd_t *writeRspCmd;
    685            uint8 i;
    686          
    687            writeRspCmd = (zclWriteRspCmd_t *)pInMsg->attrCmd;
    688            for (i = 0; i < writeRspCmd->numAttr; i++)
    689            {
    690              // Notify the device of the results of the its original write attributes
    691              // command.
    692            }
    693          
    694            return TRUE;
    695          }
    696          #endif // ZCL_WRITE
    697          
    698          /*********************************************************************
    699           * @fn      zclSampleSw_ProcessInDefaultRspCmd
    700           *
    701           * @brief   Process the "Profile" Default Response Command
    702           *
    703           * @param   pInMsg - incoming message to process
    704           *
    705           * @return  none
    706           */
    707          static uint8 zclSampleSw_ProcessInDefaultRspCmd( zclIncomingMsg_t *pInMsg )
    708          {
    709            // zclDefaultRspCmd_t *defaultRspCmd = (zclDefaultRspCmd_t *)pInMsg->attrCmd;
    710            // Device is notified of the Default Response command.
    711            (void)pInMsg;
    712            return TRUE;
    713          }
    714          
    715          #ifdef ZCL_DISCOVER
    716          /*********************************************************************
    717           * @fn      zclSampleSw_ProcessInDiscCmdsRspCmd
    718           *
    719           * @brief   Process the Discover Commands Response Command
    720           *
    721           * @param   pInMsg - incoming message to process
    722           *
    723           * @return  none
    724           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    725          static uint8 zclSampleSw_ProcessInDiscCmdsRspCmd( zclIncomingMsg_t *pInMsg )
   \                     zclSampleSw_ProcessInDiscCmdsRspCmd:
    726          {
   \   000000   C082         PUSH      DPL
   \   000002   C083         PUSH      DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 0
    727            zclDiscoverCmdsCmdRsp_t *discoverRspCmd;
    728            uint8 i;
    729          
    730            discoverRspCmd = (zclDiscoverCmdsCmdRsp_t *)pInMsg->attrCmd;
   \   000004   EA           MOV       A,R2
   \   000005   2417         ADD       A,#0x17
   \   000007   F582         MOV       DPL,A
   \   000009   E4           CLR       A
   \   00000A   3B           ADDC      A,R3
   \   00000B   F583         MOV       DPH,A
   \   00000D   12....       LCALL     ??Subroutine18_0 & 0xFFFF
    731            for ( i = 0; i < discoverRspCmd->numCmd; i++ )
   \                     ??CrossCallReturnLabel_49:
   \   000010   8001         SJMP      ??zclSampleSw_ProcessInDiscCmdsRspCmd_0
   \                     ??zclSampleSw_ProcessInDiscCmdsRspCmd_1:
   \   000012   0A           INC       R2
   \                     ??zclSampleSw_ProcessInDiscCmdsRspCmd_0:
   \   000013   8882         MOV       DPL,R0
   \   000015   8983         MOV       DPH,R1
   \   000017   A3           INC       DPTR
   \   000018   A3           INC       DPTR
   \   000019   E0           MOVX      A,@DPTR
   \   00001A   FB           MOV       R3,A
   \   00001B   EA           MOV       A,R2
   \   00001C   C3           CLR       C
   \   00001D   9B           SUBB      A,R3
   \   00001E   40F2         JC        ??zclSampleSw_ProcessInDiscCmdsRspCmd_1
    732            {
    733              // Device is notified of the result of its attribute discovery command.
    734            }
    735          
    736            return TRUE;
   \   000020   7901         MOV       R1,#0x1
   \   000022   02....       LJMP      ?Subroutine0 & 0xFFFF
    737          }
    738          
    739          /*********************************************************************
    740           * @fn      zclSampleSw_ProcessInDiscAttrsRspCmd
    741           *
    742           * @brief   Process the "Profile" Discover Attributes Response Command
    743           *
    744           * @param   pInMsg - incoming message to process
    745           *
    746           * @return  none
    747           */
    748          static uint8 zclSampleSw_ProcessInDiscAttrsRspCmd( zclIncomingMsg_t *pInMsg )
    749          {
    750            zclDiscoverAttrsRspCmd_t *discoverRspCmd;
    751            uint8 i;
    752          
    753            discoverRspCmd = (zclDiscoverAttrsRspCmd_t *)pInMsg->attrCmd;
    754            for ( i = 0; i < discoverRspCmd->numAttr; i++ )
    755            {
    756              // Device is notified of the result of its attribute discovery command.
    757            }
    758          
    759            return TRUE;
    760          }
    761          
    762          /*********************************************************************
    763           * @fn      zclSampleSw_ProcessInDiscAttrsExtRspCmd
    764           *
    765           * @brief   Process the "Profile" Discover Attributes Extended Response Command
    766           *
    767           * @param   pInMsg - incoming message to process
    768           *
    769           * @return  none
    770           */
    771          static uint8 zclSampleSw_ProcessInDiscAttrsExtRspCmd( zclIncomingMsg_t *pInMsg )
    772          {
    773            zclDiscoverAttrsExtRsp_t *discoverRspCmd;
    774            uint8 i;
    775          
    776            discoverRspCmd = (zclDiscoverAttrsExtRsp_t *)pInMsg->attrCmd;
    777            for ( i = 0; i < discoverRspCmd->numAttr; i++ )
    778            {
    779              // Device is notified of the result of its attribute discovery command.
    780            }
    781          
    782            return TRUE;
    783          }
    784          #endif // ZCL_DISCOVER
    785          
    786          
    787          
    788          #ifdef ZCL_REPORT
    789          /**
    790           * @fn      zclSampleSw_ProcessInReportCmd
    791           *
    792           * @brief   Process the "Profile" Report Command
    793           *
    794           * @param   pInMsg - incoming message to process
    795           *
    796           * @return  none
    797           */
    798          static uint8 zclSampleSw_ProcessInReportCmd( zclIncomingMsg_t *pInMsg )
    799          {
    800            zclReportCmd_t *reportCmd;
    801            uint8 i;
    802            uint8 resstr[10];     //显示接收数据
    803            HalLcdWriteString("GetEndDeviceNum", 3); //没数据的时候进行显示
    804            
    805            reportCmd = (zclReportCmd_t *)pInMsg->attrCmd;//接收
    806            for ( i = 0; i < reportCmd->numAttr; i++ )    //看下有几个数据 默认是一个数据
    807            {                                                     
    808              if( pInMsg->clusterId == ZCL_CLUSTER_ID_GEN_ON_OFF_SWITCH_CONFIG && 
    809                  reportCmd->attrList[i].attrID == ATTRID_ON_OFF_SWITCH_TYPE)     //接收类型
    810              {
    811                HalUARTWrite(0, "FSM:", 4);       //提示接收到数据
    812                uint8 attrDat = *(reportCmd->attrList[i].attrData);       //得到数据
    813                memset(resstr,0,10);      //清空数组
    814                sprintf((char *)resstr,(const char*)"%x\r\n",attrDat);    //转为hex格式
    815                HalUARTWrite(HAL_UART_PORT_0 ,  "RX seqNum:" , 10);
    816                HalUARTWrite(HAL_UART_PORT_0 ,resstr , osal_strlen((char *)resstr));
    817          
    818                if(attrDat == 0x30)       //判断数据 30开灯 
    819                {
    820                  HalUARTWrite(HAL_UART_PORT_0 , "LED On",osal_strlen("LED On"));
    821                  HalLcdWriteString( "Led On", HAL_LCD_LINE_3 ); //LCD显示 
    822                  HalLedSet(HAL_LED_1,HAL_LED_MODE_OFF); //低电平开灯
    823                } 
    824                if(attrDat == 0x31)       //31关闭灯
    825                {
    826                  HalUARTWrite(HAL_UART_PORT_0 , "LED Off",osal_strlen("LED Off"));
    827                  HalLcdWriteString( "Led Off", HAL_LCD_LINE_3 ); //LCD显示
    828                  HalLedSet(HAL_LED_1,HAL_LED_MODE_ON);   //高电平关闭灯
    829                }
    830          
    831                HalUARTWrite(0, "\r\n", 2);         // 回车换行
    832              }
    833            }
    834          
    835            return ( TRUE );
    836          }
    837          #endif // ZCL_REPORT
    838          
    839          
    840          
    841          
    842          #if defined (OTA_CLIENT) && (OTA_CLIENT == TRUE)
    843          /*********************************************************************
    844           * @fn      zclSampleSw_ProcessOTAMsgs
    845           *
    846           * @brief   Called to process callbacks from the ZCL OTA.
    847           *
    848           * @param   none
    849           *
    850           * @return  none
    851           */
    852          static void zclSampleSw_ProcessOTAMsgs( zclOTA_CallbackMsg_t* pMsg )
    853          {
    854            uint8 RxOnIdle;
    855          
    856            switch(pMsg->ota_event)
    857            {
    858            case ZCL_OTA_START_CALLBACK:
    859              if (pMsg->hdr.status == ZSuccess)
    860              {
    861                // Speed up the poll rate
    862                RxOnIdle = TRUE;
    863                ZMacSetReq( ZMacRxOnIdle, &RxOnIdle );
    864                NLME_SetPollRate( 2000 );
    865              }
    866              break;
    867          
    868            case ZCL_OTA_DL_COMPLETE_CALLBACK:
    869              if (pMsg->hdr.status == ZSuccess)
    870              {
    871                // Reset the CRC Shadow and reboot.  The bootloader will see the
    872                // CRC shadow has been cleared and switch to the new image
    873                HalOTAInvRC();
    874                SystemReset();
    875              }
    876              else
    877              {
    878                // slow the poll rate back down.
    879                RxOnIdle = FALSE;
    880                ZMacSetReq( ZMacRxOnIdle, &RxOnIdle );
    881                NLME_SetPollRate(DEVICE_POLL_RATE);
    882              }
    883              break;
    884          
    885            default:
    886              break;
    887            }
    888          }
    889          #endif // defined (OTA_CLIENT) && (OTA_CLIENT == TRUE)
    890          
    891          /****************************************************************************
    892          ****************************************************************************/
    893          
    894          /**
    895           * @fn      zclSampleSw_InitUart
    896           *
    897           * @brief   init. and open Uart
    898           */
    899          static void zclSampleSw_InitUart(void)
    900          {
    901            halUARTCfg_t uartConfig;
    902          
    903            /* UART Configuration */
    904            uartConfig.configured           = TRUE;
    905            uartConfig.baudRate             = HAL_UART_BR_115200;
    906            uartConfig.flowControl          = FALSE;
    907            uartConfig.flowControlThreshold = 0;
    908            uartConfig.rx.maxBufSize        = ZCLSAMPLESW_UART_BUF_LEN;
    909            uartConfig.tx.maxBufSize        = 0;
    910            uartConfig.idleTimeout          = 6;
    911            uartConfig.intEnable            = TRUE;
    912            uartConfig.callBackFunc         = zclSampleSw_UartCB;
    913          
    914            /* Start UART */
    915            HalUARTOpen(HAL_UART_PORT_0, &uartConfig);
    916          }
    917          
    918          /**
    919           * @fn      zclSampleSw_UartCB
    920           *CSTX
    921           * @brief   Uart Callback
    922          uint16 temp_VOC;
    923          uint16 temp_O3;
    924          uint16 temp_CHO2;
    925          uint16 temp_CO;
    926          uint16 temp_HUMIDITY;
    927          uint16 temp_TEMPERATURE;
    928          uint16 temp_PM25;
    929          uint16 temp_CO2;
    930          uint16 temp_O2;
    931          
    932           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    933          static void zclSampleSw_UartCB(uint8 port, uint8 event)
   \                     zclSampleSw_UartCB:
    934          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000   74F6         MOV       A,#-0xa
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 10
   \   000005                ; Auto size: 0
    935            uint8 rxLen = Hal_UART_RxBufLen(HAL_UART_PORT_0);
   \   000005                ; Setup parameters for call to function Hal_UART_RxBufLen
   \   000005   7900         MOV       R1,#0x0
   \   000007   12....       LCALL     `??Hal_UART_RxBufLen::?relay`; Banked call to: Hal_UART_RxBufLen
   \   00000A   EA           MOV       A,R2
   \   00000B   FE           MOV       R6,A
    936          
    937            if(rxLen != 0)
   \   00000C   7003         JNZ       $+5
   \   00000E   02....       LJMP      ??zclSampleSw_UartCB_0 & 0xFFFF
    938            {
    939              HalUARTRead(HAL_UART_PORT_0  ,  zclSampleSw_UartBuf , rxLen);
   \   000011                ; Setup parameters for call to function HalUARTRead
   \   000011   FC           MOV       R4,A
   \   000012   7D00         MOV       R5,#0x0
   \   000014   7A..         MOV       R2,#zclSampleSw_UartBuf & 0xff
   \   000016   7B..         MOV       R3,#(zclSampleSw_UartBuf >> 8) & 0xff
   \   000018   7900         MOV       R1,#0x0
   \   00001A   12....       LCALL     `??HalUARTRead::?relay`; Banked call to: HalUARTRead
    940              //HalUARTWrite(HAL_UART_PORT_0 ,  zclSampleSw_UartBuf , rxLen);
    941              zclSampleSw_UartBuf[rxLen+1]=0x0A;
   \   00001D   74..         MOV       A,#(zclSampleSw_UartBuf + 1) & 0xff
   \   00001F   2E           ADD       A,R6
   \   000020   F582         MOV       DPL,A
   \   000022   E4           CLR       A
   \   000023   34..         ADDC      A,#((zclSampleSw_UartBuf + 1) >> 8) & 0xff
   \   000025   F583         MOV       DPH,A
   \   000027   740A         MOV       A,#0xa
   \   000029   F0           MOVX      @DPTR,A
    942              
    943              printf("UART Start\n");//打印到debug mode上
   \   00002A                ; Setup parameters for call to function printf
   \   00002A   7A..         MOV       R2,#`?<Constant "UART Start\\n">` & 0xff
   \   00002C   7B..         MOV       R3,#(`?<Constant "UART Start\\n">` >> 8) & 0xff
   \   00002E   12....       LCALL     `??printf::?relay`; Banked call to: printf
    944              for(int char_count=0;char_count<rxLen;char_count++){
   \   000031   75..00       MOV       ?V0,#0x0
   \   000034   75..00       MOV       ?V1,#0x0
    945                if(zclSampleSw_UartBuf[char_count]==0xFF&&zclSampleSw_UartBuf[char_count+1]==0x55){
   \                     ??zclSampleSw_UartCB_1:
   \   000037   74..         MOV       A,#zclSampleSw_UartBuf & 0xff
   \   000039   25..         ADD       A,?V0
   \   00003B   F8           MOV       R0,A
   \   00003C   74..         MOV       A,#(zclSampleSw_UartBuf >> 8) & 0xff
   \   00003E   35..         ADDC      A,?V1
   \   000040   F9           MOV       R1,A
   \   000041   8882         MOV       DPL,R0
   \   000043   F583         MOV       DPH,A
   \   000045   E0           MOVX      A,@DPTR
   \   000046   F4           CPL       A
   \   000047   6003         JZ        $+5
   \   000049   02....       LJMP      ??zclSampleSw_UartCB_2 & 0xFFFF
   \   00004C   A3           INC       DPTR
   \   00004D   E0           MOVX      A,@DPTR
   \   00004E   6455         XRL       A,#0x55
   \   000050   6003         JZ        $+5
   \   000052   02....       LJMP      ??zclSampleSw_UartCB_2 & 0xFFFF
    946                  //printf("find date head\n"); //debug使用
    947                  switch(zclSampleSw_UartBuf[char_count+3]){
   \   000055   8882         MOV       DPL,R0
   \   000057   8983         MOV       DPH,R1
   \   000059   A3           INC       DPTR
   \   00005A   A3           INC       DPTR
   \   00005B   A3           INC       DPTR
   \   00005C   E0           MOVX      A,@DPTR
   \   00005D   7003         JNZ       $+5
   \   00005F   02....       LJMP      ??zclSampleSw_UartCB_3 & 0xFFFF
   \   000062   14           DEC       A
   \   000063   601B         JZ        ??zclSampleSw_UartCB_4
   \   000065   14           DEC       A
   \   000066   6028         JZ        ??zclSampleSw_UartCB_5
   \   000068   14           DEC       A
   \   000069   6034         JZ        ??zclSampleSw_UartCB_6
   \   00006B   14           DEC       A
   \   00006C   6040         JZ        ??zclSampleSw_UartCB_7
   \   00006E   14           DEC       A
   \   00006F   604C         JZ        ??zclSampleSw_UartCB_8
   \   000071   14           DEC       A
   \   000072   6058         JZ        ??zclSampleSw_UartCB_9
   \   000074   14           DEC       A
   \   000075   6064         JZ        ??zclSampleSw_UartCB_10
   \   000077   14           DEC       A
   \   000078   6070         JZ        ??zclSampleSw_UartCB_11
   \   00007A   14           DEC       A
   \   00007B   607C         JZ        ??zclSampleSw_UartCB_12
   \   00007D   02....       LJMP      ??zclSampleSw_UartCB_13 & 0xFFFF
    948                  case CMDID_VOC://0x01 直接合闶褂
    949                    temp_VOC=(zclSampleSw_UartBuf[char_count+DATA_H]<<8)+zclSampleSw_UartBuf[char_count+DATA_L];
   \                     ??zclSampleSw_UartCB_4:
   \   000080   12....       LCALL     ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_22:
   \   000083   90....       MOV       DPTR,#temp_VOC
   \   000086   12....       LCALL     ?Subroutine4 & 0xFFFF
    950                    printf("0x01\n");
   \                     ??CrossCallReturnLabel_10:
   \   000089                ; Setup parameters for call to function printf
   \   000089   7A..         MOV       R2,#`?<Constant "0x01\\n">` & 0xff
   \   00008B   7B..         MOV       R3,#(`?<Constant "0x01\\n">` >> 8) & 0xff
   \   00008D   02....       LJMP      ??zclSampleSw_UartCB_14 & 0xFFFF
    951                    break;
    952                  case CMDID_O3:
    953                    temp_O3=(zclSampleSw_UartBuf[char_count+DATA_H]<<8)+zclSampleSw_UartBuf[char_count+DATA_L];
   \                     ??zclSampleSw_UartCB_5:
   \   000090   12....       LCALL     ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_23:
   \   000093   90....       MOV       DPTR,#temp_O3
   \   000096   12....       LCALL     ?Subroutine4 & 0xFFFF
    954                    printf("0x02\n");
   \                     ??CrossCallReturnLabel_11:
   \   000099                ; Setup parameters for call to function printf
   \   000099   7A..         MOV       R2,#`?<Constant "0x02\\n">` & 0xff
   \   00009B   7B..         MOV       R3,#(`?<Constant "0x02\\n">` >> 8) & 0xff
   \   00009D   8073         SJMP      ??zclSampleSw_UartCB_14
    955                    break;
    956                  case CMDID_CHO2:
    957                    temp_CHO2=(zclSampleSw_UartBuf[char_count+DATA_H]<<8)+zclSampleSw_UartBuf[char_count+DATA_L];
   \                     ??zclSampleSw_UartCB_6:
   \   00009F   12....       LCALL     ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_24:
   \   0000A2   90....       MOV       DPTR,#temp_CHO2
   \   0000A5   12....       LCALL     ?Subroutine4 & 0xFFFF
    958                    printf("0x03\n");
   \                     ??CrossCallReturnLabel_12:
   \   0000A8                ; Setup parameters for call to function printf
   \   0000A8   7A..         MOV       R2,#`?<Constant "0x03\\n">` & 0xff
   \   0000AA   7B..         MOV       R3,#(`?<Constant "0x03\\n">` >> 8) & 0xff
   \   0000AC   8064         SJMP      ??zclSampleSw_UartCB_14
    959                    break;
    960                  case CMDID_CO:
    961                    temp_CO=(zclSampleSw_UartBuf[char_count+DATA_H]<<8)+zclSampleSw_UartBuf[char_count+DATA_L];
   \                     ??zclSampleSw_UartCB_7:
   \   0000AE   12....       LCALL     ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   0000B1   90....       MOV       DPTR,#temp_CO
   \   0000B4   12....       LCALL     ?Subroutine4 & 0xFFFF
    962                    printf("0x04\n");
   \                     ??CrossCallReturnLabel_13:
   \   0000B7                ; Setup parameters for call to function printf
   \   0000B7   7A..         MOV       R2,#`?<Constant "0x04\\n">` & 0xff
   \   0000B9   7B..         MOV       R3,#(`?<Constant "0x04\\n">` >> 8) & 0xff
   \   0000BB   8055         SJMP      ??zclSampleSw_UartCB_14
    963                    break;
    964                  case CMDID_CO2:
    965                    temp_CO2=(zclSampleSw_UartBuf[char_count+DATA_H]<<8)+zclSampleSw_UartBuf[char_count+DATA_L];
   \                     ??zclSampleSw_UartCB_8:
   \   0000BD   12....       LCALL     ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   0000C0   90....       MOV       DPTR,#temp_CO2
   \   0000C3   12....       LCALL     ?Subroutine4 & 0xFFFF
    966                    printf("0x05\n");
   \                     ??CrossCallReturnLabel_14:
   \   0000C6                ; Setup parameters for call to function printf
   \   0000C6   7A..         MOV       R2,#`?<Constant "0x05\\n">` & 0xff
   \   0000C8   7B..         MOV       R3,#(`?<Constant "0x05\\n">` >> 8) & 0xff
   \   0000CA   8046         SJMP      ??zclSampleSw_UartCB_14
    967                    break;
    968                  case CMDID_PM25:
    969                    temp_PM25=(zclSampleSw_UartBuf[char_count+DATA_H]<<8)+zclSampleSw_UartBuf[char_count+DATA_L];
   \                     ??zclSampleSw_UartCB_9:
   \   0000CC   12....       LCALL     ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_27:
   \   0000CF   90....       MOV       DPTR,#temp_PM25
   \   0000D2   12....       LCALL     ?Subroutine4 & 0xFFFF
    970                    printf("0x06\n");
   \                     ??CrossCallReturnLabel_15:
   \   0000D5                ; Setup parameters for call to function printf
   \   0000D5   7A..         MOV       R2,#`?<Constant "0x06\\n">` & 0xff
   \   0000D7   7B..         MOV       R3,#(`?<Constant "0x06\\n">` >> 8) & 0xff
   \   0000D9   8037         SJMP      ??zclSampleSw_UartCB_14
    971                    break;
    972                  case CMDID_TEMPERATURE:
    973                    temp_TEMPERATURE=(zclSampleSw_UartBuf[char_count+DATA_H]<<8)+zclSampleSw_UartBuf[char_count+DATA_L];
   \                     ??zclSampleSw_UartCB_10:
   \   0000DB   12....       LCALL     ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   0000DE   90....       MOV       DPTR,#temp_TEMPERATURE
   \   0000E1   12....       LCALL     ?Subroutine4 & 0xFFFF
    974                    printf("0x07\n");
   \                     ??CrossCallReturnLabel_16:
   \   0000E4                ; Setup parameters for call to function printf
   \   0000E4   7A..         MOV       R2,#`?<Constant "0x07\\n">` & 0xff
   \   0000E6   7B..         MOV       R3,#(`?<Constant "0x07\\n">` >> 8) & 0xff
   \   0000E8   8028         SJMP      ??zclSampleSw_UartCB_14
    975                    break;
    976                  case CMDID_HUMIDITY:
    977                    temp_HUMIDITY=(zclSampleSw_UartBuf[char_count+DATA_H]<<8)+zclSampleSw_UartBuf[char_count+DATA_L];
   \                     ??zclSampleSw_UartCB_11:
   \   0000EA   12....       LCALL     ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   0000ED   90....       MOV       DPTR,#temp_HUMIDITY
   \   0000F0   12....       LCALL     ?Subroutine4 & 0xFFFF
    978                    printf("0x08\n");
   \                     ??CrossCallReturnLabel_17:
   \   0000F3                ; Setup parameters for call to function printf
   \   0000F3   7A..         MOV       R2,#`?<Constant "0x08\\n">` & 0xff
   \   0000F5   7B..         MOV       R3,#(`?<Constant "0x08\\n">` >> 8) & 0xff
   \   0000F7   8019         SJMP      ??zclSampleSw_UartCB_14
    979                    break;
    980                  case CMDID_O2:
    981                    temp_O2=(zclSampleSw_UartBuf[char_count+DATA_H]<<8)+zclSampleSw_UartBuf[char_count+DATA_L];
   \                     ??zclSampleSw_UartCB_12:
   \   0000F9   12....       LCALL     ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_30:
   \   0000FC   90....       MOV       DPTR,#temp_O2
   \   0000FF   12....       LCALL     ?Subroutine4 & 0xFFFF
    982                    printf("0x09\n");
   \                     ??CrossCallReturnLabel_18:
   \   000102                ; Setup parameters for call to function printf
   \   000102   7A..         MOV       R2,#`?<Constant "0x09\\n">` & 0xff
   \   000104   7B..         MOV       R3,#(`?<Constant "0x09\\n">` >> 8) & 0xff
   \   000106   800A         SJMP      ??zclSampleSw_UartCB_14
    983                    break;
    984                  case CMDID_POWER:
    985                    //temp_VOC=(zclSampleSw_UartBuf[char_count+DATA_H]<<8)+zclSampleSw_UartBuf[char_count+DATA_L];
    986                    printf("0x00\n");
   \                     ??zclSampleSw_UartCB_3:
   \   000108                ; Setup parameters for call to function printf
   \   000108   7A..         MOV       R2,#`?<Constant "0x00\\n">` & 0xff
   \   00010A   7B..         MOV       R3,#(`?<Constant "0x00\\n">` >> 8) & 0xff
   \   00010C   8004         SJMP      ??zclSampleSw_UartCB_14
    987                    break;
    988                  default:
    989                    printf("CmdID Error\n");
   \                     ??zclSampleSw_UartCB_13:
   \   00010E                ; Setup parameters for call to function printf
   \   00010E   7A..         MOV       R2,#`?<Constant "CmdID Error\\n">` & 0xff
   \   000110   7B..         MOV       R3,#(`?<Constant "CmdID Error\\n">` >> 8) & 0xff
   \                     ??zclSampleSw_UartCB_14:
   \   000112   12....       LCALL     `??printf::?relay`; Banked call to: printf
    990                    break;
    991                      
    992                  }
    993                }
    994              }
   \                     ??zclSampleSw_UartCB_2:
   \   000115   05..         INC       ?V0
   \   000117   E5..         MOV       A,?V0
   \   000119   7002         JNZ       ??zclSampleSw_UartCB_15
   \   00011B   05..         INC       ?V1
   \                     ??zclSampleSw_UartCB_15:
   \   00011D   C3           CLR       C
   \   00011E   9E           SUBB      A,R6
   \   00011F   E5..         MOV       A,?V1
   \   000121   9400         SUBB      A,#0x0
   \   000123   A2D2         MOV       C,0xD0 /* PSW */.2
   \   000125   65D0         XRL       A,PSW
   \   000127   33           RLC       A
   \   000128   5003         JNC       $+5
   \   00012A   02....       LJMP      ??zclSampleSw_UartCB_1 & 0xFFFF
    995          
    996            }
    997            
    998          }
   \                     ??zclSampleSw_UartCB_0:
   \   00012D   7F02         MOV       R7,#0x2
   \   00012F   02....       LJMP      ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   8882         MOV       DPL,R0
   \   000002   8983         MOV       DPH,R1
   \   000004   A3           INC       DPTR
   \   000005   A3           INC       DPTR
   \   000006   A3           INC       DPTR
   \   000007   A3           INC       DPTR
   \   000008   A3           INC       DPTR
   \   000009   E0           MOVX      A,@DPTR
   \   00000A   FB           MOV       R3,A
   \   00000B   8882         MOV       DPL,R0
   \   00000D   8983         MOV       DPH,R1
   \   00000F   A3           INC       DPTR
   \   000010   A3           INC       DPTR
   \   000011   A3           INC       DPTR
   \   000012   A3           INC       DPTR
   \   000013   A3           INC       DPTR
   \   000014   A3           INC       DPTR
   \   000015   E0           MOVX      A,@DPTR
   \   000016   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   F0           MOVX      @DPTR,A
   \   000001   A3           INC       DPTR
   \   000002   EB           MOV       A,R3
   \   000003   F0           MOVX      @DPTR,A
   \   000004   22           RET
    999          
   1000          
   1001          //下面这个函数是终端发送数据到协调器函数
   1002          #ifdef ZDO_COORDINATOR  // CSTX Coordinator!
   1003          #else

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   1004            static void zclSampleSw_ReportTest(void)
   \                     zclSampleSw_ReportTest:
   1005            {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000   74F2         MOV       A,#-0xe
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 12
   \   000005   74F4         MOV       A,#-0xc
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
   1006                static uint8 seqNum = 0;  
   1007                uint8 state;      //定义状态 0X31 或者 0X30
   1008                static unsigned char flag = 0;    //状态用于切换
   1009                zclReportCmd_t *reportCmd;
   1010                
   1011                afAddrType_t destAddr;    // 指定目标网络地址进行单播点播传输 16位
   1012                destAddr.addrMode = afAddr16Bit;
   \   00000A   7408         MOV       A,#0x8
   \   00000C   12....       LCALL     ?XSTACK_DISP0_8
   \   00000F   7402         MOV       A,#0x2
   \   000011   F0           MOVX      @DPTR,A
   1013                destAddr.endPoint = SAMPLESW_ENDPOINT;
   \   000012   7409         MOV       A,#0x9
   \   000014   12....       LCALL     ?XSTACK_DISP0_8
   \   000017   7408         MOV       A,#0x8
   \   000019   F0           MOVX      @DPTR,A
   1014                destAddr.addr.shortAddr = 0x0000;
   \   00001A   85..82       MOV       DPL,?XSP + 0
   \   00001D   85..83       MOV       DPH,?XSP + 1
   \   000020   E4           CLR       A
   \   000021   F0           MOVX      @DPTR,A
   \   000022   A3           INC       DPTR
   \   000023   F0           MOVX      @DPTR,A
   1015                
   1016                if(flag == 0x01) //来回切换发送数据
   \   000024   90....       MOV       DPTR,#??flag
   \   000027   E0           MOVX      A,@DPTR
   \   000028   601D         JZ        ??zclSampleSw_ReportTest_0
   1017                {
   1018                    flag=0;
   \   00002A   E4           CLR       A
   \   00002B   F0           MOVX      @DPTR,A
   1019                    state = 0x30;       //LED点亮
   \   00002C   75..30       MOV       ?V0,#0x30
   1020                    HalUARTWrite(0,"Set Led On\r\n", osal_strlen("Set Led On\r\n"));     //串口显示
   \   00002F                ; Setup parameters for call to function osal_strlen
   \   00002F   7A..         MOV       R2,#`?<Constant "Set Led On\\r\\n">` & 0xff
   \   000031   7B..         MOV       R3,#(`?<Constant "Set Led On\\r\\n">` >> 8) & 0xff
   \   000033   12....       LCALL     ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   000036                ; Setup parameters for call to function HalUARTWrite
   \   000036   7A..         MOV       R2,#`?<Constant "Set Led On\\r\\n">` & 0xff
   \   000038   7B..         MOV       R3,#(`?<Constant "Set Led On\\r\\n">` >> 8) & 0xff
   \   00003A   7900         MOV       R1,#0x0
   \   00003C   12....       LCALL     `??HalUARTWrite::?relay`; Banked call to: HalUARTWrite
   1021                    HalLcdWriteString( "Set Led On", HAL_LCD_LINE_3 ); //LCD显示 
   \   00003F                ; Setup parameters for call to function HalLcdWriteString
   \   00003F   7903         MOV       R1,#0x3
   \   000041   7A..         MOV       R2,#`?<Constant "Set Led On">` & 0xff
   \   000043   7B..         MOV       R3,#(`?<Constant "Set Led On">` >> 8) & 0xff
   \   000045   801C         SJMP      ??zclSampleSw_ReportTest_1
   1022                }
   1023                else if(flag == 0x00)
   1024                {
   1025                    flag=1;
   \                     ??zclSampleSw_ReportTest_0:
   \   000047   7401         MOV       A,#0x1
   \   000049   F0           MOVX      @DPTR,A
   1026                    state = 0x31;       //LED熄灭
   \   00004A   75..31       MOV       ?V0,#0x31
   1027                    HalUARTWrite(0,"Set Led Off\r\n", osal_strlen("Set Led Off\r\n"));   //串口显示
   \   00004D                ; Setup parameters for call to function osal_strlen
   \   00004D   7A..         MOV       R2,#`?<Constant "Set Led Off\\r\\n">` & 0xff
   \   00004F   7B..         MOV       R3,#(`?<Constant "Set Led Off\\r\\n">` >> 8) & 0xff
   \   000051   12....       LCALL     ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   000054                ; Setup parameters for call to function HalUARTWrite
   \   000054   7A..         MOV       R2,#`?<Constant "Set Led Off\\r\\n">` & 0xff
   \   000056   7B..         MOV       R3,#(`?<Constant "Set Led Off\\r\\n">` >> 8) & 0xff
   \   000058   7900         MOV       R1,#0x0
   \   00005A   12....       LCALL     `??HalUARTWrite::?relay`; Banked call to: HalUARTWrite
   1028                    HalLcdWriteString( "Set Led Off", HAL_LCD_LINE_3 ); //LCD显示 
   \   00005D                ; Setup parameters for call to function HalLcdWriteString
   \   00005D   7903         MOV       R1,#0x3
   \   00005F   7A..         MOV       R2,#`?<Constant "Set Led Off">` & 0xff
   \   000061   7B..         MOV       R3,#(`?<Constant "Set Led Off">` >> 8) & 0xff
   \                     ??zclSampleSw_ReportTest_1:
   \   000063   12....       LCALL     `??HalLcdWriteString::?relay`; Banked call to: HalLcdWriteString
   1029                }
   1030                  
   1031                reportCmd = (zclReportCmd_t *)osal_mem_alloc(sizeof(zclReportCmd_t) + 
   1032                                                             sizeof(zclReport_t));        //分配结构体
   \   000066                ; Setup parameters for call to function osal_mem_alloc
   \   000066   7A06         MOV       R2,#0x6
   \   000068   7B00         MOV       R3,#0x0
   \   00006A   12....       LCALL     `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
   \   00006D   8A..         MOV       ?V2,R2
   \   00006F   8B..         MOV       ?V3,R3
   1033                if(reportCmd == NULL)
   \   000071   EA           MOV       A,R2
   \   000072   4B           ORL       A,R3
   \   000073   7003         JNZ       $+5
   \   000075   02....       LJMP      ??zclSampleSw_ReportTest_2 & 0xFFFF
   1034                  return;
   1035                
   1036                reportCmd->attrList[0].attrData = (uint8 *)osal_mem_alloc(sizeof(uint8)); //分配数据空间
   \   000078                ; Setup parameters for call to function osal_mem_alloc
   \   000078   7A01         MOV       R2,#0x1
   \   00007A   7B00         MOV       R3,#0x0
   \   00007C   12....       LCALL     `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
   \   00007F   E5..         MOV       A,?V2
   \   000081   2404         ADD       A,#0x4
   \   000083   F8           MOV       R0,A
   \   000084   E4           CLR       A
   \   000085   35..         ADDC      A,?V3
   \   000087   F9           MOV       R1,A
   \   000088   E8           MOV       A,R0
   \   000089   FE           MOV       R6,A
   \   00008A   E9           MOV       A,R1
   \   00008B   FF           MOV       R7,A
   \   00008C   8882         MOV       DPL,R0
   \   00008E   F583         MOV       DPH,A
   \   000090   EA           MOV       A,R2
   \   000091   12....       LCALL     ?Subroutine4 & 0xFFFF
   1037                if(reportCmd->attrList[0].attrData == NULL)       
   \                     ??CrossCallReturnLabel_19:
   \   000094   EA           MOV       A,R2
   \   000095   4B           ORL       A,R3
   \   000096   7003         JNZ       $+5
   \   000098   02....       LJMP      ??zclSampleSw_ReportTest_2 & 0xFFFF
   1038                  return;
   1039                
   1040                if(seqNum>127)
   \   00009B   90....       MOV       DPTR,#??seqNum
   \   00009E   E0           MOVX      A,@DPTR
   \   00009F   C3           CLR       C
   \   0000A0   9480         SUBB      A,#-0x80
   \   0000A2   4002         JC        ??zclSampleSw_ReportTest_3
   1041                  seqNum = 0;
   \   0000A4   E4           CLR       A
   \   0000A5   F0           MOVX      @DPTR,A
   1042                
   1043                reportCmd->numAttr = 10;   //10个数据
   \                     ??zclSampleSw_ReportTest_3:
   \   0000A6   85..82       MOV       DPL,?V2
   \   0000A9   85..83       MOV       DPH,?V3
   \   0000AC   740A         MOV       A,#0xa
   \   0000AE   F0           MOVX      @DPTR,A
   1044                
   1045                reportCmd->attrList[0].attrID = ATTRID_ON_OFF_SWITCH_TYPE;        //数据 id
   \   0000AF   A3           INC       DPTR
   \   0000B0   E4           CLR       A
   \   0000B1   F0           MOVX      @DPTR,A
   \   0000B2   A3           INC       DPTR
   \   0000B3   12....       LCALL     ?Subroutine5 & 0xFFFF
   1046                reportCmd->attrList[0].dataType = ZCL_DATATYPE_UINT8;     //数据类型是UINT8
   \                     ??CrossCallReturnLabel_20:
   \   0000B6   7420         MOV       A,#0x20
   \   0000B8   F0           MOVX      @DPTR,A
   1047                *((uint8 *)(reportCmd->attrList[0].attrData)) = state;    //数据
   \   0000B9   8882         MOV       DPL,R0
   \   0000BB   8983         MOV       DPH,R1
   \   0000BD   12....       LCALL     ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_31:
   \   0000C0   12....       LCALL     ?Subroutine5 & 0xFFFF
   1048          
   1049                reportCmd->attrList[1].attrID = ATTRID_ON_OFF_SWITCH_TYPE;        //数据 id
   \                     ??CrossCallReturnLabel_21:
   \   0000C3   A3           INC       DPTR
   \   0000C4   A3           INC       DPTR
   \   0000C5   A3           INC       DPTR
   \   0000C6   E4           CLR       A
   \   0000C7   F0           MOVX      @DPTR,A
   \   0000C8   A3           INC       DPTR
   \   0000C9   12....       LCALL     ?Subroutine3 & 0xFFFF
   1050                reportCmd->attrList[1].dataType = ZCL_DATATYPE_UINT8;     //数据类型是UINT8
   \                     ??CrossCallReturnLabel_8:
   \   0000CC   7420         MOV       A,#0x20
   \   0000CE   12....       LCALL     ?Subroutine3 & 0xFFFF
   1051                *((uint8 *)(reportCmd->attrList[1].attrData)) = state;    //数据
   \                     ??CrossCallReturnLabel_9:
   \   0000D1   A3           INC       DPTR
   \   0000D2   12....       LCALL     ??Subroutine19_0 & 0xFFFF
   1052                
   1053                reportCmd->attrList[2].attrID = ATTRID_ON_OFF_SWITCH_TYPE;        //数据 id
   \                     ??CrossCallReturnLabel_59:
   \   0000D5   240B         ADD       A,#0xb
   \   0000D7   12....       LCALL     ?Subroutine2 & 0xFFFF
   1054                reportCmd->attrList[2].dataType = ZCL_DATATYPE_UINT8;     //数据类型是UINT8
   \                     ??CrossCallReturnLabel_0:
   \   0000DA   240D         ADD       A,#0xd
   \   0000DC   12....       LCALL     ?Subroutine11 & 0xFFFF
   1055                *((uint8 *)(reportCmd->attrList[2].attrData)) = state;    //数据
   \                     ??CrossCallReturnLabel_33:
   \   0000DF   240E         ADD       A,#0xe
   \   0000E1   12....       LCALL     ?Subroutine7 & 0xFFFF
   1056                      
   1057                reportCmd->attrList[3].attrID = ATTRID_ON_OFF_SWITCH_TYPE;        //数据 id
   \                     ??CrossCallReturnLabel_52:
   \   0000E4   2410         ADD       A,#0x10
   \   0000E6   12....       LCALL     ?Subroutine2 & 0xFFFF
   1058                reportCmd->attrList[3].dataType = ZCL_DATATYPE_UINT8;     //数据类型是UINT8
   \                     ??CrossCallReturnLabel_1:
   \   0000E9   2412         ADD       A,#0x12
   \   0000EB   12....       LCALL     ?Subroutine11 & 0xFFFF
   1059                *((uint8 *)(reportCmd->attrList[3].attrData)) = state;    //数据
   \                     ??CrossCallReturnLabel_34:
   \   0000EE   2413         ADD       A,#0x13
   \   0000F0   12....       LCALL     ?Subroutine7 & 0xFFFF
   1060                      
   1061                reportCmd->attrList[4].attrID = ATTRID_ON_OFF_SWITCH_TYPE;        //数据 id
   \                     ??CrossCallReturnLabel_53:
   \   0000F3   2415         ADD       A,#0x15
   \   0000F5   12....       LCALL     ?Subroutine2 & 0xFFFF
   1062                reportCmd->attrList[4].dataType = ZCL_DATATYPE_UINT8;     //数据类型是UINT8
   \                     ??CrossCallReturnLabel_2:
   \   0000F8   2417         ADD       A,#0x17
   \   0000FA   12....       LCALL     ?Subroutine11 & 0xFFFF
   1063                *((uint8 *)(reportCmd->attrList[4].attrData)) = state;    //数据
   \                     ??CrossCallReturnLabel_35:
   \   0000FD   2418         ADD       A,#0x18
   \   0000FF   12....       LCALL     ?Subroutine7 & 0xFFFF
   1064                      
   1065                reportCmd->attrList[5].attrID = ATTRID_ON_OFF_SWITCH_TYPE;        //数据 id
   \                     ??CrossCallReturnLabel_54:
   \   000102   241A         ADD       A,#0x1a
   \   000104   12....       LCALL     ?Subroutine2 & 0xFFFF
   1066                reportCmd->attrList[5].dataType = ZCL_DATATYPE_UINT8;     //数据类型是UINT8
   \                     ??CrossCallReturnLabel_3:
   \   000107   241C         ADD       A,#0x1c
   \   000109   12....       LCALL     ?Subroutine11 & 0xFFFF
   1067                *((uint8 *)(reportCmd->attrList[5].attrData)) = state;    //数据
   \                     ??CrossCallReturnLabel_36:
   \   00010C   241D         ADD       A,#0x1d
   \   00010E   12....       LCALL     ?Subroutine7 & 0xFFFF
   1068                      
   1069                reportCmd->attrList[6].attrID = ATTRID_ON_OFF_SWITCH_TYPE;        //数据 id
   \                     ??CrossCallReturnLabel_55:
   \   000111   241F         ADD       A,#0x1f
   \   000113   12....       LCALL     ?Subroutine2 & 0xFFFF
   1070                reportCmd->attrList[6].dataType = ZCL_DATATYPE_UINT8;     //数据类型是UINT8
   \                     ??CrossCallReturnLabel_4:
   \   000116   2421         ADD       A,#0x21
   \   000118   12....       LCALL     ?Subroutine11 & 0xFFFF
   1071                *((uint8 *)(reportCmd->attrList[6].attrData)) = state;    //数据
   \                     ??CrossCallReturnLabel_37:
   \   00011B   2422         ADD       A,#0x22
   \   00011D   12....       LCALL     ?Subroutine7 & 0xFFFF
   1072                      
   1073                reportCmd->attrList[7].attrID = ATTRID_ON_OFF_SWITCH_TYPE;        //数据 id
   \                     ??CrossCallReturnLabel_56:
   \   000120   2424         ADD       A,#0x24
   \   000122   12....       LCALL     ?Subroutine2 & 0xFFFF
   1074                reportCmd->attrList[7].dataType = ZCL_DATATYPE_UINT8;     //数据类型是UINT8
   \                     ??CrossCallReturnLabel_5:
   \   000125   2426         ADD       A,#0x26
   \   000127   12....       LCALL     ?Subroutine11 & 0xFFFF
   1075                *((uint8 *)(reportCmd->attrList[7].attrData)) = state;    //数据
   \                     ??CrossCallReturnLabel_38:
   \   00012A   2427         ADD       A,#0x27
   \   00012C   12....       LCALL     ?Subroutine7 & 0xFFFF
   1076                 
   1077                reportCmd->attrList[8].attrID = ATTRID_ON_OFF_SWITCH_TYPE;        //数据 id
   \                     ??CrossCallReturnLabel_57:
   \   00012F   2429         ADD       A,#0x29
   \   000131   12....       LCALL     ?Subroutine2 & 0xFFFF
   1078                reportCmd->attrList[8].dataType = ZCL_DATATYPE_UINT8;     //数据类型是UINT8
   \                     ??CrossCallReturnLabel_6:
   \   000134   242B         ADD       A,#0x2b
   \   000136   12....       LCALL     ?Subroutine11 & 0xFFFF
   1079                *((uint8 *)(reportCmd->attrList[8].attrData)) = state;    //数据
   \                     ??CrossCallReturnLabel_39:
   \   000139   242C         ADD       A,#0x2c
   \   00013B   12....       LCALL     ?Subroutine7 & 0xFFFF
   1080                      
   1081                reportCmd->attrList[9].attrID = ATTRID_ON_OFF_SWITCH_TYPE;        //数据 id
   \                     ??CrossCallReturnLabel_58:
   \   00013E   242E         ADD       A,#0x2e
   \   000140   12....       LCALL     ?Subroutine2 & 0xFFFF
   1082                reportCmd->attrList[9].dataType = ZCL_DATATYPE_UINT8;     //数据类型是UINT8
   \                     ??CrossCallReturnLabel_7:
   \   000143   2430         ADD       A,#0x30
   \   000145   12....       LCALL     ?Subroutine11 & 0xFFFF
   1083                *((uint8 *)(reportCmd->attrList[9].attrData)) = state;    //数据
   \                     ??CrossCallReturnLabel_40:
   \   000148   2431         ADD       A,#0x31
   \   00014A   F582         MOV       DPL,A
   \   00014C   E4           CLR       A
   \   00014D   35..         ADDC      A,?V3
   \   00014F   F583         MOV       DPH,A
   \   000151   12....       LCALL     ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   000154   F0           MOVX      @DPTR,A
   1084                
   1085                zcl_SendReportCmd( SAMPLESW_ENDPOINT,                     //发送数据
   1086                                   &destAddr,
   1087                                   ZCL_CLUSTER_ID_GEN_ON_OFF_SWITCH_CONFIG, 
   1088                                   reportCmd,
   1089                                   ZCL_FRAME_CLIENT_SERVER_DIR, 
   1090                                   TRUE, 
   1091                                   seqNum++ );
   \   000155   90....       MOV       DPTR,#??seqNum
   \   000158   E0           MOVX      A,@DPTR
   \   000159   F8           MOV       R0,A
   \   00015A   7401         MOV       A,#0x1
   \   00015C   28           ADD       A,R0
   \   00015D   F0           MOVX      @DPTR,A
   \   00015E                ; Setup parameters for call to function zcl_SendReportCmd
   \   00015E   E8           MOV       A,R0
   \   00015F   F5..         MOV       ?V0,A
   \   000161   78..         MOV       R0,#?V0
   \   000163   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   000166   75..01       MOV       ?V0,#0x1
   \   000169   78..         MOV       R0,#?V0
   \   00016B   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   00016E   75..00       MOV       ?V0,#0x0
   \   000171   78..         MOV       R0,#?V0
   \   000173   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   000176   78..         MOV       R0,#?V2
   \   000178   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00017B   7C07         MOV       R4,#0x7
   \   00017D   7D00         MOV       R5,#0x0
   \   00017F   7405         MOV       A,#0x5
   \   000181   12....       LCALL     ?XSTACK_DISP101_8
   \   000184   7908         MOV       R1,#0x8
   \   000186   12....       LCALL     `??zcl_SendReportCmd::?relay`; Banked call to: zcl_SendReportCmd
   \   000189   7405         MOV       A,#0x5
   \   00018B   12....       LCALL     ?DEALLOC_XSTACK8
   1092          
   1093                
   1094                osal_mem_free(reportCmd->attrList[0].attrData);   //释放结构体
   \   00018E                ; Setup parameters for call to function osal_mem_free
   \   00018E   8E82         MOV       DPL,R6
   \   000190   8F83         MOV       DPH,R7
   \   000192   E0           MOVX      A,@DPTR
   \   000193   FA           MOV       R2,A
   \   000194   A3           INC       DPTR
   \   000195   E0           MOVX      A,@DPTR
   \   000196   FB           MOV       R3,A
   \   000197   12....       LCALL     `??osal_mem_free::?relay`; Banked call to: osal_mem_free
   1095                osal_mem_free(reportCmd); //释放数据
   \   00019A                ; Setup parameters for call to function osal_mem_free
   \   00019A   AA..         MOV       R2,?V2
   \   00019C   AB..         MOV       R3,?V3
   \   00019E   12....       LCALL     `??osal_mem_free::?relay`; Banked call to: osal_mem_free
   1096            }
   \                     ??zclSampleSw_ReportTest_2:
   \   0001A1   740C         MOV       A,#0xc
   \   0001A3   12....       LCALL     ?DEALLOC_XSTACK8
   \   0001A6   02....       LJMP      ?Subroutine1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   12....       LCALL     `??osal_strlen::?relay`; Banked call to: osal_strlen
   \   000003   8A..         MOV       ?V2,R2
   \   000005   8B..         MOV       ?V3,R3
   \   000007   AC..         MOV       R4,?V2
   \   000009   AD..         MOV       R5,?V3
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   F582         MOV       DPL,A
   \   000002   E4           CLR       A
   \   000003   35..         ADDC      A,?V3
   \   000005   F583         MOV       DPH,A
   \   000007   7420         MOV       A,#0x20
   \   000009   F0           MOVX      @DPTR,A
   \   00000A   E5..         MOV       A,?V2
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   12....       LCALL     ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_60:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   12....       LCALL     ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_63:
   \   000003   E5..         MOV       A,?V0
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   F582         MOV       DPL,A
   \   000002   E4           CLR       A
   \   000003   35..         ADDC      A,?V3
   \   000005   F583         MOV       DPH,A
   \   000007                REQUIRE ??Subroutine19_0
   \   000007                ; // Fall through to label ??Subroutine19_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine19_0:
   \   000000   12....       LCALL     ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_61:
   \   000003   F0           MOVX      @DPTR,A
   \   000004   E5..         MOV       A,?V2
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   12....       LCALL     ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   F0           MOVX      @DPTR,A
   \   000001   85..82       MOV       DPL,?V2
   \   000004   85..83       MOV       DPH,?V3
   \   000007   A3           INC       DPTR
   \   000008   A3           INC       DPTR
   \   000009   A3           INC       DPTR
   \   00000A   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   12....       LCALL     ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   000003   A3           INC       DPTR
   \   000004   A3           INC       DPTR
   \   000005   A3           INC       DPTR
   \   000006   A3           INC       DPTR
   \   000007   A3           INC       DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   F582         MOV       DPL,A
   \   000002   E4           CLR       A
   \   000003   35..         ADDC      A,?V3
   \   000005   F583         MOV       DPH,A
   \   000007   E4           CLR       A
   \   000008   F0           MOVX      @DPTR,A
   \   000009   A3           INC       DPTR
   \   00000A   F0           MOVX      @DPTR,A
   \   00000B   E5..         MOV       A,?V2
   \   00000D   22           RET

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ??seqNum:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
   \                     ??flag:
   \   000000                DS 1
   \   000001                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zclSampleSw_OnOffSwitchType>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for sampleSw_TestEp>`:
   \   000000   08           DB 8
   \   000001   00           DB 0
   \   000002   ....         DW zclSampleSw_TaskID
   \   000004   0000         DW 0H
   \   000006   00           DB 0

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zclSampleSw_NwkState>`:
   \   000000   01           DB 1

   \                                 In  segment XDATA_ID, align 1, keep-with-next
   \                     `?<Initializer for zclSampleSw_CmdCallbacks>`:
   \   000000   ....         DW `??zclSampleSw_BasicResetCB::?relay`
   \   000002   0000         DW 0H
   \   000004   0000         DW 0H
   \   000006   0000         DW 0H
   \   000008   0000         DW 0H
   \   00000A   0000         DW 0H
   \   00000C   0000         DW 0H
   \   00000E   0000         DW 0H
   \   000010   0000         DW 0H

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??zclSampleSw_Init::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleSw_Init

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??zclSampleSw_event_loop::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleSw_event_loop

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??zclSampleSw_ProcessCommissioningStatus::?rela`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleSw_ProcessCommissioningStatus

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??zclSampleSw_BasicResetCB::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleSw_BasicResetCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??zclSampleSw_ProcessIncomingMsg::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleSw_ProcessIncomingMsg

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??zclSampleSw_ProcessInDiscCmdsRspCmd::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleSw_ProcessInDiscCmdsRspCmd

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??zclSampleSw_UartCB::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleSw_UartCB

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??zclSampleSw_ReportTest::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    zclSampleSw_ReportTest

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "UART0 Init Succeed\\r\\n">`:
   \   000000   55415254     DB "UART0 Init Succeed\015\012"
   \            3020496E
   \            69742053
   \            75636365
   \            65640D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Read:">`:
   \   000000   52656164     DB "Read:"
   \            3A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "UART Start\\n">`:
   \   000000   55415254     DB "UART Start\012"
   \            20537461
   \            72740A00

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0x01\\n">`:
   \   000000   30783031     DB "0x01\012"
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0x02\\n">`:
   \   000000   30783032     DB "0x02\012"
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0x03\\n">`:
   \   000000   30783033     DB "0x03\012"
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0x04\\n">`:
   \   000000   30783034     DB "0x04\012"
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0x05\\n">`:
   \   000000   30783035     DB "0x05\012"
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0x06\\n">`:
   \   000000   30783036     DB "0x06\012"
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0x07\\n">`:
   \   000000   30783037     DB "0x07\012"
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0x08\\n">`:
   \   000000   30783038     DB "0x08\012"
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0x09\\n">`:
   \   000000   30783039     DB "0x09\012"
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "0x00\\n">`:
   \   000000   30783030     DB "0x00\012"
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "CmdID Error\\n">`:
   \   000000   436D6449     DB "CmdID Error\012"
   \            44204572
   \            726F720A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Set Led On\\r\\n">`:
   \   000000   53657420     DB "Set Led On\015\012"
   \            4C656420
   \            4F6E0D0A
   \            00      

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Set Led On">`:
   \   000000   53657420     DB "Set Led On"
   \            4C656420
   \            4F6E00  

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Set Led Off\\r\\n">`:
   \   000000   53657420     DB "Set Led Off\015\012"
   \            4C656420
   \            4F66660D
   \            0A00    

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant "Set Led Off">`:
   \   000000   53657420     DB "Set Led Off"
   \            4C656420
   \            4F666600

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_bb8:
   \   000000   B80B0000     DD 3000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_1f4:
   \   000000   F4010000     DD 500

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_3e8:
   \   000000   E8030000     DD 1000

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_2710:
   \   000000   10270000     DD 10000
   1097          #endif

   Maximum stack usage in bytes:

   ISTACK XSTACK Function
   ------ ------ --------
      2      0   zclSampleSw_BasicResetCB
        2      0   -> zclSampleSw_ResetAttributesToDefaultValues
      0     42   zclSampleSw_Init
        0     38   -> HalUARTOpen
        0     38   -> HalUARTWrite
        0     38   -> RegisterForKeys
        0     38   -> afRegister
        0     38   -> bdb_RegisterCommissioningStatusCB
        0     38   -> bdb_RegisterSimpleDescriptor
        0     38   -> bdb_StartCommissioning
        0     42   -> osal_start_timerEx
        0     38   -> zclGeneral_RegisterCmdCallbacks
        0     38   -> zclSampleSw_ResetAttributesToDefaultValues
        0     38   -> zcl_registerAttrList
        0     38   -> zcl_registerForMsg
      2      4   zclSampleSw_ProcessCommissioningStatus
        2      0   -> bdb_StartCommissioning
        2      4   -> osal_start_timerEx
      2     14   zclSampleSw_ProcessInDiscCmdsRspCmd
      0     27   zclSampleSw_ProcessIncomingMsg
        0     15   -> HalLcdWriteStringValue
        0     14   -> osal_mem_free
        0     14   -> zclSampleSw_ProcessInDiscCmdsRspCmd
      1     43   zclSampleSw_ReportTest
        0     26   -> HalLcdWriteString
        0     26   -> HalUARTWrite
        0     26   -> osal_mem_alloc
        0     26   -> osal_mem_free
        0     26   -> osal_strlen
        0     31   -> zcl_SendReportCmd
      0     10   zclSampleSw_UartCB
        0     10   -> HalUARTRead
        0     10   -> Hal_UART_RxBufLen
        0     10   -> printf
      0     23   zclSampleSw_event_loop
        0     12   -> HalLedSet
        0     12   -> bdb_StartCommissioning
        0     12   -> bdb_ZedAttemptRecoverNwk
        0     12   -> osal_msg_deallocate
        0     12   -> osal_msg_receive
        0     16   -> osal_start_timerEx
        0     12   -> zclSampleSw_ProcessIncomingMsg
        0     12   -> zclSampleSw_ReportTest
        0     23   -> zcl_SendCommand


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       6  ?<Constant "0x00\n">
       6  ?<Constant "0x01\n">
       6  ?<Constant "0x02\n">
       6  ?<Constant "0x03\n">
       6  ?<Constant "0x04\n">
       6  ?<Constant "0x05\n">
       6  ?<Constant "0x06\n">
       6  ?<Constant "0x07\n">
       6  ?<Constant "0x08\n">
       6  ?<Constant "0x09\n">
      13  ?<Constant "CmdID Error\n">
       6  ?<Constant "Read:">
      12  ?<Constant "Set Led Off">
      14  ?<Constant "Set Led Off\r\n">
      11  ?<Constant "Set Led On">
      13  ?<Constant "Set Led On\r\n">
      12  ?<Constant "UART Start\n">
      21  ?<Constant "UART0 Init Succeed\r\n">
       7  ?<Initializer for sampleSw_TestEp>
      18  ?<Initializer for zclSampleSw_CmdCallbacks>
       1  ?<Initializer for zclSampleSw_NwkState>
       1  ?<Initializer for zclSampleSw_OnOffSwitchType>
       2  ??Subroutine16_0
      11  ??Subroutine17_0
       8  ??Subroutine18_0
       7  ??Subroutine19_0
       7  ?Subroutine0
       5  ?Subroutine1
       4  ?Subroutine10
      13  ?Subroutine11
      12  ?Subroutine12
      11  ?Subroutine13
       6  ?Subroutine14
       9  ?Subroutine15
      14  ?Subroutine2
       9  ?Subroutine3
       5  ?Subroutine4
       4  ?Subroutine5
      23  ?Subroutine6
       7  ?Subroutine7
       2  ?Subroutine8
       6  ?Subroutine9
       1  P0DIR
       1  P0SEL
       4  __Constant_1f4
       4  __Constant_2710
       4  __Constant_3e8
       4  __Constant_bb8
       1  flag
       7  sampleSw_TestEp
       1  seqNum
       2  temp_CHO2
       2  temp_CO
       2  temp_CO2
       2  temp_HUMIDITY
       2  temp_O2
       2  temp_O3
       2  temp_PM25
       2  temp_TEMPERATURE
       2  temp_VOC
       2  test_word
       1  zclSampleSwSeqNum
       9  zclSampleSw_BasicResetCB
       6  zclSampleSw_BasicResetCB::?relay
      18  zclSampleSw_CmdCallbacks
      12  zclSampleSw_DstAddr
     237  zclSampleSw_Init
       6  zclSampleSw_Init::?relay
       1  zclSampleSw_NwkState
       1  zclSampleSw_OnOffSwitchActions
       1  zclSampleSw_OnOffSwitchType
      80  zclSampleSw_ProcessCommissioningStatus
       6  zclSampleSw_ProcessCommissioningStatus::?relay
      37  zclSampleSw_ProcessInDiscCmdsRspCmd
       6  zclSampleSw_ProcessInDiscCmdsRspCmd::?relay
     287  zclSampleSw_ProcessIncomingMsg
       6  zclSampleSw_ProcessIncomingMsg::?relay
     425  zclSampleSw_ReportTest
       6  zclSampleSw_ReportTest::?relay
       1  zclSampleSw_TaskID
     128  zclSampleSw_UartBuf
     306  zclSampleSw_UartCB
       6  zclSampleSw_UartCB::?relay
     239  zclSampleSw_event_loop
       6  zclSampleSw_event_loop::?relay

 
 1 785 bytes in segment BANKED_CODE
    48 bytes in segment BANK_RELAYS
     2 bytes in segment SFR_AN
    27 bytes in segment XDATA_I
    27 bytes in segment XDATA_ID
   178 bytes in segment XDATA_ROM_C
   165 bytes in segment XDATA_Z
 
    75 bytes of CODE     memory
   162 bytes of CONST    memory (+ 16 bytes shared)
     0 bytes of DATA     memory (+  2 bytes shared)
 1 785 bytes of HUGECODE memory
   192 bytes of XDATA    memory

Errors: none
Warnings: none
