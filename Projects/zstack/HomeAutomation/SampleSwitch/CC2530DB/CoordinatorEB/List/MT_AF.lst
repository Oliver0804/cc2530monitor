###############################################################################
#
# IAR C/C++ Compiler V10.20.1.5333 for 8051               08/Feb/2022  22:10:15
# Copyright 2004-2018 IAR Systems AB.
# PC-locked license - IAR Embedded Workbench for 8051
#
#    Core               =  plain
#    Code model         =  banked
#    Data model         =  large
#    Calling convention =  xdata reentrant
#    Constant location  =  data_rom
#    Dptr setup         =  1,16
#                          
#    Source file        =  
#        I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Components\mt\MT_AF.c
#    Command line       =  
#        -f C:\usertemp\AppData\Local\Temp\EW8985.tmp ("I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Components\mt\MT_AF.c" -D SECURE=1 -D TC_LINKKEY_JOIN -D NV_INIT
#        -D NV_RESTORE -D xZTOOL_P1 -D xMT_TASK -D xMT_APP_FUNC -D xMT_SYS_FUNC
#        -D xMT_ZDO_FUNC -D xMT_ZDO_MGMT -D xMT_APP_CNF_FUNC -D
#        LCD_SUPPORTED=DEBUG -D MULTICAST_ENABLED=FALSE -D ZCL_READ -D
#        ZCL_DISCOVER -D ZCL_WRITE -D ZCL_BASIC -D ZCL_IDENTIFY -D ZCL_ON_OFF
#        -D ZCL_GROUPS -D ZCL_REPORT_DESTINATION_DEVICE -D ZCL_REPORT -D
#        HAL_LED=TRUE -D HAL_KEY=TRUE -D ISR_KEYINTERRUPT -D HAL_UART=TRUE -D
#        INT_HEAP_LEN=2300 -D HAL_LCD=TRUE -D xHAL_LCD_OLED12864 -D
#        HAL_ADC=TRUE -D HAL_UART=TRUE -D INT_HEAP_LEN=2048 -lC
#        "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\CoordinatorEB\List"
#        -lA "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\CoordinatorEB\List"
#        --diag_suppress Pe001,Pa010 -o "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\CoordinatorEB\Obj"
#        -e --debug --core=plain --dptr=16,1 --data_model=large
#        --code_model=banked --calling_convention=xdata_reentrant
#        --place_constants=data_rom --nr_virtual_regs 8 -f
#        "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\Tools\CC2530DB\f8wCoord.cfg"
#        (-DCPU32MHZ -DROOT=__near_func -DMAC_CFG_APP_PENDING_QUEUE=TRUE
#        -DMAC_CFG_TX_DATA_MAX=5 -DMAC_CFG_TX_MAX=8 -DMAC_CFG_RX_MAX=5
#        -DZDO_COORDINATOR -DRTR_NWK) -f "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\Tools\CC2530DB\f8wConfig.cfg"
#        (-DZIGBEEPRO -DSECURE=1 -DZG_SECURE_DYNAMIC=0 -DREFLECTOR
#        -DDEFAULT_CHANLIST=0x00000800 -DZDAPP_CONFIG_PAN_ID=0xFFFF
#        -DNWK_START_DELAY=100 -DEXTENDED_JOINING_RANDOM_MASK=0x007F
#        -DBEACON_REQUEST_DELAY=100 -DBEACON_REQ_DELAY_MASK=0x00FF
#        -DLINK_STATUS_JITTER_MASK=0x007F -DROUTE_EXPIRY_TIME=30
#        -DAPSC_ACK_WAIT_DURATION_POLLED=3000 -DNWK_INDIRECT_MSG_TIMEOUT=7
#        -DMAX_RREQ_ENTRIES=8 -DAPSC_MAX_FRAME_RETRIES=3
#        -DNWK_MAX_DATA_RETRIES=2 -DMAX_POLL_FAILURE_RETRIES=2 -DMAX_BCAST=9
#        -DAPS_MAX_GROUPS=16 -DMAX_RTG_ENTRIES=40 -DNWK_MAX_BINDING_ENTRIES=4
#        -DMAX_BINDING_CLUSTER_IDS=4 -DDEFAULT_KEY={0} -DMAC_MAX_FRAME_SIZE=116
#        -DZDNWKMGR_MIN_TRANSMISSIONS=20 "-DCONST=const __code"
#        -DGENERIC=__generic -DRFD_RCVC_ALWAYS_ON=FALSE -DPOLL_RATE=1000
#        -DQUEUED_POLL_RATE=100 -DRESPONSE_POLL_RATE=100 -DREJOIN_POLL_RATE=440
#        -DREJOIN_BACKOFF=900000 -DREJOIN_SCAN=900000 -DENABLE_LED4_DISABLE_S1)
#        -f "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\Tools\CC2530DB\f8wZCL.cfg"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\" -I
#        "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\Source\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\Source\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\ZMain\TI2530DB\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\include\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mac\include\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mac\high_level\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mac\low_level\srf04\single_chip\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\mt\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\osal\include\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\services\saddr\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\services\sdata\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\af\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\bdb\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\gp\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\nwk\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\sapi\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\sec\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\sys\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\zcl\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\stack\zdo\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\zmac\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\zmac\f8w\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\Common\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\SPI\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\HW_LCD\Font\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\HW_LCD\HAL_LCD_SPI\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\HW_LCD\HAL_OLED\"
#        -I "I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\..\..\..\..\..\Components\hal\target\CC2530EB\HW_LCD\HAL_TFT\"
#        -Ohz --require_prototypes)
#    Locale             =  Chinese (Simplified)_CHN.936
#    List file          =  
#        I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\CoordinatorEB\List\MT_AF.lst
#    Object file        =  
#        I:\ZigBee3.0\Zigbee3.0
#        20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack
#        3.0.1\Projects\zstack\HomeAutomation\SampleSwitch\CC2530DB\CoordinatorEB\Obj\MT_AF.r51
#
###############################################################################

I:\ZigBee3.0\Zigbee3.0 20211214\1.Ð­ÒéÕ»¹¤×÷Á÷³ÌºÍÎÞÏßÊÕ·¢¿ØÖÆLED\Z-Stack 3.0.1\Components\mt\MT_AF.c
      1          /**************************************************************************************************
      2            Filename:       MT_AF.c
      3            Revised:        $Date: 2015-01-26 08:25:50 -0800 (Mon, 26 Jan 2015) $
      4            Revision:       $Revision: 42025 $
      5          
      6            Description:    MonitorTest functions for the AF layer.
      7          
      8            Copyright 2007-2015 Texas Instruments Incorporated. All rights reserved.
      9          
     10            IMPORTANT: Your use of this Software is limited to those specific rights
     11            granted under the terms of a software license agreement between the user
     12            who downloaded the software, his/her employer (which must be your employer)
     13            and Texas Instruments Incorporated (the "License"). You may not use this
     14            Software unless you agree to abide by the terms of the License. The License
     15            limits your use, and you acknowledge, that the Software may not be modified,
     16            copied or distributed unless embedded on a Texas Instruments microcontroller
     17            or used solely and exclusively in conjunction with a Texas Instruments radio
     18            frequency transceiver, which is integrated into your product. Other than for
     19            the foregoing purpose, you may not use, reproduce, copy, prepare derivative
     20            works of, modify, distribute, perform, display or sell this Software and/or
     21            its documentation for any purpose.
     22          
     23            YOU FURTHER ACKNOWLEDGE AND AGREE THAT THE SOFTWARE AND DOCUMENTATION ARE
     24            PROVIDED “AS IS” WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESS OR IMPLIED,
     25            INCLUDING WITHOUT LIMITATION, ANY WARRANTY OF MERCHANTABILITY, TITLE,
     26            NON-INFRINGEMENT AND FITNESS FOR A PARTICULAR PURPOSE. IN NO EVENT SHALL
     27            TEXAS INSTRUMENTS OR ITS LICENSORS BE LIABLE OR OBLIGATED UNDER CONTRACT,
     28            NEGLIGENCE, STRICT LIABILITY, CONTRIBUTION, BREACH OF WARRANTY, OR OTHER
     29            LEGAL EQUITABLE THEORY ANY DIRECT OR INDIRECT DAMAGES OR EXPENSES
     30            INCLUDING BUT NOT LIMITED TO ANY INCIDENTAL, SPECIAL, INDIRECT, PUNITIVE
     31            OR CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, COST OF PROCUREMENT
     32            OF SUBSTITUTE GOODS, TECHNOLOGY, SERVICES, OR ANY CLAIMS BY THIRD PARTIES
     33            (INCLUDING BUT NOT LIMITED TO ANY DEFENSE THEREOF), OR OTHER SIMILAR COSTS.
     34          
     35            Should you have any questions regarding your right to use this Software,
     36            contact Texas Instruments Incorporated at www.TI.com.
     37          
     38          **************************************************************************************************/
     39          
     40          /* ------------------------------------------------------------------------------------------------
     41           *                                          Includes
     42           * ------------------------------------------------------------------------------------------------
     43           */
     44          #include "ZComDef.h"
     45          #include "OSAL.h"
     46          #include "MT.h"
     47          #include "MT_AF.h"
     48          #include "MT_ZDO.h"
     49          #include "nwk.h"
     50          #include "OnBoard.h"
     51          #include "MT_UART.h"
     52          
     53          #if defined INTER_PAN
     54          #include "stub_aps.h"
     55          #endif
     56          
     57          
     58          /* ------------------------------------------------------------------------------------------------
     59           *                                          Constants
     60           * ------------------------------------------------------------------------------------------------
     61           */
     62          
     63          #if !defined MT_AF_EXEC_CNT
     64          #define MT_AF_EXEC_CNT  15
     65          #endif
     66          
     67          #if !defined MT_AF_EXEC_DLY
     68          #define MT_AF_EXEC_DLY  1000
     69          #endif
     70          
     71          /* ------------------------------------------------------------------------------------------------
     72           *                                           Typedefs
     73           * ------------------------------------------------------------------------------------------------
     74           */
     75          
     76          typedef struct
     77          {
     78            uint8 *data;
     79            afAddrType_t dstAddr;
     80            endPointDesc_t *epDesc;
     81            uint16 cId;
     82            uint16 dataLen;
     83            uint8 transId;
     84            uint8 txOpts;
     85            uint8 radius;
     86            uint8 tick;
     87          } mtAfDataReq_t;
     88          
     89          typedef struct _mtAfInMsgList_t
     90          {
     91            struct _mtAfInMsgList_t *next;
     92            uint8 *data;
     93            uint32 timestamp;         // Receipt timestamp from MAC.
     94            uint8 tick;
     95          } mtAfInMsgList_t;
     96          
     97          /* ------------------------------------------------------------------------------------------------
     98           *                                        Local Variables
     99           * ------------------------------------------------------------------------------------------------
    100           */
    101          

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    102          mtAfInMsgList_t *pMtAfInMsgList = NULL;
   \                     pMtAfInMsgList:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z

   \                                 In  segment XDATA_Z, align 1, keep-with-next
    103          mtAfDataReq_t *pMtAfDataReq = NULL;
   \                     pMtAfDataReq:
   \   000000                DS 2
   \   000002                REQUIRE __INIT_XDATA_Z
    104          
    105          /* ------------------------------------------------------------------------------------------------
    106           *                                        Global Variables
    107           * ------------------------------------------------------------------------------------------------
    108           */
    109          
    110          #if defined ( MT_AF_CB_FUNC )
    111          uint16 _afCallbackSub;
    112          #endif
    113          
    114          /* ------------------------------------------------------------------------------------------------
    115           *                                        Local Functions
    116           * ------------------------------------------------------------------------------------------------
    117           */
    118          
    119          static void MT_AfRegister(uint8 *pBuf);
    120          static void MT_AfDelete(uint8 *pBuf);
    121          static void MT_AfDataRequest(uint8 *pBuf);
    122          
    123          #if defined ( ZIGBEEPRO )
    124          static void MT_AfDataRequestSrcRtg(uint8 *pBuf);
    125          #endif
    126          
    127          #if defined INTER_PAN
    128          static void MT_AfInterPanCtl(uint8 *pBuf);
    129          #endif
    130          
    131          static void MT_AfDataRetrieve(uint8 *pBuf);
    132          static void MT_AfDataStore(uint8 *pBuf);
    133          static void MT_AfAPSF_ConfigSet(uint8 *pBuf);
    134          static void MT_AfAPSF_ConfigGet(uint8 *pBuf);
    135          
    136          
    137          /**************************************************************************************************
    138           * @fn          MT_AfExec
    139           *
    140           * @brief       This function is invoked by an MT timer event.
    141           *
    142           * input parameters
    143           *
    144           * None.
    145           *
    146           * output parameters
    147           *
    148           * None.
    149           *
    150           * @return      None.
    151           **************************************************************************************************
    152           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    153          void MT_AfExec(void)
   \                     MT_AfExec:
    154          {
   \   000000   74F7         MOV       A,#-0x9
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 9
   \   000005                ; Auto size: 0
    155            mtAfInMsgList_t *pPrev, *pItem = pMtAfInMsgList;
   \                     ??MT_AfExec_0:
   \   000005   90....       MOV       DPTR,#pMtAfInMsgList
   \   000008   8008         SJMP      ??MT_AfExec_1
    156          
    157            while (pItem != NULL)
    158            {
    159              if (--(pItem->tick) == 0)
    160              {
    161                if (pMtAfInMsgList == pItem)
    162                {
    163                  pMtAfInMsgList = pItem->next;
    164                  (void)osal_mem_free(pItem);
    165                  pItem = pMtAfInMsgList;
    166                }
    167                else
    168                {
    169                  pPrev->next = pItem->next;
    170                  (void)osal_mem_free(pItem);
    171                  pItem = pPrev->next;
    172                }
    173              }
    174              else
    175              {
    176                pPrev = pItem;
   \                     ??MT_AfExec_2:
   \   00000A   EA           MOV       A,R2
   \   00000B   FE           MOV       R6,A
   \   00000C   EB           MOV       A,R3
   \   00000D   FF           MOV       R7,A
    177                pItem = pItem->next;
   \   00000E   8A82         MOV       DPL,R2
   \   000010   8B83         MOV       DPH,R3
    178              }
   \                     ??MT_AfExec_1:
   \   000012   12....       LCALL     ??Subroutine60_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_138:
   \   000015   EA           MOV       A,R2
   \   000016   4B           ORL       A,R3
   \   000017   603D         JZ        ??MT_AfExec_3
   \   000019   EA           MOV       A,R2
   \   00001A   2408         ADD       A,#0x8
   \   00001C   F582         MOV       DPL,A
   \   00001E   E4           CLR       A
   \   00001F   3B           ADDC      A,R3
   \   000020   F583         MOV       DPH,A
   \   000022   E0           MOVX      A,@DPTR
   \   000023   14           DEC       A
   \   000024   F0           MOVX      @DPTR,A
   \   000025   70E3         JNZ       ??MT_AfExec_2
   \   000027   90....       MOV       DPTR,#pMtAfInMsgList
   \   00002A   12....       LCALL     ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_154:
   \   00002D   EA           MOV       A,R2
   \   00002E   68           XRL       A,R0
   \   00002F   7002         JNZ       ??MT_AfExec_4
   \   000031   EB           MOV       A,R3
   \   000032   69           XRL       A,R1
   \                     ??MT_AfExec_4:
   \   000033   8A82         MOV       DPL,R2
   \   000035   8B83         MOV       DPH,R3
   \   000037   7008         JNZ       ??MT_AfExec_5
   \   000039   12....       LCALL     ?Subroutine13 & 0xFFFF
   \                     ??CrossCallReturnLabel_22:
   \   00003C                ; Setup parameters for call to function osal_mem_free
   \   00003C   12....       LCALL     `??osal_mem_free::?relay`; Banked call to: osal_mem_free
   \   00003F   80C4         SJMP      ??MT_AfExec_0
   \                     ??MT_AfExec_5:
   \   000041   12....       LCALL     ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_155:
   \   000044   8E82         MOV       DPL,R6
   \   000046   8F83         MOV       DPH,R7
   \   000048   E8           MOV       A,R0
   \   000049   F0           MOVX      @DPTR,A
   \   00004A   A3           INC       DPTR
   \   00004B   E9           MOV       A,R1
   \   00004C   F0           MOVX      @DPTR,A
   \   00004D                ; Setup parameters for call to function osal_mem_free
   \   00004D   12....       LCALL     `??osal_mem_free::?relay`; Banked call to: osal_mem_free
   \   000050   8E82         MOV       DPL,R6
   \   000052   8F83         MOV       DPH,R7
   \   000054   80BC         SJMP      ??MT_AfExec_1
    179            }
    180          
    181            if (pMtAfDataReq != NULL)
   \                     ??MT_AfExec_3:
   \   000056   12....       LCALL     ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_151:
   \   000059   6015         JZ        ??MT_AfExec_6
    182            {
    183              if (--(pMtAfDataReq->tick) == 0)
   \   00005B   E8           MOV       A,R0
   \   00005C   2417         ADD       A,#0x17
   \   00005E   F582         MOV       DPL,A
   \   000060   E4           CLR       A
   \   000061   39           ADDC      A,R1
   \   000062   F583         MOV       DPH,A
   \   000064   E0           MOVX      A,@DPTR
   \   000065   14           DEC       A
   \   000066   12....       LCALL     ?Subroutine14 & 0xFFFF
   \                     ??CrossCallReturnLabel_25:
   \   000069   E0           MOVX      A,@DPTR
   \   00006A   7004         JNZ       ??MT_AfExec_6
    184              {
    185                (void)osal_mem_free(pMtAfDataReq);
   \   00006C                ; Setup parameters for call to function osal_mem_free
   \   00006C   12....       LCALL     ?Subroutine8 & 0xFFFF
    186                pMtAfDataReq = NULL;
    187              }
    188            }
   \                     ??CrossCallReturnLabel_9:
   \   00006F   F0           MOVX      @DPTR,A
    189          
    190            if ((pMtAfInMsgList != NULL) || (pMtAfDataReq != NULL))
   \                     ??MT_AfExec_6:
   \   000070   90....       MOV       DPTR,#pMtAfInMsgList
   \   000073   12....       LCALL     ??Subroutine61_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_144:
   \   000076   7005         JNZ       ??MT_AfExec_7
   \   000078   12....       LCALL     ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_152:
   \   00007B   6012         JZ        ??CrossCallReturnLabel_50
    191            {
    192              if (ZSuccess != osal_start_timerEx(MT_TaskID, MT_AF_EXEC_EVT, MT_AF_EXEC_DLY))
   \                     ??MT_AfExec_7:
   \   00007D                ; Setup parameters for call to function osal_start_timerEx
   \   00007D   90....       MOV       DPTR,#__Constant_3e8
   \   000080   12....       LCALL     ?PUSH_XSTACK8_X_FOUR
   \   000083   12....       LCALL     ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_36:
   \   000086   12....       LCALL     ?DEALLOC_XSTACK8
   \   000089   E9           MOV       A,R1
   \   00008A   6003         JZ        ??CrossCallReturnLabel_50
    193              {
    194                osal_set_event(MT_TaskID, MT_AF_EXEC_EVT);
   \   00008C                ; Setup parameters for call to function osal_set_event
   \   00008C   12....       LCALL     ?Subroutine26 & 0xFFFF
    195              }
    196            }
    197          }
   \                     ??CrossCallReturnLabel_50:
   \   00008F   7F01         MOV       R7,#0x1
   \   000091   02....       LJMP      ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine26:
   \   000000   7A08         MOV       R2,#0x8
   \   000002   7B00         MOV       R3,#0x0
   \   000004   90....       MOV       DPTR,#MT_TaskID
   \   000007   E0           MOVX      A,@DPTR
   \   000008   F9           MOV       R1,A
   \   000009   12....       LCALL     `??osal_set_event::?relay`; Banked call to: osal_set_event
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine21:
   \   000000   7A08         MOV       R2,#0x8
   \   000002   7B00         MOV       R3,#0x0
   \   000004   90....       MOV       DPTR,#MT_TaskID
   \   000007   E0           MOVX      A,@DPTR
   \   000008   F9           MOV       R1,A
   \   000009   12....       LCALL     `??osal_start_timerEx::?relay`; Banked call to: osal_start_timerEx
   \   00000C   7404         MOV       A,#0x4
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine14:
   \   000000   F0           MOVX      @DPTR,A
   \   000001   90....       MOV       DPTR,#pMtAfDataReq
   \   000004   12....       LCALL     ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_133:
   \   000007   2417         ADD       A,#0x17
   \   000009   F582         MOV       DPL,A
   \   00000B   E4           CLR       A
   \   00000C   38           ADDC      A,R0
   \   00000D   F583         MOV       DPH,A
   \   00000F   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine48:
   \   000000   E0           MOVX      A,@DPTR
   \   000001   F8           MOV       R0,A
   \   000002   A3           INC       DPTR
   \   000003   E0           MOVX      A,@DPTR
   \   000004   C8           XCH       A,R0
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine13:
   \   000000   12....       LCALL     ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_157:
   \   000003   90....       MOV       DPTR,#pMtAfInMsgList
   \   000006   E8           MOV       A,R0
   \   000007   F0           MOVX      @DPTR,A
   \   000008   A3           INC       DPTR
   \   000009   E9           MOV       A,R1
   \   00000A   F0           MOVX      @DPTR,A
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine60_0:
   \   000000   E0           MOVX      A,@DPTR
   \   000001   FA           MOV       R2,A
   \   000002   A3           INC       DPTR
   \   000003   E0           MOVX      A,@DPTR
   \   000004   FB           MOV       R3,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine3:
   \   000000   90....       MOV       DPTR,#pMtAfDataReq
   \   000003                REQUIRE ??Subroutine61_0
   \   000003                ; // Fall through to label ??Subroutine61_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine61_0:
   \   000000   12....       LCALL     ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_158:
   \   000003   E8           MOV       A,R0
   \   000004   49           ORL       A,R1
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine47:
   \   000000   E0           MOVX      A,@DPTR
   \   000001   F8           MOV       R0,A
   \   000002   A3           INC       DPTR
   \   000003   E0           MOVX      A,@DPTR
   \   000004   F9           MOV       R1,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine49:
   \   000000   E0           MOVX      A,@DPTR
   \   000001   FA           MOV       R2,A
   \   000002   A3           INC       DPTR
   \   000003   E0           MOVX      A,@DPTR
   \   000004   FB           MOV       R3,A
   \   000005   12....       LCALL     `??osal_mem_free::?relay`; Banked call to: osal_mem_free
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine8:
   \   000000   90....       MOV       DPTR,#pMtAfDataReq
   \   000003   12....       LCALL     ?Subroutine49 & 0xFFFF
   \                     ??CrossCallReturnLabel_91:
   \   000006   90....       MOV       DPTR,#pMtAfDataReq
   \   000009   E4           CLR       A
   \   00000A   F0           MOVX      @DPTR,A
   \   00000B   A3           INC       DPTR
   \   00000C   22           RET
    198          
    199          /***************************************************************************************************
    200           * @fn      MT_AfCommandProcessing
    201           *
    202           * @brief   Process all the AF commands that are issued by test tool
    203           *
    204           * @param   pBuf - pointer to the received buffer
    205           *
    206           * @return  status
    207           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    208          uint8 MT_AfCommandProcessing(uint8 *pBuf)
   \                     MT_AfCommandProcessing:
    209          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000   74F2         MOV       A,#-0xe
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 5
   \   000005   74FB         MOV       A,#-0x5
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
    210            uint8 status = MT_RPC_SUCCESS;
   \   00000A   75..00       MOV       ?V2,#0x0
    211          
    212            switch (pBuf[MT_RPC_POS_CMD1])
   \   00000D   EA           MOV       A,R2
   \   00000E   2403         ADD       A,#0x3
   \   000010   F5..         MOV       ?V0,A
   \   000012   E4           CLR       A
   \   000013   3B           ADDC      A,R3
   \   000014   F5..         MOV       ?V1,A
   \   000016   EA           MOV       A,R2
   \   000017   2402         ADD       A,#0x2
   \   000019   F8           MOV       R0,A
   \   00001A   E4           CLR       A
   \   00001B   3B           ADDC      A,R3
   \   00001C   F9           MOV       R1,A
   \   00001D   8882         MOV       DPL,R0
   \   00001F   F583         MOV       DPH,A
   \   000021   E0           MOVX      A,@DPTR
   \   000022   6031         JZ        ??MT_AfCommandProcessing_0
   \   000024   14           DEC       A
   \   000025   7003         JNZ       $+5
   \   000027   02....       LJMP      ??MT_AfCommandProcessing_1 & 0xFFFF
   \   00002A   14           DEC       A
   \   00002B   7003         JNZ       $+5
   \   00002D   02....       LJMP      ??MT_AfCommandProcessing_1 & 0xFFFF
   \   000030   14           DEC       A
   \   000031   7003         JNZ       $+5
   \   000033   02....       LJMP      ??MT_AfCommandProcessing_2 & 0xFFFF
   \   000036   14           DEC       A
   \   000037   607B         JZ        ??MT_AfCommandProcessing_3
   \   000039   24F3         ADD       A,#-0xd
   \   00003B   7003         JNZ       $+5
   \   00003D   02....       LJMP      ??MT_AfCommandProcessing_4 & 0xFFFF
   \   000040   14           DEC       A
   \   000041   7003         JNZ       $+5
   \   000043   02....       LJMP      ??MT_AfCommandProcessing_5 & 0xFFFF
   \   000046   14           DEC       A
   \   000047   7003         JNZ       $+5
   \   000049   02....       LJMP      ??MT_AfCommandProcessing_6 & 0xFFFF
   \   00004C   14           DEC       A
   \   00004D   7003         JNZ       $+5
   \   00004F   02....       LJMP      ??MT_AfCommandProcessing_7 & 0xFFFF
   \   000052   02....       LJMP      ??MT_AfCommandProcessing_8 & 0xFFFF
    213            {
    214              case MT_AF_REGISTER:
    215                MT_AfRegister(pBuf);
   \                     ??MT_AfCommandProcessing_0:
   \   000055   12....       LCALL     ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_121:
   \   000058   E0           MOVX      A,@DPTR
   \   000059   F5..         MOV       ?V3,A
   \   00005B                ; Setup parameters for call to function osal_mem_alloc
   \   00005B   7A07         MOV       R2,#0x7
   \   00005D   7B00         MOV       R3,#0x0
   \   00005F   12....       LCALL     `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
   \   000062   8A..         MOV       ?V4,R2
   \   000064   8B..         MOV       ?V5,R3
   \   000066   AE..         MOV       R6,?V4
   \   000068   AF..         MOV       R7,?V5
   \   00006A   EA           MOV       A,R2
   \   00006B   4F           ORL       A,R7
   \   00006C   603B         JZ        ??MT_AfCommandProcessing_9
   \   00006E   8A82         MOV       DPL,R2
   \   000070   8B83         MOV       DPH,R3
   \   000072   A3           INC       DPTR
   \   000073   A3           INC       DPTR
   \   000074   74..         MOV       A,#MT_TaskID & 0xff
   \   000076   F0           MOVX      @DPTR,A
   \   000077   A3           INC       DPTR
   \   000078   74..         MOV       A,#(MT_TaskID >> 8) & 0xff
   \   00007A   F0           MOVX      @DPTR,A
   \   00007B                ; Setup parameters for call to function MT_BuildEndpointDesc
   \   00007B   EA           MOV       A,R2
   \   00007C   FC           MOV       R4,A
   \   00007D   EB           MOV       A,R3
   \   00007E   FD           MOV       R5,A
   \   00007F   AA..         MOV       R2,?V0
   \   000081   AB..         MOV       R3,?V1
   \   000083   12....       LCALL     `??MT_BuildEndpointDesc::?relay`; Banked call to: MT_BuildEndpointDesc
   \   000086   E9           MOV       A,R1
   \   000087   85..82       MOV       DPL,?XSP + 0
   \   00008A   85..83       MOV       DPH,?XSP + 1
   \   00008D   F0           MOVX      @DPTR,A
   \   00008E   700F         JNZ       ??MT_AfCommandProcessing_10
   \   000090                ; Setup parameters for call to function afRegister
   \   000090   EE           MOV       A,R6
   \   000091   FA           MOV       R2,A
   \   000092   EF           MOV       A,R7
   \   000093   FB           MOV       R3,A
   \   000094   12....       LCALL     `??afRegister::?relay`; Banked call to: afRegister
   \   000097   E9           MOV       A,R1
   \   000098   85..82       MOV       DPL,?XSP + 0
   \   00009B   85..83       MOV       DPH,?XSP + 1
   \   00009E   F0           MOVX      @DPTR,A
   \                     ??MT_AfCommandProcessing_10:
   \   00009F   E0           MOVX      A,@DPTR
   \   0000A0   6007         JZ        ??MT_AfCommandProcessing_9
   \   0000A2                ; Setup parameters for call to function osal_mem_free
   \   0000A2   EE           MOV       A,R6
   \   0000A3   FA           MOV       R2,A
   \   0000A4   EF           MOV       A,R7
   \   0000A5   FB           MOV       R3,A
   \   0000A6   12....       LCALL     `??osal_mem_free::?relay`; Banked call to: osal_mem_free
   \                     ??MT_AfCommandProcessing_9:
   \   0000A9                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0000A9   AC..         MOV       R4,?XSP + 0
   \   0000AB   AD..         MOV       R5,?XSP + 1
   \   0000AD   7B01         MOV       R3,#0x1
   \   0000AF   AA..         MOV       R2,?V3
   \   0000B1   02....       LJMP      ??MT_AfCommandProcessing_11 & 0xFFFF
    216                break;
    217          
    218              case MT_AF_DELETE:
    219                MT_AfDelete( pBuf );
   \                     ??MT_AfCommandProcessing_3:
   \   0000B4   12....       LCALL     ?Subroutine36 & 0xFFFF
   \                     ??CrossCallReturnLabel_122:
   \   0000B7   E0           MOVX      A,@DPTR
   \   0000B8   FE           MOV       R6,A
   \   0000B9                ; Setup parameters for call to function afDelete
   \   0000B9   85..82       MOV       DPL,?V0
   \   0000BC   85..83       MOV       DPH,?V1
   \   0000BF   E0           MOVX      A,@DPTR
   \   0000C0   F9           MOV       R1,A
   \   0000C1   12....       LCALL     `??afDelete::?relay`; Banked call to: afDelete
   \   0000C4   12....       LCALL     ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_105:
   \   0000C7   EE           MOV       A,R6
   \   0000C8   FA           MOV       R2,A
   \   0000C9   02....       LJMP      ??MT_AfCommandProcessing_11 & 0xFFFF
    220                break;
    221          
    222              case MT_AF_DATA_REQUEST:
    223              case MT_AF_DATA_REQUEST_EXT:
    224                MT_AfDataRequest(pBuf);
   \                     ??MT_AfCommandProcessing_1:
   \   0000CC                ; Setup parameters for call to function MT_AfDataRequest
   \   0000CC   12....       LCALL     `??MT_AfDataRequest::?relay`; Banked call to: MT_AfDataRequest
    225                break;
   \   0000CF   02....       LJMP      ??MT_AfCommandProcessing_12 & 0xFFFF
    226          
    227          #if defined( ZIGBEEPRO )
    228              case MT_AF_DATA_REQUEST_SRCRTG:
    229                MT_AfDataRequestSrcRtg(pBuf);
   \                     ??MT_AfCommandProcessing_2:
   \   0000D2                ; Setup parameters for call to function MT_AfDataRequestSrcRtg
   \   0000D2   12....       LCALL     `??MT_AfDataRequestSrcRtg::?relay`; Banked call to: MT_AfDataRequestSrcRtg
    230                break;
   \   0000D5   02....       LJMP      ??MT_AfCommandProcessing_12 & 0xFFFF
    231          #endif
    232          
    233          #if defined INTER_PAN
    234              case MT_AF_INTER_PAN_CTL:
    235                MT_AfInterPanCtl(pBuf);
    236                break;
    237          #endif
    238          
    239              case MT_AF_DATA_RETRIEVE:
    240                MT_AfDataRetrieve(pBuf);
   \                     ??MT_AfCommandProcessing_5:
   \   0000D8                ; Setup parameters for call to function MT_AfDataRetrieve
   \   0000D8   12....       LCALL     `??MT_AfDataRetrieve::?relay`; Banked call to: MT_AfDataRetrieve
    241                break;
   \   0000DB   02....       LJMP      ??MT_AfCommandProcessing_12 & 0xFFFF
    242          
    243              case MT_AF_DATA_STORE:
    244                MT_AfDataStore(pBuf);
   \                     ??MT_AfCommandProcessing_4:
   \   0000DE                ; Setup parameters for call to function MT_AfDataStore
   \   0000DE   12....       LCALL     `??MT_AfDataStore::?relay`; Banked call to: MT_AfDataStore
    245                break;
   \   0000E1   02....       LJMP      ??MT_AfCommandProcessing_12 & 0xFFFF
    246          
    247              case MT_AF_APSF_CONFIG_SET:
    248                MT_AfAPSF_ConfigSet(pBuf);
   \                     ??MT_AfCommandProcessing_6:
   \   0000E4   8A82         MOV       DPL,R2
   \   0000E6   8B83         MOV       DPH,R3
   \   0000E8   A3           INC       DPTR
   \   0000E9   A3           INC       DPTR
   \   0000EA   A3           INC       DPTR
   \   0000EB   A3           INC       DPTR
   \   0000EC   E0           MOVX      A,@DPTR
   \   0000ED   C0E0         PUSH      A
   \   0000EF   7401         MOV       A,#0x1
   \   0000F1   12....       LCALL     ?XSTACK_DISP0_8
   \   0000F4   D0E0         POP       A
   \   0000F6   12....       LCALL     ?Subroutine37 & 0xFFFF
   \                     ??CrossCallReturnLabel_70:
   \   0000F9   A3           INC       DPTR
   \   0000FA   E0           MOVX      A,@DPTR
   \   0000FB   C0E0         PUSH      A
   \   0000FD   7402         MOV       A,#0x2
   \   0000FF   12....       LCALL     ?XSTACK_DISP0_8
   \   000102   D0E0         POP       A
   \   000104   F0           MOVX      @DPTR,A
   \   000105                ; Setup parameters for call to function afAPSF_ConfigSet
   \   000105   7401         MOV       A,#0x1
   \   000107   12....       LCALL     ?XSTACK_DISP101_8
   \   00010A   85..82       MOV       DPL,?V0
   \   00010D   85..83       MOV       DPH,?V1
   \   000110   E0           MOVX      A,@DPTR
   \   000111   F9           MOV       R1,A
   \   000112   12....       LCALL     `??afAPSF_ConfigSet::?relay`; Banked call to: afAPSF_ConfigSet
   \   000115   12....       LCALL     ?Subroutine34 & 0xFFFF
   \                     ??CrossCallReturnLabel_106:
   \   000118   7A13         MOV       R2,#0x13
   \   00011A   8045         SJMP      ??MT_AfCommandProcessing_11
    249                break;
    250          
    251              case MT_AF_APSF_CONFIG_GET:
    252                MT_AfAPSF_ConfigGet(pBuf);
   \                     ??MT_AfCommandProcessing_7:
   \   00011C   90....       MOV       DPTR,#`?<Constant {0, 0}>`
   \   00011F   7401         MOV       A,#0x1
   \   000121   12....       LCALL     ?XSTACK_DISP102_8
   \   000124   7402         MOV       A,#0x2
   \   000126   12....       LCALL     ?MOVE_LONG8_XDATA_XDATA
   \   000129                ; Setup parameters for call to function afAPSF_ConfigGet
   \   000129   04           INC       A
   \   00012A   12....       LCALL     ?XSTACK_DISP101_8
   \   00012D   85..82       MOV       DPL,?V0
   \   000130   85..83       MOV       DPH,?V1
   \   000133   E0           MOVX      A,@DPTR
   \   000134   F9           MOV       R1,A
   \   000135   12....       LCALL     `??afAPSF_ConfigGet::?relay`; Banked call to: afAPSF_ConfigGet
   \   000138   7401         MOV       A,#0x1
   \   00013A   12....       LCALL     ?XSTACK_DISP0_8
   \   00013D   E0           MOVX      A,@DPTR
   \   00013E   C0E0         PUSH      A
   \   000140   7403         MOV       A,#0x3
   \   000142   12....       LCALL     ?XSTACK_DISP0_8
   \   000145   D0E0         POP       A
   \   000147   F0           MOVX      @DPTR,A
   \   000148   7402         MOV       A,#0x2
   \   00014A   12....       LCALL     ?XSTACK_DISP0_8
   \   00014D   E0           MOVX      A,@DPTR
   \   00014E   C0E0         PUSH      A
   \   000150   7404         MOV       A,#0x4
   \   000152   12....       LCALL     ?XSTACK_DISP0_8
   \   000155   D0E0         POP       A
   \   000157   F0           MOVX      @DPTR,A
   \   000158                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000158   7403         MOV       A,#0x3
   \   00015A   12....       LCALL     ?XSTACK_DISP102_8
   \   00015D   7B03         MOV       R3,#0x3
   \   00015F   7A14         MOV       R2,#0x14
   \                     ??MT_AfCommandProcessing_11:
   \   000161   7964         MOV       R1,#0x64
   \   000163   12....       LCALL     `??MT_BuildAndSendZToolResponse::?relay`; Banked call to: MT_BuildAndSendZToolResponse
    253                break;
   \   000166   8003         SJMP      ??MT_AfCommandProcessing_12
    254          
    255              default:
    256                status = MT_RPC_ERR_COMMAND_ID;
   \                     ??MT_AfCommandProcessing_8:
   \   000168   75..02       MOV       ?V2,#0x2
    257                break;
    258            }
    259          
    260            return status;
   \                     ??MT_AfCommandProcessing_12:
   \   00016B   A9..         MOV       R1,?V2
   \   00016D   7405         MOV       A,#0x5
   \   00016F                REQUIRE ?Subroutine0
   \   00016F                ; // Fall through to label ?Subroutine0
    261          }

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine0:
   \   000000   12....       LCALL     ?DEALLOC_XSTACK8
   \   000003   7F06         MOV       R7,#0x6
   \   000005   02....       LJMP      ?BANKED_LEAVE_XDATA
    262          
    263          /***************************************************************************************************
    264           * @fn      MT_AfRegister
    265           *
    266           * @brief   Process AF Register command
    267           *
    268           * @param   pBuf - pointer to the received buffer
    269           *
    270           * @return  none
    271           ***************************************************************************************************/
    272          static void MT_AfRegister(uint8 *pBuf)
    273          {
    274            uint8 cmdId;
    275            uint8 retValue = ZMemError;
    276            endPointDesc_t *epDesc;
    277          
    278            /* parse header */
    279            cmdId = pBuf[MT_RPC_POS_CMD1];
    280            pBuf += MT_RPC_FRAME_HDR_SZ;
    281          
    282            epDesc = (endPointDesc_t *)osal_mem_alloc(sizeof(endPointDesc_t));
    283            if ( epDesc )
    284            {
    285              epDesc->task_id = &MT_TaskID;
    286              retValue = MT_BuildEndpointDesc( pBuf, epDesc );
    287              if ( retValue == ZSuccess )
    288              {
    289                retValue = afRegister( epDesc );
    290              }
    291          
    292              if ( retValue != ZSuccess )
    293              {
    294                osal_mem_free( epDesc );
    295              }
    296            }
    297          
    298            /* Build and send back the response */
    299            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF), cmdId, 1, &retValue);
    300          }
    301          
    302          /***************************************************************************************************
    303           * @fn      MT_AfDelete
    304           *
    305           * @brief   Process AF Delete Endpoint command
    306           *
    307           * @param   pBuf - pointer to the received buffer
    308           *
    309           * @return  none
    310           ***************************************************************************************************/
    311          static void MT_AfDelete(uint8 *pBuf)
    312          {
    313            uint8 cmdId;
    314            uint8 retValue = ZMemError;
    315          
    316            /* parse header */
    317            cmdId = pBuf[MT_RPC_POS_CMD1];
    318            pBuf += MT_RPC_FRAME_HDR_SZ;
    319          
    320            retValue = afDelete( *pBuf );
    321          
    322            /* Build and send back the response */
    323            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF), cmdId, 1, &retValue);
    324          }
    325          
    326          /***************************************************************************************************
    327           * @fn      MT_AfDataRequest
    328           *
    329           * @brief   Process AF Register command
    330           *
    331           * @param   pBuf - pointer to the received buffer
    332           *
    333           * @return  none
    334           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    335          static void MT_AfDataRequest(uint8 *pBuf)
   \                     MT_AfDataRequest:
    336          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000   74F0         MOV       A,#-0x10
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 18
   \   000005   74EE         MOV       A,#-0x12
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
   \   00000A   8B..         MOV       ?V1,R3
    337            #define MT_AF_REQ_MSG_LEN  10
    338            #define MT_AF_REQ_MSG_EXT  10
    339          
    340            endPointDesc_t *epDesc;
    341            afAddrType_t dstAddr;
    342            cId_t cId;
    343            uint8 transId, txOpts, radius;
    344            uint8 cmd0, cmd1;
    345            uint8 retValue = ZFailure;
   \   00000C   85..82       MOV       DPL,?XSP + 0
   \   00000F   85..83       MOV       DPH,?XSP + 1
   \   000012   7401         MOV       A,#0x1
   \   000014   12....       LCALL     ?Subroutine55 & 0xFFFF
    346            uint16 dataLen, tempLen;
    347          
    348            /* Parse header */
    349            cmd0 = pBuf[MT_RPC_POS_CMD0];
   \                     ??CrossCallReturnLabel_102:
   \   000017   E0           MOVX      A,@DPTR
   \   000018   C0E0         PUSH      A
   \   00001A   7405         MOV       A,#0x5
   \   00001C   12....       LCALL     ?XSTACK_DISP0_8
   \   00001F   D0E0         POP       A
   \   000021   12....       LCALL     ?Subroutine41 & 0xFFFF
    350            cmd1 = pBuf[MT_RPC_POS_CMD1];
   \                     ??CrossCallReturnLabel_78:
   \   000024   C0E0         PUSH      A
   \   000026   7401         MOV       A,#0x1
   \   000028   12....       LCALL     ?XSTACK_DISP0_8
   \   00002B   D0E0         POP       A
   \   00002D   F0           MOVX      @DPTR,A
    351            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   00002E   EA           MOV       A,R2
   \   00002F   2403         ADD       A,#0x3
   \   000031   F5..         MOV       ?V0,A
   \   000033   5002         JNC       ??MT_AfDataRequest_0
   \   000035   05..         INC       ?V1
    352          
    353            if (cmd1 == MT_AF_DATA_REQUEST_EXT)
   \                     ??MT_AfDataRequest_0:
   \   000037   E0           MOVX      A,@DPTR
   \   000038   6402         XRL       A,#0x2
   \   00003A   6003         JZ        $+5
   \   00003C   02....       LJMP      ??MT_AfDataRequest_1 & 0xFFFF
    354            {
    355              dstAddr.addrMode = (afAddrMode_t)*pBuf++;
   \   00003F   85..82       MOV       DPL,?V0
   \   000042   85..83       MOV       DPH,?V1
   \   000045   E0           MOVX      A,@DPTR
   \   000046   F8           MOV       R0,A
   \   000047   740E         MOV       A,#0xe
   \   000049   12....       LCALL     ?XSTACK_DISP0_8
   \   00004C   E8           MOV       A,R0
   \   00004D   12....       LCALL     ?Subroutine32 & 0xFFFF
    356          
    357              if (dstAddr.addrMode == afAddr64Bit)
   \                     ??CrossCallReturnLabel_65:
   \   000050   7403         MOV       A,#0x3
   \   000052   68           XRL       A,R0
   \   000053   701F         JNZ       ??MT_AfDataRequest_2
    358              {
    359                (void)osal_memcpy(dstAddr.addr.extAddr, pBuf, Z_EXTADDR_LEN);
   \   000055                ; Setup parameters for call to function osal_memcpy
   \   000055   85....       MOV       ?V4,?V0
   \   000058   85....       MOV       ?V5,?V1
   \   00005B   75..00       MOV       ?V6,#0x0
   \   00005E   78..         MOV       R0,#?V4
   \   000060   12....       LCALL     ?PUSH_XSTACK_I_THREE
   \   000063   7C08         MOV       R4,#0x8
   \   000065   7D00         MOV       R5,#0x0
   \   000067   7409         MOV       A,#0x9
   \   000069   12....       LCALL     ?XSTACK_DISP101_8
   \   00006C   12....       LCALL     ??Subroutine62_0 & 0xFFFF
    360              }
   \                     ??CrossCallReturnLabel_161:
   \   00006F   12....       LCALL     ?DEALLOC_XSTACK8
   \   000072   800F         SJMP      ??CrossCallReturnLabel_108
    361              else
    362              {
    363                dstAddr.addr.shortAddr = osal_build_uint16( pBuf );
   \                     ??MT_AfDataRequest_2:
   \   000074                ; Setup parameters for call to function osal_build_uint16
   \   000074   AA..         MOV       R2,?V0
   \   000076   AB..         MOV       R3,?V1
   \   000078   12....       LCALL     `??osal_build_uint16::?relay`; Banked call to: osal_build_uint16
   \   00007B   7406         MOV       A,#0x6
   \   00007D   12....       LCALL     ?XSTACK_DISP0_8
   \   000080   12....       LCALL     ??Subroutine57_0 & 0xFFFF
    364              }
    365              pBuf += Z_EXTADDR_LEN;
    366          
    367              dstAddr.endPoint = *pBuf++;
   \                     ??CrossCallReturnLabel_108:
   \   000083   85..82       MOV       DPL,?V0
   \   000086   85..83       MOV       DPH,?V1
   \   000089   A3           INC       DPTR
   \   00008A   A3           INC       DPTR
   \   00008B   A3           INC       DPTR
   \   00008C   A3           INC       DPTR
   \   00008D   A3           INC       DPTR
   \   00008E   A3           INC       DPTR
   \   00008F   A3           INC       DPTR
   \   000090   A3           INC       DPTR
   \   000091   E0           MOVX      A,@DPTR
   \   000092   C0E0         PUSH      A
   \   000094   740F         MOV       A,#0xf
   \   000096   12....       LCALL     ?XSTACK_DISP0_8
   \   000099   D0E0         POP       A
   \   00009B   F0           MOVX      @DPTR,A
   \   00009C   E5..         MOV       A,?V0
   \   00009E   2409         ADD       A,#0x9
   \   0000A0   F5..         MOV       ?V0,A
   \   0000A2   5002         JNC       ??MT_AfDataRequest_3
   \   0000A4   05..         INC       ?V1
    368              dstAddr.panId = osal_build_uint16( pBuf );
   \                     ??MT_AfDataRequest_3:
   \   0000A6                ; Setup parameters for call to function osal_build_uint16
   \   0000A6   FA           MOV       R2,A
   \   0000A7   AB..         MOV       R3,?V1
   \   0000A9   12....       LCALL     `??osal_build_uint16::?relay`; Banked call to: osal_build_uint16
   \   0000AC   7410         MOV       A,#0x10
   \   0000AE   12....       LCALL     ?XSTACK_DISP0_8
   \   0000B1   12....       LCALL     ??Subroutine57_0 & 0xFFFF
    369              pBuf += 2;
   \                     ??CrossCallReturnLabel_109:
   \   0000B4   E5..         MOV       A,?V0
   \   0000B6   2402         ADD       A,#0x2
   \   0000B8   F5..         MOV       ?V0,A
   \   0000BA   5042         JNC       ??MT_AfDataRequest_4
   \   0000BC   05..         INC       ?V1
   \   0000BE   803E         SJMP      ??MT_AfDataRequest_4
    370            }
    371            else
    372            {
    373              /* Destination address */
    374              dstAddr.addrMode = afAddr16Bit;
   \                     ??MT_AfDataRequest_1:
   \   0000C0   740E         MOV       A,#0xe
   \   0000C2   12....       LCALL     ?XSTACK_DISP0_8
   \   0000C5   7402         MOV       A,#0x2
   \   0000C7   F0           MOVX      @DPTR,A
    375              dstAddr.addr.shortAddr = osal_build_uint16( pBuf );
   \   0000C8                ; Setup parameters for call to function osal_build_uint16
   \   0000C8   0A           INC       R2
   \   0000C9   0A           INC       R2
   \   0000CA   0A           INC       R2
   \   0000CB   AB..         MOV       R3,?V1
   \   0000CD   12....       LCALL     `??osal_build_uint16::?relay`; Banked call to: osal_build_uint16
   \   0000D0   7406         MOV       A,#0x6
   \   0000D2   12....       LCALL     ?XSTACK_DISP0_8
   \   0000D5   12....       LCALL     ??Subroutine57_0 & 0xFFFF
    376              pBuf += 2;
    377          
    378              /* Destination endpoint */
    379              dstAddr.endPoint = *pBuf++;
   \                     ??CrossCallReturnLabel_110:
   \   0000D8   85..82       MOV       DPL,?V0
   \   0000DB   85..83       MOV       DPH,?V1
   \   0000DE   A3           INC       DPTR
   \   0000DF   A3           INC       DPTR
   \   0000E0   E0           MOVX      A,@DPTR
   \   0000E1   C0E0         PUSH      A
   \   0000E3   740F         MOV       A,#0xf
   \   0000E5   12....       LCALL     ?XSTACK_DISP0_8
   \   0000E8   D0E0         POP       A
   \   0000EA   F0           MOVX      @DPTR,A
   \   0000EB   E5..         MOV       A,?V0
   \   0000ED   2403         ADD       A,#0x3
   \   0000EF   F5..         MOV       ?V0,A
   \   0000F1   5002         JNC       ??MT_AfDataRequest_5
   \   0000F3   05..         INC       ?V1
    380              dstAddr.panId = 0;
   \                     ??MT_AfDataRequest_5:
   \   0000F5   7410         MOV       A,#0x10
   \   0000F7   12....       LCALL     ?XSTACK_DISP0_8
   \   0000FA   E4           CLR       A
   \   0000FB   F0           MOVX      @DPTR,A
   \   0000FC   A3           INC       DPTR
   \   0000FD   F0           MOVX      @DPTR,A
    381            }
    382          
    383            /* Source endpoint */
    384            epDesc = afFindEndPointDesc(*pBuf++);
   \                     ??MT_AfDataRequest_4:
   \   0000FE                ; Setup parameters for call to function afFindEndPointDesc
   \   0000FE   85..82       MOV       DPL,?V0
   \   000101   85..83       MOV       DPH,?V1
   \   000104   E0           MOVX      A,@DPTR
   \   000105   F9           MOV       R1,A
   \   000106   12....       LCALL     `??afFindEndPointDesc::?relay`; Banked call to: afFindEndPointDesc
   \   000109   7403         MOV       A,#0x3
   \   00010B   12....       LCALL     ?XSTACK_DISP0_8
   \   00010E   EA           MOV       A,R2
   \   00010F   F0           MOVX      @DPTR,A
   \   000110   A3           INC       DPTR
   \   000111   EB           MOV       A,R3
   \   000112   12....       LCALL     ?Subroutine32 & 0xFFFF
    385          
    386            /* ClusterId */
    387            cId = osal_build_uint16( pBuf );
   \                     ??CrossCallReturnLabel_66:
   \   000115                ; Setup parameters for call to function osal_build_uint16
   \   000115   AA..         MOV       R2,?V0
   \   000117   AB..         MOV       R3,?V1
   \   000119   12....       LCALL     `??osal_build_uint16::?relay`; Banked call to: osal_build_uint16
   \   00011C   8A..         MOV       ?V4,R2
   \   00011E   8B..         MOV       ?V5,R3
    388            pBuf +=2;
    389          
    390            /* TransId */
    391            transId = *pBuf++;
   \   000120   85..82       MOV       DPL,?V0
   \   000123   85..83       MOV       DPH,?V1
   \   000126   A3           INC       DPTR
   \   000127   A3           INC       DPTR
   \   000128   E0           MOVX      A,@DPTR
   \   000129   C0E0         PUSH      A
   \   00012B   7402         MOV       A,#0x2
   \   00012D   12....       LCALL     ?XSTACK_DISP0_8
   \   000130   D0E0         POP       A
   \   000132   12....       LCALL     ?Subroutine53 & 0xFFFF
    392          
    393            /* TxOption */
    394            txOpts = *pBuf++;
   \                     ??CrossCallReturnLabel_98:
   \   000135   A3           INC       DPTR
   \   000136   A3           INC       DPTR
   \   000137   E0           MOVX      A,@DPTR
   \   000138   F5..         MOV       ?V7,A
    395          
    396            /* Radius */
    397            radius = *pBuf++;
   \   00013A   85..82       MOV       DPL,?V0
   \   00013D   85..83       MOV       DPH,?V1
   \   000140   A3           INC       DPTR
   \   000141   A3           INC       DPTR
   \   000142   A3           INC       DPTR
   \   000143   A3           INC       DPTR
   \   000144   E0           MOVX      A,@DPTR
   \   000145   F5..         MOV       ?V6,A
   \   000147   E5..         MOV       A,?V0
   \   000149   2405         ADD       A,#0x5
   \   00014B   F5..         MOV       ?V0,A
   \   00014D   5002         JNC       ??MT_AfDataRequest_6
   \   00014F   05..         INC       ?V1
    398          
    399            /* Length */
    400            if (cmd1 == MT_AF_DATA_REQUEST_EXT)
   \                     ??MT_AfDataRequest_6:
   \   000151   7401         MOV       A,#0x1
   \   000153   12....       LCALL     ?XSTACK_DISP0_8
   \   000156   E0           MOVX      A,@DPTR
   \   000157   6402         XRL       A,#0x2
   \   000159   7022         JNZ       ??MT_AfDataRequest_7
    401            {
    402              dataLen = osal_build_uint16( pBuf );
   \   00015B                ; Setup parameters for call to function osal_build_uint16
   \   00015B   AA..         MOV       R2,?V0
   \   00015D   AB..         MOV       R3,?V1
   \   00015F   12....       LCALL     `??osal_build_uint16::?relay`; Banked call to: osal_build_uint16
   \   000162   8A..         MOV       ?V2,R2
   \   000164   8B..         MOV       ?V3,R3
   \   000166   AE..         MOV       R6,?V2
   \   000168   AF..         MOV       R7,?V3
    403              tempLen = dataLen + MT_AF_REQ_MSG_LEN + MT_AF_REQ_MSG_EXT;
   \   00016A   EA           MOV       A,R2
   \   00016B   2414         ADD       A,#0x14
   \   00016D   F8           MOV       R0,A
   \   00016E   E4           CLR       A
   \   00016F   3F           ADDC      A,R7
   \   000170   F9           MOV       R1,A
    404              pBuf += 2;
   \   000171   E5..         MOV       A,?V0
   \   000173   2402         ADD       A,#0x2
   \   000175   F5..         MOV       ?V0,A
   \   000177   501C         JNC       ??MT_AfDataRequest_8
   \   000179   05..         INC       ?V1
   \   00017B   8018         SJMP      ??MT_AfDataRequest_8
    405            }
    406            else
    407            {
    408              dataLen = *pBuf++;
   \                     ??MT_AfDataRequest_7:
   \   00017D   85..82       MOV       DPL,?V0
   \   000180   85..83       MOV       DPH,?V1
   \   000183   E0           MOVX      A,@DPTR
   \   000184   FE           MOV       R6,A
   \   000185   7F00         MOV       R7,#0x0
   \   000187   A3           INC       DPTR
   \   000188   8582..       MOV       ?V0,DPL
   \   00018B   8583..       MOV       ?V1,DPH
    409              tempLen = dataLen + MT_AF_REQ_MSG_LEN;
   \   00018E   240A         ADD       A,#0xa
   \   000190   F8           MOV       R0,A
   \   000191   E4           CLR       A
   \   000192   3400         ADDC      A,#0x0
   \   000194   F9           MOV       R1,A
    410            }
    411          
    412            if ( epDesc == NULL )
   \                     ??MT_AfDataRequest_8:
   \   000195   7403         MOV       A,#0x3
   \   000197   12....       LCALL     ?XSTACK_DISP0_8
   \   00019A   12....       LCALL     ??Subroutine60_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_139:
   \   00019D   EA           MOV       A,R2
   \   00019E   4B           ORL       A,R3
   \   00019F   6011         JZ        ??MT_AfDataRequest_9
    413            {
    414              retValue = afStatus_INVALID_PARAMETER;
    415            }
    416            else if (tempLen > (uint16)MT_RPC_DATA_MAX)
   \   0001A1   C3           CLR       C
   \   0001A2   E8           MOV       A,R0
   \   0001A3   94FB         SUBB      A,#-0x5
   \   0001A5   E9           MOV       A,R1
   \   0001A6   9400         SUBB      A,#0x0
   \   0001A8   5003         JNC       $+5
   \   0001AA   02....       LJMP      ??MT_AfDataRequest_10 & 0xFFFF
    417            {
    418              if (pMtAfDataReq != NULL)
   \   0001AD   12....       LCALL     ?Subroutine3 & 0xFFFF
   \                     ??CrossCallReturnLabel_153:
   \   0001B0   600B         JZ        ??MT_AfDataRequest_11
    419              {
    420                retValue = afStatus_INVALID_PARAMETER;
   \                     ??MT_AfDataRequest_9:
   \   0001B2   85..82       MOV       DPL,?XSP + 0
   \   0001B5   85..83       MOV       DPH,?XSP + 1
   \   0001B8   7402         MOV       A,#0x2
   \   0001BA   02....       LJMP      ??MT_AfDataRequest_12 & 0xFFFF
    421              }
    422              else if ((pMtAfDataReq = osal_mem_alloc(sizeof(mtAfDataReq_t) + dataLen)) == NULL)
   \                     ??MT_AfDataRequest_11:
   \   0001BD                ; Setup parameters for call to function osal_mem_alloc
   \   0001BD   EE           MOV       A,R6
   \   0001BE   2418         ADD       A,#0x18
   \   0001C0   FA           MOV       R2,A
   \   0001C1   E4           CLR       A
   \   0001C2   3F           ADDC      A,R7
   \   0001C3   FB           MOV       R3,A
   \   0001C4   12....       LCALL     `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
   \   0001C7   90....       MOV       DPTR,#pMtAfDataReq
   \   0001CA   12....       LCALL     ??Subroutine57_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_111:
   \   0001CD   F9           MOV       R1,A
   \   0001CE   EA           MOV       A,R2
   \   0001CF   49           ORL       A,R1
   \   0001D0   85..82       MOV       DPL,?XSP + 0
   \   0001D3   85..83       MOV       DPH,?XSP + 1
   \   0001D6   7005         JNZ       ??MT_AfDataRequest_13
    423              {
    424                retValue = afStatus_MEM_FAIL;
   \   0001D8   7410         MOV       A,#0x10
   \   0001DA   02....       LJMP      ??MT_AfDataRequest_12 & 0xFFFF
    425              }
    426              else
    427              {
    428                retValue = afStatus_SUCCESS;
   \                     ??MT_AfDataRequest_13:
   \   0001DD   E4           CLR       A
   \   0001DE   F0           MOVX      @DPTR,A
    429          
    430                pMtAfDataReq->data = (uint8 *)(pMtAfDataReq+1);
   \   0001DF   90....       MOV       DPTR,#pMtAfDataReq
   \   0001E2   E0           MOVX      A,@DPTR
   \   0001E3   2418         ADD       A,#0x18
   \   0001E5   FA           MOV       R2,A
   \   0001E6   A3           INC       DPTR
   \   0001E7   E0           MOVX      A,@DPTR
   \   0001E8   3400         ADDC      A,#0x0
   \   0001EA   FB           MOV       R3,A
   \   0001EB   90....       MOV       DPTR,#pMtAfDataReq
   \   0001EE   12....       LCALL     ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_18:
   \   0001F1   12....       LCALL     ??Subroutine57_0 & 0xFFFF
    431                (void)osal_memcpy(&(pMtAfDataReq->dstAddr), &dstAddr, sizeof(afAddrType_t));
   \                     ??CrossCallReturnLabel_112:
   \   0001F4                ; Setup parameters for call to function osal_memcpy
   \   0001F4   7406         MOV       A,#0x6
   \   0001F6   12....       LCALL     ?XSTACK_DISP100_8
   \   0001F9   88..         MOV       ?V0,R0
   \   0001FB   89..         MOV       ?V1,R1
   \   0001FD   75..00       MOV       ?V2,#0x0
   \   000200   78..         MOV       R0,#?V0
   \   000202   12....       LCALL     ?PUSH_XSTACK_I_THREE
   \   000205   7C0C         MOV       R4,#0xc
   \   000207   7D00         MOV       R5,#0x0
   \   000209   12....       LCALL     ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_48:
   \   00020C   12....       LCALL     ??Subroutine62_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_162:
   \   00020F   12....       LCALL     ?DEALLOC_XSTACK8
    432                pMtAfDataReq->epDesc = epDesc;
   \   000212   7403         MOV       A,#0x3
   \   000214   12....       LCALL     ?XSTACK_DISP0_8
   \   000217   12....       LCALL     ??Subroutine60_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_140:
   \   00021A   90....       MOV       DPTR,#pMtAfDataReq
   \   00021D   12....       LCALL     ??Subroutine59_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_125:
   \   000220   240E         ADD       A,#0xe
   \   000222   F582         MOV       DPL,A
   \   000224   E4           CLR       A
   \   000225   38           ADDC      A,R0
   \   000226   12....       LCALL     ?Subroutine33 & 0xFFFF
    433                pMtAfDataReq->cId = cId;
   \                     ??CrossCallReturnLabel_119:
   \   000229   90....       MOV       DPTR,#pMtAfDataReq
   \   00022C   12....       LCALL     ??Subroutine59_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_126:
   \   00022F   2410         ADD       A,#0x10
   \   000231   F582         MOV       DPL,A
   \   000233   E4           CLR       A
   \   000234   38           ADDC      A,R0
   \   000235   F583         MOV       DPH,A
   \   000237   E5..         MOV       A,?V4
   \   000239   F0           MOVX      @DPTR,A
   \   00023A   A3           INC       DPTR
   \   00023B   E5..         MOV       A,?V5
   \   00023D   F0           MOVX      @DPTR,A
    434                pMtAfDataReq->dataLen = dataLen;
   \   00023E   90....       MOV       DPTR,#pMtAfDataReq
   \   000241   12....       LCALL     ??Subroutine59_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_127:
   \   000244   2412         ADD       A,#0x12
   \   000246   F582         MOV       DPL,A
   \   000248   E4           CLR       A
   \   000249   38           ADDC      A,R0
   \   00024A   F583         MOV       DPH,A
   \   00024C   EE           MOV       A,R6
   \   00024D   F0           MOVX      @DPTR,A
   \   00024E   A3           INC       DPTR
   \   00024F   EF           MOV       A,R7
   \   000250   F0           MOVX      @DPTR,A
    435                pMtAfDataReq->transId = transId;
   \   000251   7402         MOV       A,#0x2
   \   000253   12....       LCALL     ?XSTACK_DISP0_8
   \   000256   E0           MOVX      A,@DPTR
   \   000257   C0E0         PUSH      A
   \   000259   90....       MOV       DPTR,#pMtAfDataReq
   \   00025C   12....       LCALL     ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_26:
   \   00025F   D0E0         POP       A
   \   000261   F0           MOVX      @DPTR,A
    436                pMtAfDataReq->txOpts = txOpts;
   \   000262   90....       MOV       DPTR,#pMtAfDataReq
   \   000265   12....       LCALL     ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_28:
   \   000268   E5..         MOV       A,?V7
   \   00026A   F0           MOVX      @DPTR,A
    437                pMtAfDataReq->radius = radius;
   \   00026B   90....       MOV       DPTR,#pMtAfDataReq
   \   00026E   12....       LCALL     ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_30:
   \   000271   E5..         MOV       A,?V6
   \   000273   12....       LCALL     ?Subroutine14 & 0xFFFF
    438          
    439                // Setup to time-out the huge outgoing item if host does not MT_AF_DATA_STORE it.
    440                pMtAfDataReq->tick = MT_AF_EXEC_CNT;
   \                     ??CrossCallReturnLabel_24:
   \   000276   740F         MOV       A,#0xf
   \   000278   F0           MOVX      @DPTR,A
    441                if (ZSuccess != osal_start_timerEx(MT_TaskID, MT_AF_EXEC_EVT, MT_AF_EXEC_DLY))
   \   000279                ; Setup parameters for call to function osal_start_timerEx
   \   000279   90....       MOV       DPTR,#__Constant_3e8
   \   00027C   12....       LCALL     ?PUSH_XSTACK8_X_FOUR
   \   00027F   12....       LCALL     ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_37:
   \   000282   12....       LCALL     ?DEALLOC_XSTACK8
   \   000285   E9           MOV       A,R1
   \   000286   604E         JZ        ??MT_AfDataRequest_14
    442                {
    443                  (void)osal_set_event(MT_TaskID, MT_AF_EXEC_EVT);
   \   000288                ; Setup parameters for call to function osal_set_event
   \   000288   12....       LCALL     ?Subroutine26 & 0xFFFF
    444                }
    445              }
    446            }
   \                     ??CrossCallReturnLabel_51:
   \   00028B   8049         SJMP      ??MT_AfDataRequest_14
    447            else
    448            {
    449              retValue = AF_DataRequest(&dstAddr, epDesc, cId, dataLen, pBuf, &transId, txOpts, radius);
   \                     ??MT_AfDataRequest_10:
   \   00028D                ; Setup parameters for call to function AF_DataRequest
   \   00028D   E5..         MOV       A,?V6
   \   00028F   F5..         MOV       ?V2,A
   \   000291   78..         MOV       R0,#?V2
   \   000293   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   000296   7403         MOV       A,#0x3
   \   000298   12....       LCALL     ?XSTACK_DISP100_8
   \   00029B   88..         MOV       ?V2,R0
   \   00029D   89..         MOV       ?V3,R1
   \   00029F   78..         MOV       R0,#?V2
   \   0002A1   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   0002A4   78..         MOV       R0,#?V0
   \   0002A6   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   0002A9   8E..         MOV       ?V0,R6
   \   0002AB   8F..         MOV       ?V1,R7
   \   0002AD   78..         MOV       R0,#?V0
   \   0002AF   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   0002B2   78..         MOV       R0,#?V4
   \   0002B4   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   0002B7   A9..         MOV       R1,?V7
   \   0002B9   740C         MOV       A,#0xc
   \   0002BB   12....       LCALL     ?XSTACK_DISP0_8
   \   0002BE   12....       LCALL     ?Subroutine22 & 0xFFFF
    450            }
   \                     ??CrossCallReturnLabel_39:
   \   0002C1   740F         MOV       A,#0xf
   \   0002C3   12....       LCALL     ?XSTACK_DISP101_8
   \   0002C6   12....       LCALL     `??AF_DataRequest::?relay`; Banked call to: AF_DataRequest
   \   0002C9   7409         MOV       A,#0x9
   \   0002CB   12....       LCALL     ?DEALLOC_XSTACK8
   \   0002CE   E9           MOV       A,R1
   \   0002CF   85..82       MOV       DPL,?XSP + 0
   \   0002D2   85..83       MOV       DPH,?XSP + 1
   \                     ??MT_AfDataRequest_12:
   \   0002D5   F0           MOVX      @DPTR,A
    451          
    452            if (MT_RPC_CMD_SREQ == (cmd0 & MT_RPC_CMD_TYPE_MASK))
   \                     ??MT_AfDataRequest_14:
   \   0002D6   7405         MOV       A,#0x5
   \   0002D8   12....       LCALL     ?XSTACK_DISP0_8
   \   0002DB   E0           MOVX      A,@DPTR
   \   0002DC   54E0         ANL       A,#0xe0
   \   0002DE   6420         XRL       A,#0x20
   \   0002E0   700D         JNZ       ??CrossCallReturnLabel_53
    453            {
    454              MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP|(uint8)MT_RPC_SYS_AF), cmd1, 1, &retValue);
   \   0002E2                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0002E2   AC..         MOV       R4,?XSP + 0
   \   0002E4   AD..         MOV       R5,?XSP + 1
   \   0002E6   7B01         MOV       R3,#0x1
   \   0002E8   EB           MOV       A,R3
   \   0002E9   12....       LCALL     ?XSTACK_DISP0_8
   \   0002EC   12....       LCALL     ?Subroutine27 & 0xFFFF
    455            }
    456          }
   \                     ??CrossCallReturnLabel_53:
   \   0002EF   7412         MOV       A,#0x12
   \   0002F1                REQUIRE ?Subroutine1
   \   0002F1                ; // Fall through to label ?Subroutine1

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine1:
   \   000000   12....       LCALL     ?DEALLOC_XSTACK8
   \   000003   7F08         MOV       R7,#0x8
   \   000005   02....       LJMP      ?BANKED_LEAVE_XDATA

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine32:
   \   000000   12....       LCALL     ?Subroutine53 & 0xFFFF
   \                     ??CrossCallReturnLabel_99:
   \   000003   8582..       MOV       ?V0,DPL
   \   000006   8583..       MOV       ?V1,DPH
   \   000009   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine53:
   \   000000   F0           MOVX      @DPTR,A
   \   000001   85..82       MOV       DPL,?V0
   \   000004   85..83       MOV       DPH,?V1
   \   000007   A3           INC       DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine41:
   \   000000   12....       LCALL     ?Subroutine51 & 0xFFFF
   \                     ??CrossCallReturnLabel_94:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine33:
   \   000000   F583         MOV       DPH,A
   \   000002                REQUIRE ??Subroutine57_0
   \   000002                ; // Fall through to label ??Subroutine57_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine57_0:
   \   000000   EA           MOV       A,R2
   \   000001   F0           MOVX      @DPTR,A
   \   000002   A3           INC       DPTR
   \   000003   EB           MOV       A,R3
   \   000004   F0           MOVX      @DPTR,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine27:
   \   000000   E0           MOVX      A,@DPTR
   \   000001   FA           MOV       R2,A
   \   000002   7964         MOV       R1,#0x64
   \   000004   12....       LCALL     `??MT_BuildAndSendZToolResponse::?relay`; Banked call to: MT_BuildAndSendZToolResponse
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine55:
   \   000000   F0           MOVX      @DPTR,A
   \   000001   8A82         MOV       DPL,R2
   \   000003   8B83         MOV       DPH,R3
   \   000005   A3           INC       DPTR
   \   000006   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine51:
   \   000000   12....       LCALL     ?Subroutine55 & 0xFFFF
   \                     ??CrossCallReturnLabel_104:
   \   000003   A3           INC       DPTR
   \   000004   E0           MOVX      A,@DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine22:
   \   000000   E0           MOVX      A,@DPTR
   \   000001   FC           MOV       R4,A
   \   000002   A3           INC       DPTR
   \   000003   E0           MOVX      A,@DPTR
   \   000004   FD           MOV       R5,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine59_0:
   \   000000   12....       LCALL     ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_137:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine17:
   \   000000   12....       LCALL     ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_136:
   \   000003   2416         ADD       A,#0x16
   \   000005   F582         MOV       DPL,A
   \   000007   E4           CLR       A
   \   000008   38           ADDC      A,R0
   \   000009   F583         MOV       DPH,A
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine16:
   \   000000   12....       LCALL     ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_135:
   \   000003   2415         ADD       A,#0x15
   \   000005   F582         MOV       DPL,A
   \   000007   E4           CLR       A
   \   000008   38           ADDC      A,R0
   \   000009   F583         MOV       DPH,A
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine15:
   \   000000   12....       LCALL     ?Subroutine48 & 0xFFFF
   \                     ??CrossCallReturnLabel_134:
   \   000003   2414         ADD       A,#0x14
   \   000005   F582         MOV       DPL,A
   \   000007   E4           CLR       A
   \   000008   38           ADDC      A,R0
   \   000009   F583         MOV       DPH,A
   \   00000B   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine12:
   \   000000   12....       LCALL     ?Subroutine45 & 0xFFFF
   \                     ??CrossCallReturnLabel_86:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine45:
   \   000000   E0           MOVX      A,@DPTR
   \   000001   F8           MOV       R0,A
   \   000002   A3           INC       DPTR
   \   000003   E0           MOVX      A,@DPTR
   \   000004   F583         MOV       DPH,A
   \   000006   8882         MOV       DPL,R0
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine62_0:
   \   000000   12....       LCALL     `??osal_memcpy::?relay`; Banked call to: osal_memcpy
   \   000003   7403         MOV       A,#0x3
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine25:
   \   000000   90....       MOV       DPTR,#pMtAfDataReq
   \   000003   E0           MOVX      A,@DPTR
   \   000004   2402         ADD       A,#0x2
   \   000006   FA           MOV       R2,A
   \   000007   A3           INC       DPTR
   \   000008   E0           MOVX      A,@DPTR
   \   000009   3400         ADDC      A,#0x0
   \   00000B   FB           MOV       R3,A
   \   00000C   22           RET
    457          
    458          #if defined( ZIGBEEPRO )
    459          /***************************************************************************************************
    460           * @fn      MT_AfDataRequestSrcRtg
    461           *
    462           * @brief   Process AF Register command
    463           *
    464           * @param   pBuf - pointer to the received buffer
    465           *
    466           * @return  none
    467           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    468          static void MT_AfDataRequestSrcRtg(uint8 *pBuf)
   \                     MT_AfDataRequestSrcRtg:
    469          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000   74F0         MOV       A,#-0x10
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 19
   \   000005   74ED         MOV       A,#-0x13
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
   \   00000A   EB           MOV       A,R3
   \   00000B   FF           MOV       R7,A
    470            uint8 cmdId, dataLen = 0;
    471            uint8 retValue = ZFailure;
   \   00000C   85..82       MOV       DPL,?XSP + 0
   \   00000F   85..83       MOV       DPH,?XSP + 1
   \   000012   7401         MOV       A,#0x1
   \   000014   12....       LCALL     ?Subroutine41 & 0xFFFF
    472            endPointDesc_t *epDesc;
    473            byte transId;
    474            afAddrType_t dstAddr;
    475            cId_t cId;
    476            byte txOpts, radius, srcEP, relayCnt;
    477            uint16 *pRelayList;
    478            uint8 i;
    479          
    480            /* parse header */
    481            cmdId = pBuf[MT_RPC_POS_CMD1];
   \                     ??CrossCallReturnLabel_79:
   \   000017   C0E0         PUSH      A
   \   000019   7404         MOV       A,#0x4
   \   00001B   12....       LCALL     ?XSTACK_DISP0_8
   \   00001E   D0E0         POP       A
   \   000020   F0           MOVX      @DPTR,A
    482            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000021   EA           MOV       A,R2
   \   000022   2403         ADD       A,#0x3
   \   000024   FE           MOV       R6,A
   \   000025   5001         JNC       ??MT_AfDataRequestSrcRtg_0
   \   000027   0F           INC       R7
    483          
    484            /* Destination address */
    485            /* Initialize the panID field to zero to avoid inter-pan */
    486            osal_memset( &dstAddr, 0, sizeof(afAddrType_t) );
   \                     ??MT_AfDataRequestSrcRtg_0:
   \   000028                ; Setup parameters for call to function osal_memset
   \   000028   7C0C         MOV       R4,#0xc
   \   00002A   7D00         MOV       R5,#0x0
   \   00002C   7900         MOV       R1,#0x0
   \   00002E   7407         MOV       A,#0x7
   \   000030   12....       LCALL     ?XSTACK_DISP101_8
   \   000033   12....       LCALL     `??osal_memset::?relay`; Banked call to: osal_memset
    487            dstAddr.addrMode = afAddr16Bit;
   \   000036   740F         MOV       A,#0xf
   \   000038   12....       LCALL     ?XSTACK_DISP0_8
   \   00003B   7402         MOV       A,#0x2
   \   00003D   F0           MOVX      @DPTR,A
    488            dstAddr.addr.shortAddr = osal_build_uint16( pBuf );
   \   00003E                ; Setup parameters for call to function osal_build_uint16
   \   00003E   EE           MOV       A,R6
   \   00003F   FA           MOV       R2,A
   \   000040   EF           MOV       A,R7
   \   000041   FB           MOV       R3,A
   \   000042   12....       LCALL     `??osal_build_uint16::?relay`; Banked call to: osal_build_uint16
   \   000045   7407         MOV       A,#0x7
   \   000047   12....       LCALL     ?XSTACK_DISP0_8
   \   00004A   12....       LCALL     ??Subroutine57_0 & 0xFFFF
    489            pBuf += 2;
    490          
    491            /* Destination endpoint */
    492            dstAddr.endPoint = *pBuf++;
   \                     ??CrossCallReturnLabel_113:
   \   00004D   8E82         MOV       DPL,R6
   \   00004F   8F83         MOV       DPH,R7
   \   000051   A3           INC       DPTR
   \   000052   A3           INC       DPTR
   \   000053   E0           MOVX      A,@DPTR
   \   000054   C0E0         PUSH      A
   \   000056   7410         MOV       A,#0x10
   \   000058   12....       LCALL     ?XSTACK_DISP0_8
   \   00005B   D0E0         POP       A
   \   00005D   12....       LCALL     ?Subroutine39 & 0xFFFF
    493          
    494            /* Source endpoint */
    495            srcEP = *pBuf++;
   \                     ??CrossCallReturnLabel_74:
   \   000060   F9           MOV       R1,A
   \   000061   EE           MOV       A,R6
   \   000062   2404         ADD       A,#0x4
   \   000064   FE           MOV       R6,A
   \   000065   5001         JNC       ??MT_AfDataRequestSrcRtg_1
   \   000067   0F           INC       R7
    496            epDesc = afFindEndPointDesc( srcEP );
   \                     ??MT_AfDataRequestSrcRtg_1:
   \   000068                ; Setup parameters for call to function afFindEndPointDesc
   \   000068   12....       LCALL     `??afFindEndPointDesc::?relay`; Banked call to: afFindEndPointDesc
   \   00006B   7405         MOV       A,#0x5
   \   00006D   12....       LCALL     ?XSTACK_DISP0_8
   \   000070   12....       LCALL     ??Subroutine57_0 & 0xFFFF
    497          
    498            /* ClusterId */
    499            cId = osal_build_uint16( pBuf );
   \                     ??CrossCallReturnLabel_114:
   \   000073                ; Setup parameters for call to function osal_build_uint16
   \   000073   EE           MOV       A,R6
   \   000074   FA           MOV       R2,A
   \   000075   EF           MOV       A,R7
   \   000076   FB           MOV       R3,A
   \   000077   12....       LCALL     `??osal_build_uint16::?relay`; Banked call to: osal_build_uint16
   \   00007A   8A..         MOV       ?V0,R2
   \   00007C   8B..         MOV       ?V1,R3
    500            pBuf +=2;
    501          
    502            /* TransId */
    503            transId = *pBuf++;
   \   00007E   8E82         MOV       DPL,R6
   \   000080   8F83         MOV       DPH,R7
   \   000082   A3           INC       DPTR
   \   000083   A3           INC       DPTR
   \   000084   E0           MOVX      A,@DPTR
   \   000085   C0E0         PUSH      A
   \   000087   7401         MOV       A,#0x1
   \   000089   12....       LCALL     ?XSTACK_DISP0_8
   \   00008C   D0E0         POP       A
   \   00008E   12....       LCALL     ?Subroutine39 & 0xFFFF
    504          
    505            /* TxOption */
    506            txOpts = *pBuf++;
   \                     ??CrossCallReturnLabel_75:
   \   000091   C0E0         PUSH      A
   \   000093   7403         MOV       A,#0x3
   \   000095   12....       LCALL     ?XSTACK_DISP0_8
   \   000098   D0E0         POP       A
   \   00009A   12....       LCALL     ?Subroutine40 & 0xFFFF
    507          
    508            /* Radius */
    509            radius = *pBuf++;
   \                     ??CrossCallReturnLabel_76:
   \   00009D   E0           MOVX      A,@DPTR
   \   00009E   C0E0         PUSH      A
   \   0000A0   7402         MOV       A,#0x2
   \   0000A2   12....       LCALL     ?XSTACK_DISP0_8
   \   0000A5   D0E0         POP       A
   \   0000A7   12....       LCALL     ?Subroutine40 & 0xFFFF
    510          
    511            /* Source route relay count */
    512            relayCnt = *pBuf++;
   \                     ??CrossCallReturnLabel_77:
   \   0000AA   A3           INC       DPTR
   \   0000AB   E0           MOVX      A,@DPTR
   \   0000AC   F5..         MOV       ?V2,A
   \   0000AE   EE           MOV       A,R6
   \   0000AF   2406         ADD       A,#0x6
   \   0000B1   FE           MOV       R6,A
   \   0000B2   5001         JNC       ??MT_AfDataRequestSrcRtg_2
   \   0000B4   0F           INC       R7
    513          
    514            /* Convert the source route relay list */
    515            if( (pRelayList = osal_mem_alloc( relayCnt * sizeof( uint16 ))) != NULL )
   \                     ??MT_AfDataRequestSrcRtg_2:
   \   0000B5                ; Setup parameters for call to function osal_mem_alloc
   \   0000B5   AA..         MOV       R2,?V2
   \   0000B7   EA           MOV       A,R2
   \   0000B8   2A           ADD       A,R2
   \   0000B9   FA           MOV       R2,A
   \   0000BA   E4           CLR       A
   \   0000BB   33           RLC       A
   \   0000BC   12....       LCALL     ?Subroutine44 & 0xFFFF
   \                     ??CrossCallReturnLabel_82:
   \   0000BF   7003         JNZ       $+5
   \   0000C1   02....       LJMP      ??MT_AfDataRequestSrcRtg_3 & 0xFFFF
    516            {
    517              for( i = 0; i < relayCnt; i++ )
   \   0000C4   75..00       MOV       ?V3,#0x0
   \   0000C7   8023         SJMP      ??MT_AfDataRequestSrcRtg_4
    518              {
    519                pRelayList[i] = osal_build_uint16( pBuf );
   \                     ??MT_AfDataRequestSrcRtg_5:
   \   0000C9                ; Setup parameters for call to function osal_build_uint16
   \   0000C9   EE           MOV       A,R6
   \   0000CA   FA           MOV       R2,A
   \   0000CB   EF           MOV       A,R7
   \   0000CC   FB           MOV       R3,A
   \   0000CD   12....       LCALL     `??osal_build_uint16::?relay`; Banked call to: osal_build_uint16
   \   0000D0   A8..         MOV       R0,?V3
   \   0000D2   E8           MOV       A,R0
   \   0000D3   28           ADD       A,R0
   \   0000D4   F8           MOV       R0,A
   \   0000D5   E4           CLR       A
   \   0000D6   33           RLC       A
   \   0000D7   F9           MOV       R1,A
   \   0000D8   E5..         MOV       A,?V6
   \   0000DA   28           ADD       A,R0
   \   0000DB   F582         MOV       DPL,A
   \   0000DD   E5..         MOV       A,?V7
   \   0000DF   39           ADDC      A,R1
   \   0000E0   12....       LCALL     ?Subroutine33 & 0xFFFF
    520                pBuf += 2;
   \                     ??CrossCallReturnLabel_120:
   \   0000E3   EE           MOV       A,R6
   \   0000E4   2402         ADD       A,#0x2
   \   0000E6   FE           MOV       R6,A
   \   0000E7   5001         JNC       ??MT_AfDataRequestSrcRtg_6
   \   0000E9   0F           INC       R7
    521              }
   \                     ??MT_AfDataRequestSrcRtg_6:
   \   0000EA   05..         INC       ?V3
   \                     ??MT_AfDataRequestSrcRtg_4:
   \   0000EC   E5..         MOV       A,?V3
   \   0000EE   C3           CLR       C
   \   0000EF   95..         SUBB      A,?V2
   \   0000F1   40D6         JC        ??MT_AfDataRequestSrcRtg_5
    522          
    523              /* Data payload Length */
    524              dataLen = *pBuf++;
   \   0000F3   8E82         MOV       DPL,R6
   \   0000F5   8F83         MOV       DPH,R7
   \   0000F7   E0           MOVX      A,@DPTR
   \   0000F8   FA           MOV       R2,A
   \   0000F9   A3           INC       DPTR
   \   0000FA   AE82         MOV       R6,DPL
   \   0000FC   AF83         MOV       R7,DPH
    525          
    526              if ( epDesc == NULL )
   \   0000FE   7405         MOV       A,#0x5
   \   000100   12....       LCALL     ?XSTACK_DISP0_8
   \   000103   12....       LCALL     ??Subroutine61_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_145:
   \   000106   700A         JNZ       ??MT_AfDataRequestSrcRtg_7
    527              {
    528                retValue = afStatus_INVALID_PARAMETER;
   \   000108   85..82       MOV       DPL,?XSP + 0
   \   00010B   85..83       MOV       DPH,?XSP + 1
   \   00010E   7402         MOV       A,#0x2
   \   000110   8061         SJMP      ??MT_AfDataRequestSrcRtg_8
    529              }
    530              else
    531              {
    532                retValue = AF_DataRequestSrcRtg( &dstAddr, epDesc, cId, dataLen, pBuf,
    533                                               &transId, txOpts, radius, relayCnt, pRelayList );
   \                     ??MT_AfDataRequestSrcRtg_7:
   \   000112                ; Setup parameters for call to function AF_DataRequestSrcRtg
   \   000112   78..         MOV       R0,#?V6
   \   000114   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000117   78..         MOV       R0,#?V2
   \   000119   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   00011C   7405         MOV       A,#0x5
   \   00011E   12....       LCALL     ?XSTACK_DISP0_8
   \   000121   E0           MOVX      A,@DPTR
   \   000122   F5..         MOV       ?V2,A
   \   000124   78..         MOV       R0,#?V2
   \   000126   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   000129   7405         MOV       A,#0x5
   \   00012B   12....       LCALL     ?XSTACK_DISP100_8
   \   00012E   88..         MOV       ?V2,R0
   \   000130   89..         MOV       ?V3,R1
   \   000132   78..         MOV       R0,#?V2
   \   000134   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000137   8E..         MOV       ?V2,R6
   \   000139   8F..         MOV       ?V3,R7
   \   00013B   78..         MOV       R0,#?V2
   \   00013D   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000140   EA           MOV       A,R2
   \   000141   F5..         MOV       ?V2,A
   \   000143   75..00       MOV       ?V3,#0x0
   \   000146   78..         MOV       R0,#?V2
   \   000148   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00014B   78..         MOV       R0,#?V0
   \   00014D   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000150   740F         MOV       A,#0xf
   \   000152   12....       LCALL     ?XSTACK_DISP0_8
   \   000155   E0           MOVX      A,@DPTR
   \   000156   F9           MOV       R1,A
   \   000157   7411         MOV       A,#0x11
   \   000159   12....       LCALL     ?XSTACK_DISP0_8
   \   00015C   12....       LCALL     ?Subroutine22 & 0xFFFF
    534              }
   \                     ??CrossCallReturnLabel_40:
   \   00015F   7413         MOV       A,#0x13
   \   000161   12....       LCALL     ?XSTACK_DISP101_8
   \   000164   12....       LCALL     `??AF_DataRequestSrcRtg::?relay`; Banked call to: AF_DataRequestSrcRtg
   \   000167   740C         MOV       A,#0xc
   \   000169   12....       LCALL     ?DEALLOC_XSTACK8
   \   00016C   E9           MOV       A,R1
   \   00016D   85..82       MOV       DPL,?XSP + 0
   \   000170   85..83       MOV       DPH,?XSP + 1
   \                     ??MT_AfDataRequestSrcRtg_8:
   \   000173   F0           MOVX      @DPTR,A
    535          
    536              /* Free the memory allocated */
    537              osal_mem_free( pRelayList );
   \   000174                ; Setup parameters for call to function osal_mem_free
   \   000174   AA..         MOV       R2,?V6
   \   000176   AB..         MOV       R3,?V7
   \   000178   12....       LCALL     `??osal_mem_free::?relay`; Banked call to: osal_mem_free
   \   00017B   8009         SJMP      ??MT_AfDataRequestSrcRtg_9
    538            }
    539            else
    540            {
    541              retValue = afStatus_MEM_FAIL;
   \                     ??MT_AfDataRequestSrcRtg_3:
   \   00017D   85..82       MOV       DPL,?XSP + 0
   \   000180   85..83       MOV       DPH,?XSP + 1
   \   000183   7410         MOV       A,#0x10
   \   000185   F0           MOVX      @DPTR,A
    542            }
    543          
    544          
    545            /* Build and send back the response */
    546            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF), cmdId, 1, &retValue);
   \                     ??MT_AfDataRequestSrcRtg_9:
   \   000186                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000186   AC..         MOV       R4,?XSP + 0
   \   000188   AD..         MOV       R5,?XSP + 1
   \   00018A   7B01         MOV       R3,#0x1
   \   00018C   7404         MOV       A,#0x4
   \   00018E   12....       LCALL     ?XSTACK_DISP0_8
   \   000191   12....       LCALL     ?Subroutine27 & 0xFFFF
    547          }
   \                     ??CrossCallReturnLabel_54:
   \   000194   7413         MOV       A,#0x13
   \   000196   02....       LJMP      ?Subroutine1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine40:
   \   000000   12....       LCALL     ?Subroutine54 & 0xFFFF
   \                     ??CrossCallReturnLabel_100:
   \   000003   A3           INC       DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine39:
   \   000000   12....       LCALL     ?Subroutine54 & 0xFFFF
   \                     ??CrossCallReturnLabel_101:
   \   000003   E0           MOVX      A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine54:
   \   000000   F0           MOVX      @DPTR,A
   \   000001   8E82         MOV       DPL,R6
   \   000003   8F83         MOV       DPH,R7
   \   000005   A3           INC       DPTR
   \   000006   A3           INC       DPTR
   \   000007   A3           INC       DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine44:
   \   000000   FB           MOV       R3,A
   \   000001   12....       LCALL     `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
   \   000004   8A..         MOV       ?V6,R2
   \   000006   8B..         MOV       ?V7,R3
   \   000008   EA           MOV       A,R2
   \   000009   4B           ORL       A,R3
   \   00000A   22           RET
    548          #endif
    549          
    550          #if defined INTER_PAN
    551          /***************************************************************************************************
    552           * @fn      MT_AfInterPanCtl
    553           *
    554           * @brief   Process the AF Inter Pan control command.
    555           *
    556           * @param   pBuf - pointer to the received buffer
    557           *
    558           * @return  none
    559           ***************************************************************************************************/
    560          static void MT_AfInterPanCtl(uint8 *pBuf)
    561          {
    562            uint8 cmd, rtrn;
    563            uint16 panId;
    564            endPointDesc_t *pEP;
    565          
    566            cmd = pBuf[MT_RPC_POS_CMD1];
    567            pBuf += MT_RPC_FRAME_HDR_SZ;
    568          
    569            switch (*pBuf++)  // Inter-pan request parameter.
    570            {
    571            case InterPanClr:
    572              rtrn = StubAPS_SetIntraPanChannel();           // Switch channel back to the NIB channel.
    573              break;
    574          
    575            case InterPanSet:
    576              rtrn = StubAPS_SetInterPanChannel(*pBuf);      // Set channel for inter-pan communication.
    577              break;
    578          
    579            case InterPanReg:
    580              if ((pEP = afFindEndPointDesc(*pBuf)))
    581              {
    582                StubAPS_RegisterApp(pEP);
    583                rtrn = SUCCESS;
    584              }
    585              else
    586              {
    587                rtrn = FAILURE;
    588              }
    589              break;
    590          
    591            case InterPanChk:
    592              panId = osal_build_uint16( pBuf );
    593              rtrn = (StubAPS_InterPan(panId, pBuf[2])) ? ZSuccess : ZFailure;
    594              break;
    595          
    596            default:
    597              rtrn = afStatus_INVALID_PARAMETER;
    598              break;
    599            }
    600          
    601            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF), cmd, 1, &rtrn);
    602          }
    603          #endif
    604          
    605          /***************************************************************************************************
    606           * @fn      MT_AfDataConfirm
    607           *
    608           * @brief   Process
    609           *
    610           * @param   pBuf - pointer to the received buffer
    611           *
    612           * @return  none
    613           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    614          void MT_AfDataConfirm(afDataConfirm_t *pMsg)
   \                     MT_AfDataConfirm:
    615          {
   \   000000   C082         PUSH      DPL
   \   000002   C083         PUSH      DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 3
   \   000004   74FD         MOV       A,#-0x3
   \   000006   12....       LCALL     ?ALLOC_XSTACK8
    616            uint8 retArray[3];
    617          
    618            retArray[0] = pMsg->hdr.status;
   \   000009   12....       LCALL     ?Subroutine7 & 0xFFFF
    619            retArray[1] = pMsg->endpoint;
   \                     ??CrossCallReturnLabel_7:
   \   00000C   C0E0         PUSH      A
   \   00000E   7401         MOV       A,#0x1
   \   000010   12....       LCALL     ?XSTACK_DISP0_8
   \   000013   D0E0         POP       A
   \   000015   12....       LCALL     ?Subroutine38 & 0xFFFF
    620            retArray[2] = pMsg->transID;
   \                     ??CrossCallReturnLabel_72:
   \   000018   C0E0         PUSH      A
   \   00001A   7402         MOV       A,#0x2
   \   00001C   12....       LCALL     ?XSTACK_DISP0_8
   \   00001F   D0E0         POP       A
   \   000021   F0           MOVX      @DPTR,A
    621          
    622            /* Build and send back the response */
    623            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_AF), MT_AF_DATA_CONFIRM, 3, retArray);
   \   000022                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000022   AC..         MOV       R4,?XSP + 0
   \   000024   AD..         MOV       R5,?XSP + 1
   \   000026   7B03         MOV       R3,#0x3
   \   000028   7A80         MOV       R2,#-0x80
   \   00002A   7944         MOV       R1,#0x44
   \   00002C   12....       LCALL     `??MT_BuildAndSendZToolResponse::?relay`; Banked call to: MT_BuildAndSendZToolResponse
    624          }
   \   00002F   7403         MOV       A,#0x3
   \   000031                REQUIRE ?Subroutine2
   \   000031                ; // Fall through to label ?Subroutine2

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine2:
   \   000000   12....       LCALL     ?DEALLOC_XSTACK8
   \   000003   D083         POP       DPH
   \   000005   D082         POP       DPL
   \   000007   02....       LJMP      ?BRET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine38:
   \   000000   12....       LCALL     ?Subroutine52 & 0xFFFF
   \                     ??CrossCallReturnLabel_96:
   \   000003   E0           MOVX      A,@DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine52:
   \   000000   12....       LCALL     ?Subroutine55 & 0xFFFF
   \                     ??CrossCallReturnLabel_103:
   \   000003   A3           INC       DPTR
   \   000004   A3           INC       DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine7:
   \   000000   8A82         MOV       DPL,R2
   \   000002   8B83         MOV       DPH,R3
   \   000004   A3           INC       DPTR
   \   000005   E0           MOVX      A,@DPTR
   \   000006   85..82       MOV       DPL,?XSP + 0
   \   000009   85..83       MOV       DPH,?XSP + 1
   \   00000C   12....       LCALL     ?Subroutine51 & 0xFFFF
   \                     ??CrossCallReturnLabel_95:
   \   00000F   22           RET
    625          
    626          /***************************************************************************************************
    627           * @fn      MT_AfReflectError
    628           *
    629           * @brief   Process
    630           *
    631           * @param   pBuf - pointer to the received buffer
    632           *
    633           * @return  none
    634           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    635          void MT_AfReflectError(afReflectError_t *pMsg)
   \                     MT_AfReflectError:
    636          {
   \   000000   C082         PUSH      DPL
   \   000002   C083         PUSH      DPH
   \   000004                ; Saved register size: 2
   \   000004                ; Auto size: 6
   \   000004   74FA         MOV       A,#-0x6
   \   000006   12....       LCALL     ?ALLOC_XSTACK8
    637            uint8 retArray[6];
    638          
    639            retArray[0] = pMsg->hdr.status;
   \   000009   12....       LCALL     ?Subroutine7 & 0xFFFF
    640            retArray[1] = pMsg->endpoint;
   \                     ??CrossCallReturnLabel_8:
   \   00000C   C0E0         PUSH      A
   \   00000E   7401         MOV       A,#0x1
   \   000010   12....       LCALL     ?XSTACK_DISP0_8
   \   000013   D0E0         POP       A
   \   000015   12....       LCALL     ?Subroutine38 & 0xFFFF
    641            retArray[2] = pMsg->transID;
   \                     ??CrossCallReturnLabel_73:
   \   000018   C0E0         PUSH      A
   \   00001A   7402         MOV       A,#0x2
   \   00001C   12....       LCALL     ?XSTACK_DISP0_8
   \   00001F   D0E0         POP       A
   \   000021   12....       LCALL     ?Subroutine37 & 0xFFFF
    642            retArray[3] = pMsg->dstAddrMode;
   \                     ??CrossCallReturnLabel_71:
   \   000024   E0           MOVX      A,@DPTR
   \   000025   C0E0         PUSH      A
   \   000027   7403         MOV       A,#0x3
   \   000029   12....       LCALL     ?XSTACK_DISP0_8
   \   00002C   D0E0         POP       A
   \   00002E   F0           MOVX      @DPTR,A
    643            retArray[4] = LO_UINT16( pMsg->dstAddr );
   \   00002F   EA           MOV       A,R2
   \   000030   2405         ADD       A,#0x5
   \   000032   F8           MOV       R0,A
   \   000033   E4           CLR       A
   \   000034   3B           ADDC      A,R3
   \   000035   F9           MOV       R1,A
   \   000036   8882         MOV       DPL,R0
   \   000038   F583         MOV       DPH,A
   \   00003A   E0           MOVX      A,@DPTR
   \   00003B   C0E0         PUSH      A
   \   00003D   7404         MOV       A,#0x4
   \   00003F   12....       LCALL     ?XSTACK_DISP0_8
   \   000042   D0E0         POP       A
   \   000044   12....       LCALL     ??Subroutine58_0 & 0xFFFF
    644            retArray[5] = HI_UINT16( pMsg->dstAddr );
   \                     ??CrossCallReturnLabel_123:
   \   000047   A3           INC       DPTR
   \   000048   E0           MOVX      A,@DPTR
   \   000049   C0E0         PUSH      A
   \   00004B   7405         MOV       A,#0x5
   \   00004D   12....       LCALL     ?XSTACK_DISP0_8
   \   000050   D0E0         POP       A
   \   000052   F0           MOVX      @DPTR,A
    645          
    646            /* Build and send back the response */
    647            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ | (uint8)MT_RPC_SYS_AF), MT_AF_REFLECT_ERROR, 6, retArray);
   \   000053                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000053   AC..         MOV       R4,?XSP + 0
   \   000055   AD..         MOV       R5,?XSP + 1
   \   000057   7B06         MOV       R3,#0x6
   \   000059   7A83         MOV       R2,#-0x7d
   \   00005B   7944         MOV       R1,#0x44
   \   00005D   12....       LCALL     `??MT_BuildAndSendZToolResponse::?relay`; Banked call to: MT_BuildAndSendZToolResponse
    648          }
   \   000060   7406         MOV       A,#0x6
   \   000062   80..         SJMP      ?Subroutine2

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine37:
   \   000000   12....       LCALL     ?Subroutine52 & 0xFFFF
   \                     ??CrossCallReturnLabel_97:
   \   000003   A3           INC       DPTR
   \   000004   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine58_0:
   \   000000   F0           MOVX      @DPTR,A
   \   000001   8882         MOV       DPL,R0
   \   000003   8983         MOV       DPH,R1
   \   000005   22           RET
    649          
    650          /***************************************************************************************************
    651           * @fn          MT_AfIncomingMsg
    652           *
    653           * @brief       Process the callback subscription for AF Incoming data.
    654           *
    655           * @param       pkt - Incoming AF data.
    656           *
    657           * @return      none
    658           ***************************************************************************************************/

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    659          void MT_AfIncomingMsg(afIncomingMSGPacket_t *pMsg)
   \                     MT_AfIncomingMsg:
    660          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000   74F0         MOV       A,#-0x10
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 9
   \   000005   74F7         MOV       A,#-0x9
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
   \   00000A   85..82       MOV       DPL,?XSP + 0
   \   00000D   85..83       MOV       DPH,?XSP + 1
   \   000010   EA           MOV       A,R2
   \   000011   F0           MOVX      @DPTR,A
   \   000012   A3           INC       DPTR
   \   000013   EB           MOV       A,R3
   \   000014   12....       LCALL     ?Subroutine30 & 0xFFFF
    661            #define MT_AF_INC_MSG_LEN  20
    662            #define MT_AF_INC_MSG_EXT  10
    663          
    664            uint16 dataLen = pMsg->cmd.DataLength;  // Length of the data section in the response packet.
   \                     ??CrossCallReturnLabel_59:
   \   000017   2420         ADD       A,#0x20
   \   000019   F582         MOV       DPL,A
   \   00001B   E4           CLR       A
   \   00001C   3B           ADDC      A,R3
   \   00001D   F583         MOV       DPH,A
   \   00001F   E0           MOVX      A,@DPTR
   \   000020   F5..         MOV       ?V4,A
   \   000022   A3           INC       DPTR
   \   000023   E0           MOVX      A,@DPTR
   \   000024   F5..         MOV       ?V5,A
    665            uint16 respLen = MT_AF_INC_MSG_LEN + dataLen;
   \   000026   E5..         MOV       A,?V4
   \   000028   2414         ADD       A,#0x14
   \   00002A   FE           MOV       R6,A
   \   00002B   E4           CLR       A
   \   00002C   35..         ADDC      A,?V5
   \   00002E   FF           MOV       R7,A
    666            uint8 cmd = MT_AF_INCOMING_MSG;
   \   00002F   7406         MOV       A,#0x6
   \   000031   12....       LCALL     ?XSTACK_DISP0_8
   \   000034   7481         MOV       A,#-0x7f
   \   000036   F0           MOVX      @DPTR,A
    667            uint8 *pRsp, *pTmp;
    668            mtAfInMsgList_t *pItem = NULL;
   \   000037   7402         MOV       A,#0x2
   \   000039   12....       LCALL     ?XSTACK_DISP0_8
   \   00003C   E4           CLR       A
   \   00003D   F0           MOVX      @DPTR,A
   \   00003E   A3           INC       DPTR
   \   00003F   12....       LCALL     ?Subroutine30 & 0xFFFF
    669          
    670          #if defined INTER_PAN
    671            if (StubAPS_InterPan(pMsg->srcAddr.panId, pMsg->srcAddr.endPoint))
    672            {
    673              cmd = MT_AF_INCOMING_MSG_EXT;
    674            }
    675            else
    676          #endif
    677            if ((pMsg->srcAddr.addrMode == afAddr64Bit) ||
    678                (respLen > (uint16)(MT_RPC_DATA_MAX - MT_AF_INC_MSG_EXT)))
   \                     ??CrossCallReturnLabel_60:
   \   000042   240E         ADD       A,#0xe
   \   000044   12....       LCALL     ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_44:
   \   000047   E0           MOVX      A,@DPTR
   \   000048   6403         XRL       A,#0x3
   \   00004A   6009         JZ        ??MT_AfIncomingMsg_0
   \   00004C   C3           CLR       C
   \   00004D   EE           MOV       A,R6
   \   00004E   94F1         SUBB      A,#-0xf
   \   000050   EF           MOV       A,R7
   \   000051   9400         SUBB      A,#0x0
   \   000053   400F         JC        ??MT_AfIncomingMsg_1
    679            {
    680              cmd = MT_AF_INCOMING_MSG_EXT;
   \                     ??MT_AfIncomingMsg_0:
   \   000055   7406         MOV       A,#0x6
   \   000057   12....       LCALL     ?XSTACK_DISP0_8
   \   00005A   7482         MOV       A,#-0x7e
   \   00005C   F0           MOVX      @DPTR,A
    681            }
    682          
    683            if (cmd == MT_AF_INCOMING_MSG_EXT)
    684            {
    685              respLen += MT_AF_INC_MSG_EXT;
   \   00005D   EE           MOV       A,R6
   \   00005E   240A         ADD       A,#0xa
   \   000060   FE           MOV       R6,A
   \   000061   E4           CLR       A
   \   000062   3F           ADDC      A,R7
   \   000063   FF           MOV       R7,A
    686            }
    687          
    688            if (respLen > (uint16)MT_RPC_DATA_MAX)
   \                     ??MT_AfIncomingMsg_1:
   \   000064   C3           CLR       C
   \   000065   EE           MOV       A,R6
   \   000066   94FB         SUBB      A,#-0x5
   \   000068   EF           MOV       A,R7
   \   000069   9400         SUBB      A,#0x0
   \   00006B   4048         JC        ??MT_AfIncomingMsg_2
    689            {
    690              if ((pItem = (mtAfInMsgList_t *)osal_mem_alloc(sizeof(mtAfInMsgList_t) + dataLen)) == NULL)
   \   00006D                ; Setup parameters for call to function osal_mem_alloc
   \   00006D   E5..         MOV       A,?V4
   \   00006F   2409         ADD       A,#0x9
   \   000071   FA           MOV       R2,A
   \   000072   E4           CLR       A
   \   000073   35..         ADDC      A,?V5
   \   000075   FB           MOV       R3,A
   \   000076   12....       LCALL     `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
   \   000079   7402         MOV       A,#0x2
   \   00007B   12....       LCALL     ?XSTACK_DISP0_8
   \   00007E   12....       LCALL     ??Subroutine57_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_115:
   \   000081   7402         MOV       A,#0x2
   \   000083   12....       LCALL     ?XSTACK_DISP0_8
   \   000086   12....       LCALL     ??Subroutine61_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_146:
   \   000089   7003         JNZ       $+5
   \   00008B   02....       LJMP      ??CrossCallReturnLabel_12 & 0xFFFF
    691              {
    692                return;  // If cannot hold a huge message, cannot give indication at all.
    693              }
    694          
    695              pItem->data = (uint8 *)(pItem+1);
   \   00008E   7402         MOV       A,#0x2
   \   000090   12....       LCALL     ?XSTACK_DISP0_8
   \   000093   E0           MOVX      A,@DPTR
   \   000094   2409         ADD       A,#0x9
   \   000096   FA           MOV       R2,A
   \   000097   A3           INC       DPTR
   \   000098   E0           MOVX      A,@DPTR
   \   000099   3400         ADDC      A,#0x0
   \   00009B   FB           MOV       R3,A
   \   00009C   7402         MOV       A,#0x2
   \   00009E   12....       LCALL     ?XSTACK_DISP0_8
   \   0000A1   A3           INC       DPTR
   \   0000A2   E0           MOVX      A,@DPTR
   \   0000A3   F583         MOV       DPH,A
   \   0000A5   8882         MOV       DPL,R0
   \   0000A7   A3           INC       DPTR
   \   0000A8   A3           INC       DPTR
   \   0000A9   12....       LCALL     ??Subroutine57_0 & 0xFFFF
    696              respLen -= dataLen;  // Zero data bytes are sent with an over-sized incoming indication.
   \                     ??CrossCallReturnLabel_116:
   \   0000AC   C3           CLR       C
   \   0000AD   EE           MOV       A,R6
   \   0000AE   95..         SUBB      A,?V4
   \   0000B0   FE           MOV       R6,A
   \   0000B1   EF           MOV       A,R7
   \   0000B2   95..         SUBB      A,?V5
   \   0000B4   FF           MOV       R7,A
    697            }
    698          
    699            // Attempt to allocate memory for the response packet.
    700            if ((pRsp = osal_mem_alloc(respLen)) == NULL)
   \                     ??MT_AfIncomingMsg_2:
   \   0000B5                ; Setup parameters for call to function osal_mem_alloc
   \   0000B5   EE           MOV       A,R6
   \   0000B6   FA           MOV       R2,A
   \   0000B7   EF           MOV       A,R7
   \   0000B8   FB           MOV       R3,A
   \   0000B9   12....       LCALL     `??osal_mem_alloc::?relay`; Banked call to: osal_mem_alloc
   \   0000BC   7404         MOV       A,#0x4
   \   0000BE   12....       LCALL     ?XSTACK_DISP0_8
   \   0000C1   12....       LCALL     ??Subroutine57_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_117:
   \   0000C4   7404         MOV       A,#0x4
   \   0000C6   12....       LCALL     ?XSTACK_DISP0_8
   \   0000C9   12....       LCALL     ??Subroutine61_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_147:
   \   0000CC   7015         JNZ       ??MT_AfIncomingMsg_3
    701            {
    702              if (pItem != NULL)
   \   0000CE   7402         MOV       A,#0x2
   \   0000D0   12....       LCALL     ?XSTACK_DISP0_8
   \   0000D3   12....       LCALL     ??Subroutine61_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_148:
   \   0000D6   6008         JZ        ??CrossCallReturnLabel_11
    703              {
    704                (void)osal_mem_free(pItem);
   \   0000D8                ; Setup parameters for call to function osal_mem_free
   \   0000D8   7402         MOV       A,#0x2
   \   0000DA   12....       LCALL     ?XSTACK_DISP0_8
   \   0000DD   12....       LCALL     ?Subroutine9 & 0xFFFF
    705              }
    706              return;
   \                     ??CrossCallReturnLabel_11:
   \   0000E0   02....       LJMP      ??CrossCallReturnLabel_12 & 0xFFFF
    707            }
    708            pTmp = pRsp;
    709          
    710            /* Group ID */
    711            *pTmp++ = LO_UINT16(pMsg->groupId);
   \                     ??MT_AfIncomingMsg_3:
   \   0000E3   85..82       MOV       DPL,?XSP + 0
   \   0000E6   85..83       MOV       DPH,?XSP + 1
   \   0000E9   E0           MOVX      A,@DPTR
   \   0000EA   2402         ADD       A,#0x2
   \   0000EC   12....       LCALL     ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_32:
   \   0000EF   C0E0         PUSH      A
   \   0000F1   7404         MOV       A,#0x4
   \   0000F3   12....       LCALL     ?XSTACK_DISP0_8
   \   0000F6   12....       LCALL     ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_19:
   \   0000F9   D0E0         POP       A
   \   0000FB   F0           MOVX      @DPTR,A
    712            *pTmp++ = HI_UINT16(pMsg->groupId);
   \   0000FC   8A82         MOV       DPL,R2
   \   0000FE   8983         MOV       DPH,R1
   \   000100   A3           INC       DPTR
   \   000101   E0           MOVX      A,@DPTR
   \   000102   C0E0         PUSH      A
   \   000104   7404         MOV       A,#0x4
   \   000106   12....       LCALL     ?XSTACK_DISP0_8
   \   000109   12....       LCALL     ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_20:
   \   00010C   A3           INC       DPTR
   \   00010D   D0E0         POP       A
   \   00010F   12....       LCALL     ?Subroutine30 & 0xFFFF
    713          
    714            /* Cluster ID */
    715            *pTmp++ = LO_UINT16(pMsg->clusterId);
   \                     ??CrossCallReturnLabel_61:
   \   000112   2404         ADD       A,#0x4
   \   000114   12....       LCALL     ?Subroutine19 & 0xFFFF
   \                     ??CrossCallReturnLabel_33:
   \   000117   C0E0         PUSH      A
   \   000119   7404         MOV       A,#0x4
   \   00011B   12....       LCALL     ?XSTACK_DISP0_8
   \   00011E   12....       LCALL     ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_14:
   \   000121   D0E0         POP       A
   \   000123   F0           MOVX      @DPTR,A
    716            *pTmp++ = HI_UINT16(pMsg->clusterId);
   \   000124   8A82         MOV       DPL,R2
   \   000126   8983         MOV       DPH,R1
   \   000128   A3           INC       DPTR
   \   000129   E0           MOVX      A,@DPTR
   \   00012A   C0E0         PUSH      A
   \   00012C   7404         MOV       A,#0x4
   \   00012E   12....       LCALL     ?XSTACK_DISP0_8
   \   000131   12....       LCALL     ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_15:
   \   000134   A3           INC       DPTR
   \   000135   D0E0         POP       A
   \   000137   F0           MOVX      @DPTR,A
   \   000138   7404         MOV       A,#0x4
   \   00013A   12....       LCALL     ?XSTACK_DISP0_8
   \   00013D   E0           MOVX      A,@DPTR
   \   00013E   2405         ADD       A,#0x5
   \   000140   F5..         MOV       ?V6,A
   \   000142   A3           INC       DPTR
   \   000143   E0           MOVX      A,@DPTR
   \   000144   3400         ADDC      A,#0x0
   \   000146   F5..         MOV       ?V7,A
   \   000148   7404         MOV       A,#0x4
   \   00014A   12....       LCALL     ?XSTACK_DISP0_8
   \   00014D   E0           MOVX      A,@DPTR
   \   00014E   2404         ADD       A,#0x4
   \   000150   F8           MOV       R0,A
   \   000151   A3           INC       DPTR
   \   000152   E0           MOVX      A,@DPTR
   \   000153   3400         ADDC      A,#0x0
   \   000155   F9           MOV       R1,A
   \   000156   E8           MOV       A,R0
   \   000157   FA           MOV       R2,A
   \   000158   E9           MOV       A,R1
   \   000159   FB           MOV       R3,A
   \   00015A   85..82       MOV       DPL,?XSP + 0
   \   00015D   85..83       MOV       DPH,?XSP + 1
   \   000160   E0           MOVX      A,@DPTR
   \   000161   240F         ADD       A,#0xf
   \   000163   F8           MOV       R0,A
   \   000164   A3           INC       DPTR
   \   000165   E0           MOVX      A,@DPTR
   \   000166   3400         ADDC      A,#0x0
   \   000168   F9           MOV       R1,A
   \   000169   7407         MOV       A,#0x7
   \   00016B   12....       LCALL     ?XSTACK_DISP0_8
   \   00016E   E8           MOV       A,R0
   \   00016F   F0           MOVX      @DPTR,A
   \   000170   A3           INC       DPTR
   \   000171   E9           MOV       A,R1
   \   000172   12....       LCALL     ?Subroutine30 & 0xFFFF
   \                     ??CrossCallReturnLabel_62:
   \   000175   2406         ADD       A,#0x6
   \   000177   F8           MOV       R0,A
   \   000178   A3           INC       DPTR
   \   000179   E0           MOVX      A,@DPTR
   \   00017A   3400         ADDC      A,#0x0
   \   00017C   F9           MOV       R1,A
   \   00017D   7406         MOV       A,#0x6
   \   00017F   12....       LCALL     ?XSTACK_DISP0_8
   \   000182   E0           MOVX      A,@DPTR
   \   000183   6482         XRL       A,#0x82
   \   000185   7062         JNZ       ??MT_AfIncomingMsg_4
    717          
    718            if (cmd == MT_AF_INCOMING_MSG_EXT)
    719            {
    720              *pTmp++ = pMsg->srcAddr.addrMode;
   \   000187   85..82       MOV       DPL,?V0
   \   00018A   85..83       MOV       DPH,?V1
   \   00018D   E0           MOVX      A,@DPTR
   \   00018E   8A82         MOV       DPL,R2
   \   000190   8B83         MOV       DPH,R3
   \   000192   F0           MOVX      @DPTR,A
    721          
    722              if (pMsg->srcAddr.addrMode == afAddr64Bit)
   \   000193   85..82       MOV       DPL,?V0
   \   000196   85..83       MOV       DPH,?V1
   \   000199   E0           MOVX      A,@DPTR
   \   00019A   6403         XRL       A,#0x3
   \   00019C   7019         JNZ       ??MT_AfIncomingMsg_5
    723              {
    724                (void)osal_memcpy(pTmp, pMsg->srcAddr.addr.extAddr, Z_EXTADDR_LEN);
   \   00019E                ; Setup parameters for call to function osal_memcpy
   \   00019E   88..         MOV       ?V0,R0
   \   0001A0   89..         MOV       ?V1,R1
   \   0001A2   75..00       MOV       ?V2,#0x0
   \   0001A5   78..         MOV       R0,#?V0
   \   0001A7   12....       LCALL     ?PUSH_XSTACK_I_THREE
   \   0001AA   7C08         MOV       R4,#0x8
   \   0001AC   7D00         MOV       R5,#0x0
   \   0001AE   0A           INC       R2
   \   0001AF   12....       LCALL     ?Subroutine43 & 0xFFFF
    725              }
   \                     ??CrossCallReturnLabel_159:
   \   0001B2   12....       LCALL     ?DEALLOC_XSTACK8
   \   0001B5   8007         SJMP      ??CrossCallReturnLabel_0
    726              else
    727              {
    728                pTmp[0] = LO_UINT16(pMsg->srcAddr.addr.shortAddr);
   \                     ??MT_AfIncomingMsg_5:
   \   0001B7   8882         MOV       DPL,R0
   \   0001B9   8983         MOV       DPH,R1
   \   0001BB   12....       LCALL     ?Subroutine4 & 0xFFFF
    729                pTmp[1] = HI_UINT16(pMsg->srcAddr.addr.shortAddr);
    730              }
    731              pTmp += Z_EXTADDR_LEN;
    732          
    733              *pTmp++ = pMsg->srcAddr.endPoint;
   \                     ??CrossCallReturnLabel_0:
   \   0001BE   7407         MOV       A,#0x7
   \   0001C0   12....       LCALL     ?XSTACK_DISP0_8
   \   0001C3   12....       LCALL     ?Subroutine6 & 0xFFFF
    734          #if defined INTER_PAN
    735              *pTmp++ = LO_UINT16(pMsg->srcAddr.panId);
    736              *pTmp++ = HI_UINT16(pMsg->srcAddr.panId);
    737          #else
    738              *pTmp++ = 0;
    739              *pTmp++ = 0;
    740          #endif
    741            }
   \                     ??CrossCallReturnLabel_4:
   \   0001C6   85..82       MOV       DPL,?V6
   \   0001C9   85..83       MOV       DPH,?V7
   \   0001CC   A3           INC       DPTR
   \   0001CD   A3           INC       DPTR
   \   0001CE   A3           INC       DPTR
   \   0001CF   A3           INC       DPTR
   \   0001D0   A3           INC       DPTR
   \   0001D1   A3           INC       DPTR
   \   0001D2   A3           INC       DPTR
   \   0001D3   A3           INC       DPTR
   \   0001D4   12....       LCALL     ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_63:
   \   0001D7   E4           CLR       A
   \   0001D8   12....       LCALL     ?Subroutine31 & 0xFFFF
   \                     ??CrossCallReturnLabel_64:
   \   0001DB   A3           INC       DPTR
   \   0001DC   F0           MOVX      @DPTR,A
   \   0001DD   E5..         MOV       A,?V6
   \   0001DF   240B         ADD       A,#0xb
   \   0001E1   F5..         MOV       ?V6,A
   \   0001E3   5041         JNC       ??MT_AfIncomingMsg_6
   \   0001E5   05..         INC       ?V7
   \   0001E7   803D         SJMP      ??MT_AfIncomingMsg_6
    742            else
    743            {
    744              /* Source Address */
    745              *pTmp++ = LO_UINT16(pMsg->srcAddr.addr.shortAddr);
   \                     ??MT_AfIncomingMsg_4:
   \   0001E9   8882         MOV       DPL,R0
   \   0001EB   8983         MOV       DPH,R1
   \   0001ED   E0           MOVX      A,@DPTR
   \   0001EE   8A82         MOV       DPL,R2
   \   0001F0   8B83         MOV       DPH,R3
   \   0001F2   12....       LCALL     ??Subroutine58_0 & 0xFFFF
    746              *pTmp++ = HI_UINT16(pMsg->srcAddr.addr.shortAddr);
   \                     ??CrossCallReturnLabel_124:
   \   0001F5   A3           INC       DPTR
   \   0001F6   12....       LCALL     ?Subroutine28 & 0xFFFF
    747          
    748              /* Source EP */
    749              *pTmp++ = pMsg->srcAddr.endPoint;
   \                     ??CrossCallReturnLabel_55:
   \   0001F9   7407         MOV       A,#0x7
   \   0001FB   12....       LCALL     ?XSTACK_DISP0_8
   \   0001FE   12....       LCALL     ?Subroutine6 & 0xFFFF
    750            }
   \                     ??CrossCallReturnLabel_5:
   \   000201   C0E0         PUSH      A
   \   000203   7404         MOV       A,#0x4
   \   000205   12....       LCALL     ?XSTACK_DISP0_8
   \   000208   12....       LCALL     ??Subroutine59_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_128:
   \   00020B   2406         ADD       A,#0x6
   \   00020D   F582         MOV       DPL,A
   \   00020F   E4           CLR       A
   \   000210   38           ADDC      A,R0
   \   000211   F583         MOV       DPH,A
   \   000213   D0E0         POP       A
   \   000215   F0           MOVX      @DPTR,A
   \   000216   7404         MOV       A,#0x4
   \   000218   12....       LCALL     ?XSTACK_DISP0_8
   \   00021B   E0           MOVX      A,@DPTR
   \   00021C   2407         ADD       A,#0x7
   \   00021E   F5..         MOV       ?V6,A
   \   000220   A3           INC       DPTR
   \   000221   E0           MOVX      A,@DPTR
   \   000222   3400         ADDC      A,#0x0
   \   000224   F5..         MOV       ?V7,A
    751          
    752            /* Destination EP */
    753            *pTmp++ = pMsg->endPoint;
   \                     ??MT_AfIncomingMsg_6:
   \   000226   85..82       MOV       DPL,?XSP + 0
   \   000229   85..83       MOV       DPH,?XSP + 1
   \   00022C   12....       LCALL     ?Subroutine15 & 0xFFFF
   \                     ??CrossCallReturnLabel_27:
   \   00022F   12....       LCALL     ?Subroutine28 & 0xFFFF
    754          
    755            /* WasBroadCast */
    756            *pTmp++ = pMsg->wasBroadcast;
   \                     ??CrossCallReturnLabel_56:
   \   000232   85..82       MOV       DPL,?XSP + 0
   \   000235   85..83       MOV       DPH,?XSP + 1
   \   000238   12....       LCALL     ?Subroutine16 & 0xFFFF
   \                     ??CrossCallReturnLabel_29:
   \   00023B   12....       LCALL     ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_57:
   \   00023E   12....       LCALL     ?Subroutine35 & 0xFFFF
    757          
    758            /* LinkQuality */
    759            *pTmp++ = pMsg->LinkQuality;
   \                     ??CrossCallReturnLabel_67:
   \   000241   12....       LCALL     ?Subroutine17 & 0xFFFF
   \                     ??CrossCallReturnLabel_31:
   \   000244   12....       LCALL     ?Subroutine24 & 0xFFFF
    760          
    761            /* SecurityUse */
    762            *pTmp++ = pMsg->SecurityUse;
   \                     ??CrossCallReturnLabel_46:
   \   000247   12....       LCALL     ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_130:
   \   00024A   2419         ADD       A,#0x19
   \   00024C   F582         MOV       DPL,A
   \   00024E   E4           CLR       A
   \   00024F   38           ADDC      A,R0
   \   000250   F583         MOV       DPH,A
   \   000252   12....       LCALL     ?Subroutine29 & 0xFFFF
   \                     ??CrossCallReturnLabel_58:
   \   000255   A3           INC       DPTR
   \   000256   A3           INC       DPTR
   \   000257   F0           MOVX      @DPTR,A
   \   000258   E5..         MOV       A,?V6
   \   00025A   2404         ADD       A,#0x4
   \   00025C   F5..         MOV       ?V6,A
   \   00025E   5002         JNC       ??MT_AfIncomingMsg_7
   \   000260   05..         INC       ?V7
    763          
    764            /* Timestamp */
    765            osal_buffer_uint32( pTmp, pMsg->timestamp );
   \                     ??MT_AfIncomingMsg_7:
   \   000262   85..82       MOV       DPL,?XSP + 0
   \   000265   85..83       MOV       DPH,?XSP + 1
   \   000268   E0           MOVX      A,@DPTR
   \   000269   241A         ADD       A,#0x1a
   \   00026B   12....       LCALL     ?Subroutine23 & 0xFFFF
   \                     ??CrossCallReturnLabel_45:
   \   00026E   12....       LCALL     ?PUSH_XSTACK8_X_FOUR
   \   000271   AA..         MOV       R2,?V6
   \   000273   AB..         MOV       R3,?V7
   \   000275   12....       LCALL     `??osal_buffer_uint32::?relay`; Banked call to: osal_buffer_uint32
   \   000278   7404         MOV       A,#0x4
   \   00027A   12....       LCALL     ?DEALLOC_XSTACK8
    766            pTmp += 4;
    767          
    768            /* Data Length */
    769            if (cmd == MT_AF_INCOMING_MSG_EXT)
   \   00027D   E5..         MOV       A,?V6
   \   00027F   2406         ADD       A,#0x6
   \   000281   FA           MOV       R2,A
   \   000282   E4           CLR       A
   \   000283   35..         ADDC      A,?V7
   \   000285   FB           MOV       R3,A
   \   000286   E5..         MOV       A,?V6
   \   000288   2405         ADD       A,#0x5
   \   00028A   F8           MOV       R0,A
   \   00028B   E4           CLR       A
   \   00028C   35..         ADDC      A,?V7
   \   00028E   F9           MOV       R1,A
   \   00028F   E8           MOV       A,R0
   \   000290   FC           MOV       R4,A
   \   000291   E5..         MOV       A,?V6
   \   000293   2404         ADD       A,#0x4
   \   000295   18           DEC       R0
   \   000296   E4           CLR       A
   \   000297   35..         ADDC      A,?V7
   \   000299   88..         MOV       ?V2,R0
   \   00029B   F5..         MOV       ?V3,A
   \   00029D   7406         MOV       A,#0x6
   \   00029F   12....       LCALL     ?XSTACK_DISP0_8
   \   0002A2   E0           MOVX      A,@DPTR
   \   0002A3   6482         XRL       A,#0x82
   \   0002A5   701C         JNZ       ??MT_AfIncomingMsg_8
    770            {
    771              /* Z-Tool apparently takes the last Byte before the data buffer as the dynamic length and
    772               * ignores the bigger UInt16 length of an EXT incoming message. But no data bytes will be sent
    773               * with a huge message, so it's necessary to work-around and fake-out Z-Tool with a zero here.
    774               */
    775              *pTmp++ = 0;  // TODO - workaround Z-Tool shortcoming; should be: = pMsg->cmd.TransSeqNumber;
   \   0002A7   8882         MOV       DPL,R0
   \   0002A9   85..83       MOV       DPH,?V3
   \   0002AC   E4           CLR       A
   \   0002AD   12....       LCALL     ?Subroutine42 & 0xFFFF
    776              *pTmp++ = LO_UINT16(dataLen);
    777              *pTmp++ = HI_UINT16(dataLen);
   \                     ??CrossCallReturnLabel_80:
   \   0002B0   8A82         MOV       DPL,R2
   \   0002B2   8B83         MOV       DPH,R3
   \   0002B4   E5..         MOV       A,?V5
   \   0002B6   F0           MOVX      @DPTR,A
   \   0002B7   E5..         MOV       A,?V6
   \   0002B9   2407         ADD       A,#0x7
   \   0002BB   F5..         MOV       ?V6,A
   \   0002BD   501D         JNC       ??MT_AfIncomingMsg_9
   \   0002BF   05..         INC       ?V7
   \   0002C1   8019         SJMP      ??MT_AfIncomingMsg_9
    778            }
    779            else
    780            {
    781              *pTmp++ = pMsg->cmd.TransSeqNumber;
   \                     ??MT_AfIncomingMsg_8:
   \   0002C3   12....       LCALL     ?Subroutine18 & 0xFFFF
    782              *pTmp++ = dataLen;
    783            }
   \                     ??CrossCallReturnLabel_131:
   \   0002C6   241F         ADD       A,#0x1f
   \   0002C8   F582         MOV       DPL,A
   \   0002CA   E4           CLR       A
   \   0002CB   38           ADDC      A,R0
   \   0002CC   F583         MOV       DPH,A
   \   0002CE   E0           MOVX      A,@DPTR
   \   0002CF   85..82       MOV       DPL,?V2
   \   0002D2   85..83       MOV       DPH,?V3
   \   0002D5   12....       LCALL     ?Subroutine42 & 0xFFFF
   \                     ??CrossCallReturnLabel_81:
   \   0002D8   8A..         MOV       ?V6,R2
   \   0002DA   8B..         MOV       ?V7,R3
    784          
    785            /* Data */
    786            if (pItem != NULL)
   \                     ??MT_AfIncomingMsg_9:
   \   0002DC   85..82       MOV       DPL,?XSP + 0
   \   0002DF   85..83       MOV       DPH,?XSP + 1
   \   0002E2   E0           MOVX      A,@DPTR
   \   0002E3   2422         ADD       A,#0x22
   \   0002E5   F5..         MOV       ?V2,A
   \   0002E7   A3           INC       DPTR
   \   0002E8   E0           MOVX      A,@DPTR
   \   0002E9   3400         ADDC      A,#0x0
   \   0002EB   F5..         MOV       ?V3,A
   \   0002ED   7402         MOV       A,#0x2
   \   0002EF   12....       LCALL     ?XSTACK_DISP0_8
   \   0002F2   12....       LCALL     ??Subroutine61_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_149:
   \   0002F5   6078         JZ        ??MT_AfIncomingMsg_10
    787            {
    788              // Enqueue the new huge incoming item.
    789              pItem->next = pMtAfInMsgList;
   \   0002F7   12....       LCALL     ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_142:
   \   0002FA   7402         MOV       A,#0x2
   \   0002FC   12....       LCALL     ?XSTACK_DISP0_8
   \   0002FF   A3           INC       DPTR
   \   000300   E0           MOVX      A,@DPTR
   \   000301   F583         MOV       DPH,A
   \   000303   8882         MOV       DPL,R0
   \   000305   12....       LCALL     ??Subroutine57_0 & 0xFFFF
    790              pMtAfInMsgList = pItem;
   \                     ??CrossCallReturnLabel_118:
   \   000308   7402         MOV       A,#0x2
   \   00030A   12....       LCALL     ?XSTACK_DISP0_8
   \   00030D   12....       LCALL     ?Subroutine13 & 0xFFFF
    791          
    792              // Setup to time-out the huge incoming item if host does not MT_AF_DATA_RETRIEVE it.
    793              pItem->tick = MT_AF_EXEC_CNT;
   \                     ??CrossCallReturnLabel_23:
   \   000310   7402         MOV       A,#0x2
   \   000312   12....       LCALL     ?XSTACK_DISP0_8
   \   000315   12....       LCALL     ??Subroutine59_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_129:
   \   000318   2408         ADD       A,#0x8
   \   00031A   F582         MOV       DPL,A
   \   00031C   E4           CLR       A
   \   00031D   38           ADDC      A,R0
   \   00031E   F583         MOV       DPH,A
   \   000320   740F         MOV       A,#0xf
   \   000322   F0           MOVX      @DPTR,A
    794              if (ZSuccess != osal_start_timerEx(MT_TaskID, MT_AF_EXEC_EVT, MT_AF_EXEC_DLY))
   \   000323                ; Setup parameters for call to function osal_start_timerEx
   \   000323   90....       MOV       DPTR,#__Constant_3e8
   \   000326   12....       LCALL     ?PUSH_XSTACK8_X_FOUR
   \   000329   12....       LCALL     ?Subroutine21 & 0xFFFF
   \                     ??CrossCallReturnLabel_38:
   \   00032C   12....       LCALL     ?DEALLOC_XSTACK8
   \   00032F   E9           MOV       A,R1
   \   000330   6003         JZ        ??CrossCallReturnLabel_52
    795              {
    796                (void)osal_set_event(MT_TaskID, MT_AF_EXEC_EVT);
   \   000332                ; Setup parameters for call to function osal_set_event
   \   000332   12....       LCALL     ?Subroutine26 & 0xFFFF
    797              }
    798          
    799              pItem->timestamp = pMsg->timestamp;
   \                     ??CrossCallReturnLabel_52:
   \   000335   85..82       MOV       DPL,?V0
   \   000338   85..83       MOV       DPH,?V1
   \   00033B   12....       LCALL     ?XLOAD_R0123
   \   00033E   7402         MOV       A,#0x2
   \   000340   12....       LCALL     ?XSTACK_DISP0_8
   \   000343   E0           MOVX      A,@DPTR
   \   000344   FC           MOV       R4,A
   \   000345   A3           INC       DPTR
   \   000346   E0           MOVX      A,@DPTR
   \   000347   F583         MOV       DPH,A
   \   000349   8C82         MOV       DPL,R4
   \   00034B   A3           INC       DPTR
   \   00034C   A3           INC       DPTR
   \   00034D   A3           INC       DPTR
   \   00034E   A3           INC       DPTR
   \   00034F   12....       LCALL     ?XSTORE_R0123
    800              (void)osal_memcpy(pItem->data, pMsg->cmd.Data, dataLen);
   \   000352                ; Setup parameters for call to function osal_memcpy
   \   000352   12....       LCALL     ?Subroutine20 & 0xFFFF
    801            }
   \                     ??CrossCallReturnLabel_34:
   \   000355   12....       LCALL     ?PUSH_XSTACK_I_THREE
   \   000358   AC..         MOV       R4,?V4
   \   00035A   AD..         MOV       R5,?V5
   \   00035C   7405         MOV       A,#0x5
   \   00035E   12....       LCALL     ?XSTACK_DISP0_8
   \   000361   12....       LCALL     ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_16:
   \   000364   12....       LCALL     ??Subroutine60_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_141:
   \   000367   12....       LCALL     ??Subroutine62_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_163:
   \   00036A   12....       LCALL     ?DEALLOC_XSTACK8
   \   00036D   801E         SJMP      ??MT_AfIncomingMsg_11
    802            else
    803            {
    804              (void)osal_memcpy(pTmp, pMsg->cmd.Data, dataLen);
   \                     ??MT_AfIncomingMsg_10:
   \   00036F                ; Setup parameters for call to function osal_memcpy
   \   00036F   12....       LCALL     ?Subroutine20 & 0xFFFF
   \                     ??CrossCallReturnLabel_35:
   \   000372   12....       LCALL     ?PUSH_XSTACK_I_THREE
   \   000375   AC..         MOV       R4,?V4
   \   000377   AD..         MOV       R5,?V5
   \   000379   AA..         MOV       R2,?V6
   \   00037B   12....       LCALL     ?Subroutine43 & 0xFFFF
   \                     ??CrossCallReturnLabel_160:
   \   00037E   12....       LCALL     ?DEALLOC_XSTACK8
    805              pTmp += dataLen;
   \   000381   E5..         MOV       A,?V6
   \   000383   25..         ADD       A,?V4
   \   000385   F5..         MOV       ?V6,A
   \   000387   E5..         MOV       A,?V7
   \   000389   35..         ADDC      A,?V5
   \   00038B   F5..         MOV       ?V7,A
    806            }
    807          
    808            // MAC Source address
    809            *pTmp++ = LO_UINT16(pMsg->macSrcAddr);
   \                     ??MT_AfIncomingMsg_11:
   \   00038D   85..82       MOV       DPL,?XSP + 0
   \   000390   85..83       MOV       DPH,?XSP + 1
   \   000393   E0           MOVX      A,@DPTR
   \   000394   2424         ADD       A,#0x24
   \   000396   F8           MOV       R0,A
   \   000397   A3           INC       DPTR
   \   000398   E0           MOVX      A,@DPTR
   \   000399   3400         ADDC      A,#0x0
   \   00039B   F9           MOV       R1,A
   \   00039C   8882         MOV       DPL,R0
   \   00039E   F583         MOV       DPH,A
   \   0003A0   12....       LCALL     ?Subroutine4 & 0xFFFF
    810            *pTmp++ = HI_UINT16(pMsg->macSrcAddr);
    811          
    812            // messages result radius
    813            *pTmp = pMsg->radius;
   \                     ??CrossCallReturnLabel_1:
   \   0003A3   12....       LCALL     ?Subroutine18 & 0xFFFF
   \                     ??CrossCallReturnLabel_132:
   \   0003A6   2426         ADD       A,#0x26
   \   0003A8   F582         MOV       DPL,A
   \   0003AA   E4           CLR       A
   \   0003AB   38           ADDC      A,R0
   \   0003AC   F583         MOV       DPH,A
   \   0003AE   12....       LCALL     ?Subroutine24 & 0xFFFF
    814          
    815            /* Build and send back the response */
    816            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_AREQ|(uint8)MT_RPC_SYS_AF), cmd, respLen, pRsp);
   \                     ??CrossCallReturnLabel_47:
   \   0003B1                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0003B1   7404         MOV       A,#0x4
   \   0003B3   12....       LCALL     ?XSTACK_DISP0_8
   \   0003B6   12....       LCALL     ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_41:
   \   0003B9   EE           MOV       A,R6
   \   0003BA   FB           MOV       R3,A
   \   0003BB   7406         MOV       A,#0x6
   \   0003BD   12....       LCALL     ?XSTACK_DISP0_8
   \   0003C0   E0           MOVX      A,@DPTR
   \   0003C1   FA           MOV       R2,A
   \   0003C2   7944         MOV       R1,#0x44
   \   0003C4   12....       LCALL     `??MT_BuildAndSendZToolResponse::?relay`; Banked call to: MT_BuildAndSendZToolResponse
    817          
    818            (void)osal_mem_free(pRsp);
   \   0003C7                ; Setup parameters for call to function osal_mem_free
   \   0003C7   7404         MOV       A,#0x4
   \   0003C9   12....       LCALL     ?XSTACK_DISP0_8
   \   0003CC   12....       LCALL     ?Subroutine9 & 0xFFFF
    819          }
   \                     ??CrossCallReturnLabel_12:
   \   0003CF   7409         MOV       A,#0x9
   \   0003D1   02....       LJMP      ?Subroutine1 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine42:
   \   000000   F0           MOVX      @DPTR,A
   \   000001   8C82         MOV       DPL,R4
   \   000003   8983         MOV       DPH,R1
   \   000005   E5..         MOV       A,?V4
   \   000007   F0           MOVX      @DPTR,A
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine31:
   \   000000   F0           MOVX      @DPTR,A
   \   000001   85..82       MOV       DPL,?V6
   \   000004   85..83       MOV       DPH,?V7
   \   000007   A3           INC       DPTR
   \   000008   A3           INC       DPTR
   \   000009   A3           INC       DPTR
   \   00000A   A3           INC       DPTR
   \   00000B   A3           INC       DPTR
   \   00000C   A3           INC       DPTR
   \   00000D   A3           INC       DPTR
   \   00000E   A3           INC       DPTR
   \   00000F   A3           INC       DPTR
   \   000010   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine30:
   \   000000   F0           MOVX      @DPTR,A
   \   000001   85..82       MOV       DPL,?XSP + 0
   \   000004   85..83       MOV       DPH,?XSP + 1
   \   000007   E0           MOVX      A,@DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine29:
   \   000000   12....       LCALL     ?Subroutine46 & 0xFFFF
   \                     ??CrossCallReturnLabel_89:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine46:
   \   000000   E0           MOVX      A,@DPTR
   \   000001   85..82       MOV       DPL,?V6
   \   000004   85..83       MOV       DPH,?V7
   \   000007   A3           INC       DPTR
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine28:
   \   000000   12....       LCALL     ?Subroutine50 & 0xFFFF
   \                     ??CrossCallReturnLabel_93:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine50:
   \   000000   E0           MOVX      A,@DPTR
   \   000001   85..82       MOV       DPL,?V6
   \   000004   85..83       MOV       DPH,?V7
   \   000007   F0           MOVX      @DPTR,A
   \   000008   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine24:
   \   000000   12....       LCALL     ?Subroutine46 & 0xFFFF
   \                     ??CrossCallReturnLabel_88:
   \   000003   A3           INC       DPTR
   \   000004   F0           MOVX      @DPTR,A
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine23:
   \   000000   F5..         MOV       ?V0,A
   \   000002   A3           INC       DPTR
   \   000003   E0           MOVX      A,@DPTR
   \   000004   3400         ADDC      A,#0x0
   \   000006   F5..         MOV       ?V1,A
   \   000008                ; Setup parameters for call to function osal_buffer_uint32
   \   000008   85..82       MOV       DPL,?V0
   \   00000B   F583         MOV       DPH,A
   \   00000D   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine20:
   \   000000   85..82       MOV       DPL,?V2
   \   000003   85..83       MOV       DPH,?V3
   \   000006   E0           MOVX      A,@DPTR
   \   000007   F5..         MOV       ?V0,A
   \   000009   A3           INC       DPTR
   \   00000A   E0           MOVX      A,@DPTR
   \   00000B   F5..         MOV       ?V1,A
   \   00000D   75..00       MOV       ?V2,#0x0
   \   000010   78..         MOV       R0,#?V0
   \   000012   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine19:
   \   000000   F8           MOV       R0,A
   \   000001   A3           INC       DPTR
   \   000002   E0           MOVX      A,@DPTR
   \   000003   3400         ADDC      A,#0x0
   \   000005   F9           MOV       R1,A
   \   000006   E8           MOV       A,R0
   \   000007   FA           MOV       R2,A
   \   000008   E9           MOV       A,R1
   \   000009   8882         MOV       DPL,R0
   \   00000B   F583         MOV       DPH,A
   \   00000D   E0           MOVX      A,@DPTR
   \   00000E   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine18:
   \   000000   85..82       MOV       DPL,?XSP + 0
   \   000003   85..83       MOV       DPH,?XSP + 1
   \   000006                REQUIRE ??Subroutine59_0
   \   000006                ; // Fall through to label ??Subroutine59_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine10:
   \   000000   90....       MOV       DPTR,#pMtAfInMsgList
   \   000003                REQUIRE ??Subroutine60_0
   \   000003                ; // Fall through to label ??Subroutine60_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine4:
   \   000000   12....       LCALL     ?Subroutine50 & 0xFFFF
   \                     ??CrossCallReturnLabel_92:
   \   000003   8882         MOV       DPL,R0
   \   000005   8983         MOV       DPH,R1
   \   000007   A3           INC       DPTR
   \   000008   12....       LCALL     ?Subroutine46 & 0xFFFF
   \                     ??CrossCallReturnLabel_87:
   \   00000B   F0           MOVX      @DPTR,A
   \   00000C   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine43:
   \   000000   AB..         MOV       R3,?V7
   \   000002                REQUIRE ??Subroutine62_0
   \   000002                ; // Fall through to label ??Subroutine62_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine35:
   \   000000   F0           MOVX      @DPTR,A
   \   000001                ; Setup parameters for call to function osal_mem_free
   \   000001                ; Setup parameters for call to function osal_memcpy
   \   000001   85..82       MOV       DPL,?XSP + 0
   \   000004   85..83       MOV       DPH,?XSP + 1
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine11:
   \   000000   12....       LCALL     ?Subroutine45 & 0xFFFF
   \                     ??CrossCallReturnLabel_85:
   \   000003   A3           INC       DPTR
   \   000004   A3           INC       DPTR
   \   000005   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine9:
   \   000000   12....       LCALL     ?Subroutine49 & 0xFFFF
   \                     ??CrossCallReturnLabel_90:
   \   000003   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine6:
   \   000000   12....       LCALL     ?Subroutine45 & 0xFFFF
   \                     ??CrossCallReturnLabel_84:
   \   000003   E0           MOVX      A,@DPTR
   \   000004   22           RET
    820          
    821          /**************************************************************************************************
    822           * @fn          MT_AfDataRetrieve
    823           *
    824           * @brief   Process AF Data Retrieve command to incrementally read out a very large
    825           *          incoming AF message.
    826           *
    827           * input parameters
    828           *
    829           * @param pBuf - pointer to the received buffer
    830           *
    831           * output parameters
    832           *
    833           * @param rtrn - AF-Status of the operation.
    834           *
    835           * @return      None.
    836           **************************************************************************************************
    837           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    838          static void MT_AfDataRetrieve(uint8 *pBuf)
   \                     MT_AfDataRetrieve:
    839          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V3
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000                REQUIRE ?V6
   \   000000                REQUIRE ?V7
   \   000000   74F0         MOV       A,#-0x10
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 16
   \   000005                ; Auto size: 2
   \   000005   74FE         MOV       A,#-0x2
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
   \   00000A   8B..         MOV       ?V5,R3
    840            #define MT_AF_RTV_HDR_SZ  2
    841          
    842            uint32 timestamp;
    843            mtAfInMsgList_t *pPrev, *pItem = pMtAfInMsgList;
   \   00000C   90....       MOV       DPTR,#pMtAfInMsgList
   \   00000F   12....       LCALL     ?Subroutine5 & 0xFFFF
    844            uint8 rtrn = afStatus_FAILED;
   \                     ??CrossCallReturnLabel_2:
   \   000012   7F01         MOV       R7,#0x1
    845            uint8 len = 0;
   \   000014   7E00         MOV       R6,#0x0
    846          
    847            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000016   EA           MOV       A,R2
   \   000017   2403         ADD       A,#0x3
   \   000019   F5..         MOV       ?V4,A
   \   00001B   5002         JNC       ??MT_AfDataRetrieve_0
   \   00001D   05..         INC       ?V5
    848            timestamp = osal_build_uint32( pBuf, 4 );
   \                     ??MT_AfDataRetrieve_0:
   \   00001F                ; Setup parameters for call to function osal_build_uint32
   \   00001F   7904         MOV       R1,#0x4
   \   000021   0A           INC       R2
   \   000022   0A           INC       R2
   \   000023   0A           INC       R2
   \   000024   AB..         MOV       R3,?V5
   \   000026   12....       LCALL     `??osal_build_uint32::?relay`; Banked call to: osal_build_uint32
   \   000029   8A..         MOV       ?V0,R2
   \   00002B   8B..         MOV       ?V1,R3
   \   00002D   8C..         MOV       ?V2,R4
   \   00002F   8D..         MOV       ?V3,R5
   \   000031   800C         SJMP      ??CrossCallReturnLabel_3
    849          
    850            while (pItem != NULL)
    851            {
    852              pPrev = pItem;
    853              if (pItem->timestamp == timestamp)
    854              {
    855                break;
    856              }
    857              pItem = pItem->next;
   \                     ??MT_AfDataRetrieve_1:
   \   000033   85..82       MOV       DPL,?XSP + 0
   \   000036   85..83       MOV       DPH,?XSP + 1
   \   000039   12....       LCALL     ?Subroutine12 & 0xFFFF
   \                     ??CrossCallReturnLabel_21:
   \   00003C   12....       LCALL     ?Subroutine5 & 0xFFFF
   \                     ??CrossCallReturnLabel_3:
   \   00003F   85..82       MOV       DPL,?XSP + 0
   \   000042   85..83       MOV       DPH,?XSP + 1
   \   000045   12....       LCALL     ??Subroutine61_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_150:
   \   000048   6072         JZ        ??MT_AfDataRetrieve_2
   \   00004A   85..82       MOV       DPL,?XSP + 0
   \   00004D   85..83       MOV       DPH,?XSP + 1
   \   000050   E0           MOVX      A,@DPTR
   \   000051   F5..         MOV       ?V6,A
   \   000053   A3           INC       DPTR
   \   000054   E0           MOVX      A,@DPTR
   \   000055   F5..         MOV       ?V7,A
   \   000057   F583         MOV       DPH,A
   \   000059   8882         MOV       DPL,R0
   \   00005B   A3           INC       DPTR
   \   00005C   A3           INC       DPTR
   \   00005D   A3           INC       DPTR
   \   00005E   A3           INC       DPTR
   \   00005F   78..         MOV       R0,#?V0
   \   000061   12....       LCALL     ?L_EQ_X
   \   000064   70CD         JNZ       ??MT_AfDataRetrieve_1
    858            }
    859          
    860            if (pItem != NULL)
    861            {
    862              uint16 idx;
    863              uint8 *pRsp;
    864          
    865              pBuf += 4;
   \   000066   E5..         MOV       A,?V4
   \   000068   2404         ADD       A,#0x4
   \   00006A   F5..         MOV       ?V4,A
   \   00006C   5002         JNC       ??MT_AfDataRetrieve_3
   \   00006E   05..         INC       ?V5
    866              idx = osal_build_uint16( pBuf );
   \                     ??MT_AfDataRetrieve_3:
   \   000070                ; Setup parameters for call to function osal_build_uint16
   \   000070   FA           MOV       R2,A
   \   000071   AB..         MOV       R3,?V5
   \   000073   12....       LCALL     `??osal_build_uint16::?relay`; Banked call to: osal_build_uint16
   \   000076   8A..         MOV       ?V2,R2
   \   000078   8B..         MOV       ?V3,R3
    867              len = pBuf[2];
   \   00007A   85..82       MOV       DPL,?V4
   \   00007D   85..83       MOV       DPH,?V5
   \   000080   A3           INC       DPTR
   \   000081   A3           INC       DPTR
   \   000082   E0           MOVX      A,@DPTR
   \   000083   FE           MOV       R6,A
    868          
    869              if (len == 0)  // Indication to delete the afIncomingMSGPacket.
   \   000084   7053         JNZ       ??MT_AfDataRetrieve_4
    870              {
    871                if (pMtAfInMsgList == pItem)
   \   000086   85..82       MOV       DPL,?XSP + 0
   \   000089   85..83       MOV       DPH,?XSP + 1
   \   00008C   12....       LCALL     ?Subroutine6 & 0xFFFF
   \                     ??CrossCallReturnLabel_6:
   \   00008F   F8           MOV       R0,A
   \   000090   A3           INC       DPTR
   \   000091   E0           MOVX      A,@DPTR
   \   000092   F9           MOV       R1,A
   \   000093   12....       LCALL     ?Subroutine10 & 0xFFFF
   \                     ??CrossCallReturnLabel_143:
   \   000096   85..82       MOV       DPL,?XSP + 0
   \   000099   85..83       MOV       DPH,?XSP + 1
   \   00009C   E0           MOVX      A,@DPTR
   \   00009D   6A           XRL       A,R2
   \   00009E   7003         JNZ       ??MT_AfDataRetrieve_5
   \   0000A0   A3           INC       DPTR
   \   0000A1   E0           MOVX      A,@DPTR
   \   0000A2   6B           XRL       A,R3
   \                     ??MT_AfDataRetrieve_5:
   \   0000A3   7005         JNZ       ??MT_AfDataRetrieve_6
    872                {
    873                  pMtAfInMsgList = pItem->next;
   \   0000A5   90....       MOV       DPTR,#pMtAfInMsgList
   \   0000A8   8006         SJMP      ??MT_AfDataRetrieve_7
    874                }
    875                else
    876                {
    877                  pPrev->next = pItem->next;
   \                     ??MT_AfDataRetrieve_6:
   \   0000AA   85..82       MOV       DPL,?V6
   \   0000AD   85..83       MOV       DPH,?V7
   \                     ??MT_AfDataRetrieve_7:
   \   0000B0   E8           MOV       A,R0
   \   0000B1   F0           MOVX      @DPTR,A
   \   0000B2   A3           INC       DPTR
   \   0000B3   E9           MOV       A,R1
    878                }
   \   0000B4   12....       LCALL     ?Subroutine35 & 0xFFFF
    879                (void)osal_mem_free(pItem);
   \                     ??CrossCallReturnLabel_68:
   \   0000B7   12....       LCALL     ?Subroutine9 & 0xFFFF
    880                rtrn = afStatus_SUCCESS;
   \                     ??CrossCallReturnLabel_13:
   \   0000BA   7F00         MOV       R7,#0x0
    881              }
    882              else if ((pRsp = osal_mem_alloc(len + MT_AF_RTV_HDR_SZ)) == NULL)
    883              {
    884                rtrn = afStatus_MEM_FAIL;
    885                len = 0;
    886              }
    887              else
    888              {
    889                pRsp[0] = ZSuccess;
    890                pRsp[1] = len;
    891                (void)osal_memcpy(pRsp + MT_AF_RTV_HDR_SZ, pItem->data+idx, len);
    892                MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
    893                                                     MT_AF_DATA_RETRIEVE, len + MT_AF_RTV_HDR_SZ, pRsp);
    894                (void)osal_mem_free(pRsp);
    895                return;
    896              }
    897            }
    898          
    899            pBuf[0] = rtrn;
   \                     ??MT_AfDataRetrieve_2:
   \   0000BC   EF           MOV       A,R7
   \   0000BD   85..82       MOV       DPL,?V4
   \   0000C0   85..83       MOV       DPH,?V5
   \   0000C3   F0           MOVX      @DPTR,A
    900            pBuf[1] = len;
   \   0000C4   EE           MOV       A,R6
   \   0000C5   A3           INC       DPTR
   \   0000C6   F0           MOVX      @DPTR,A
    901            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
    902                                                 MT_AF_DATA_RETRIEVE, MT_AF_RTV_HDR_SZ, pBuf);
   \   0000C7                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   0000C7   AC..         MOV       R4,?V4
   \   0000C9   AD..         MOV       R5,?V5
   \   0000CB   7B02         MOV       R3,#0x2
   \   0000CD   7A12         MOV       R2,#0x12
   \   0000CF   7964         MOV       R1,#0x64
   \   0000D1   12....       LCALL     `??MT_BuildAndSendZToolResponse::?relay`; Banked call to: MT_BuildAndSendZToolResponse
    903          }
   \                     ??MT_AfDataRetrieve_8:
   \   0000D4   7402         MOV       A,#0x2
   \   0000D6   02....       LJMP      ?Subroutine1 & 0xFFFF
   \                     ??MT_AfDataRetrieve_4:
   \   0000D9                ; Setup parameters for call to function osal_mem_alloc
   \   0000D9   2402         ADD       A,#0x2
   \   0000DB   FA           MOV       R2,A
   \   0000DC   E4           CLR       A
   \   0000DD   3400         ADDC      A,#0x0
   \   0000DF   12....       LCALL     ?Subroutine44 & 0xFFFF
   \                     ??CrossCallReturnLabel_83:
   \   0000E2   7006         JNZ       ??MT_AfDataRetrieve_9
   \   0000E4   7F10         MOV       R7,#0x10
   \   0000E6   7E00         MOV       R6,#0x0
   \   0000E8   80D2         SJMP      ??MT_AfDataRetrieve_2
   \                     ??MT_AfDataRetrieve_9:
   \   0000EA   8A82         MOV       DPL,R2
   \   0000EC   8B83         MOV       DPH,R3
   \   0000EE   E4           CLR       A
   \   0000EF   F0           MOVX      @DPTR,A
   \   0000F0   EE           MOV       A,R6
   \   0000F1   A3           INC       DPTR
   \   0000F2   12....       LCALL     ?Subroutine35 & 0xFFFF
   \                     ??CrossCallReturnLabel_69:
   \   0000F5   12....       LCALL     ?Subroutine11 & 0xFFFF
   \                     ??CrossCallReturnLabel_17:
   \   0000F8   E0           MOVX      A,@DPTR
   \   0000F9   25..         ADD       A,?V2
   \   0000FB   F5..         MOV       ?V0,A
   \   0000FD   A3           INC       DPTR
   \   0000FE   E0           MOVX      A,@DPTR
   \   0000FF   35..         ADDC      A,?V3
   \   000101   F5..         MOV       ?V1,A
   \   000103   75..00       MOV       ?V2,#0x0
   \   000106   78..         MOV       R0,#?V0
   \   000108   12....       LCALL     ?PUSH_XSTACK_I_THREE
   \   00010B   EE           MOV       A,R6
   \   00010C   FC           MOV       R4,A
   \   00010D   7D00         MOV       R5,#0x0
   \   00010F   EA           MOV       A,R2
   \   000110   2402         ADD       A,#0x2
   \   000112   FA           MOV       R2,A
   \   000113   E4           CLR       A
   \   000114   35..         ADDC      A,?V7
   \   000116   FB           MOV       R3,A
   \   000117   12....       LCALL     ??Subroutine62_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_164:
   \   00011A   12....       LCALL     ?DEALLOC_XSTACK8
   \   00011D                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   00011D   AC..         MOV       R4,?V6
   \   00011F   AD..         MOV       R5,?V7
   \   000121   7402         MOV       A,#0x2
   \   000123   2E           ADD       A,R6
   \   000124   FB           MOV       R3,A
   \   000125   7A12         MOV       R2,#0x12
   \   000127   7964         MOV       R1,#0x64
   \   000129   12....       LCALL     `??MT_BuildAndSendZToolResponse::?relay`; Banked call to: MT_BuildAndSendZToolResponse
   \   00012C                ; Setup parameters for call to function osal_mem_free
   \   00012C   AA..         MOV       R2,?V6
   \   00012E   AB..         MOV       R3,?V7
   \   000130   12....       LCALL     `??osal_mem_free::?relay`; Banked call to: osal_mem_free
   \   000133   809F         SJMP      ??MT_AfDataRetrieve_8

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine5:
   \   000000   12....       LCALL     ?Subroutine47 & 0xFFFF
   \                     ??CrossCallReturnLabel_156:
   \   000003   85..82       MOV       DPL,?XSP + 0
   \   000006   85..83       MOV       DPH,?XSP + 1
   \   000009   E8           MOV       A,R0
   \   00000A   F0           MOVX      @DPTR,A
   \   00000B   A3           INC       DPTR
   \   00000C   E9           MOV       A,R1
   \   00000D   F0           MOVX      @DPTR,A
   \   00000E   22           RET
    904          
    905          /**************************************************************************************************
    906           * @fn          MT_AfDataStore
    907           *
    908           * @brief   Process AF Data Store command to incrementally store the data buffer for very large
    909           *          outgoing AF message.
    910           *
    911           * input parameters
    912           *
    913           * @param pBuf - pointer to the received buffer
    914           *
    915           * output parameters
    916           *
    917           * @param rtrn - AF-Status of the operation.
    918           *
    919           * @return      None.
    920           **************************************************************************************************
    921           */

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ??Subroutine56_0:
   \   000000   F0           MOVX      @DPTR,A
   \   000001                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000001                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000001                ; Setup parameters for call to function MT_BuildAndSendZToolResponse
   \   000001   AC..         MOV       R4,?XSP + 0
   \   000003   AD..         MOV       R5,?XSP + 1
   \   000005   7B01         MOV       R3,#0x1
   \   000007   22           RET

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
    922          static void MT_AfDataStore(uint8 *pBuf)
   \                     MT_AfDataStore:
    923          {
   \   000000                REQUIRE ?V0
   \   000000                REQUIRE ?V1
   \   000000                REQUIRE ?V2
   \   000000                REQUIRE ?V4
   \   000000                REQUIRE ?V5
   \   000000   74F2         MOV       A,#-0xe
   \   000002   12....       LCALL     ?BANKED_ENTER_XDATA
   \   000005                ; Saved register size: 14
   \   000005                ; Auto size: 1
   \   000005   74FF         MOV       A,#-0x1
   \   000007   12....       LCALL     ?ALLOC_XSTACK8
   \   00000A   EB           MOV       A,R3
   \   00000B   FF           MOV       R7,A
    924            uint16 idx;
    925            uint8 len, rtrn = afStatus_FAILED;
   \   00000C   85..82       MOV       DPL,?XSP + 0
   \   00000F   85..83       MOV       DPH,?XSP + 1
   \   000012   7401         MOV       A,#0x1
   \   000014   F0           MOVX      @DPTR,A
    926          
    927            pBuf += MT_RPC_FRAME_HDR_SZ;
   \   000015   EA           MOV       A,R2
   \   000016   2403         ADD       A,#0x3
   \   000018   FE           MOV       R6,A
   \   000019   5001         JNC       ??MT_AfDataStore_0
   \   00001B   0F           INC       R7
    928            idx = osal_build_uint16( pBuf );
   \                     ??MT_AfDataStore_0:
   \   00001C                ; Setup parameters for call to function osal_build_uint16
   \   00001C   FA           MOV       R2,A
   \   00001D   EF           MOV       A,R7
   \   00001E   FB           MOV       R3,A
   \   00001F   12....       LCALL     `??osal_build_uint16::?relay`; Banked call to: osal_build_uint16
    929            len = pBuf[2];
   \   000022   8E82         MOV       DPL,R6
   \   000024   8F83         MOV       DPH,R7
   \   000026   A3           INC       DPTR
   \   000027   A3           INC       DPTR
   \   000028   E0           MOVX      A,@DPTR
   \   000029   F9           MOV       R1,A
    930            pBuf += 3;
   \   00002A   EE           MOV       A,R6
   \   00002B   2403         ADD       A,#0x3
   \   00002D   FE           MOV       R6,A
   \   00002E   5001         JNC       ??MT_AfDataStore_1
   \   000030   0F           INC       R7
    931          
    932            if (pMtAfDataReq == NULL)
   \                     ??MT_AfDataStore_1:
   \   000031   90....       MOV       DPTR,#pMtAfDataReq
   \   000034   12....       LCALL     ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_42:
   \   000037   EC           MOV       A,R4
   \   000038   4D           ORL       A,R5
   \   000039   700B         JNZ       ??MT_AfDataStore_2
    933            {
    934              rtrn = afStatus_MEM_FAIL;
   \   00003B   85..82       MOV       DPL,?XSP + 0
   \   00003E   85..83       MOV       DPH,?XSP + 1
   \   000041   7410         MOV       A,#0x10
   \   000043   02....       LJMP      ??MT_AfDataStore_3 & 0xFFFF
    935            }
    936            else if (len == 0)  // Indication to send the message.
   \                     ??MT_AfDataStore_2:
   \   000046   E0           MOVX      A,@DPTR
   \   000047   F583         MOV       DPH,A
   \   000049   8C82         MOV       DPL,R4
   \   00004B   E0           MOVX      A,@DPTR
   \   00004C   F5..         MOV       ?V4,A
   \   00004E   A3           INC       DPTR
   \   00004F   E0           MOVX      A,@DPTR
   \   000050   F5..         MOV       ?V5,A
   \   000052   E9           MOV       A,R1
   \   000053   707C         JNZ       ??MT_AfDataStore_4
    937            {
    938              rtrn = AF_DataRequest(&(pMtAfDataReq->dstAddr), pMtAfDataReq->epDesc, pMtAfDataReq->cId,
    939                                      pMtAfDataReq->dataLen,  pMtAfDataReq->data,
    940                                    &(pMtAfDataReq->transId), pMtAfDataReq->txOpts, pMtAfDataReq->radius);
   \   000055                ; Setup parameters for call to function AF_DataRequest
   \   000055   EC           MOV       A,R4
   \   000056   2416         ADD       A,#0x16
   \   000058   F582         MOV       DPL,A
   \   00005A   E4           CLR       A
   \   00005B   3D           ADDC      A,R5
   \   00005C   F583         MOV       DPH,A
   \   00005E   E0           MOVX      A,@DPTR
   \   00005F   F5..         MOV       ?V0,A
   \   000061   78..         MOV       R0,#?V0
   \   000063   12....       LCALL     ?PUSH_XSTACK_I_ONE
   \   000066   90....       MOV       DPTR,#pMtAfDataReq
   \   000069   E0           MOVX      A,@DPTR
   \   00006A   2414         ADD       A,#0x14
   \   00006C   F5..         MOV       ?V0,A
   \   00006E   A3           INC       DPTR
   \   00006F   E0           MOVX      A,@DPTR
   \   000070   3400         ADDC      A,#0x0
   \   000072   F5..         MOV       ?V1,A
   \   000074   78..         MOV       R0,#?V0
   \   000076   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   000079   78..         MOV       R0,#?V4
   \   00007B   12....       LCALL     ?PUSH_XSTACK_I_TWO
   \   00007E   90....       MOV       DPTR,#pMtAfDataReq
   \   000081   E0           MOVX      A,@DPTR
   \   000082   2412         ADD       A,#0x12
   \   000084   F582         MOV       DPL,A
   \   000086   E4           CLR       A
   \   000087   3D           ADDC      A,R5
   \   000088   F583         MOV       DPH,A
   \   00008A   12....       LCALL     ?PUSH_XSTACK8_X_TWO
   \   00008D   90....       MOV       DPTR,#pMtAfDataReq
   \   000090   E0           MOVX      A,@DPTR
   \   000091   2410         ADD       A,#0x10
   \   000093   F582         MOV       DPL,A
   \   000095   E4           CLR       A
   \   000096   3D           ADDC      A,R5
   \   000097   F583         MOV       DPH,A
   \   000099   12....       LCALL     ?PUSH_XSTACK8_X_TWO
   \   00009C   90....       MOV       DPTR,#pMtAfDataReq
   \   00009F   E0           MOVX      A,@DPTR
   \   0000A0   2415         ADD       A,#0x15
   \   0000A2   F582         MOV       DPL,A
   \   0000A4   E4           CLR       A
   \   0000A5   3D           ADDC      A,R5
   \   0000A6   F583         MOV       DPH,A
   \   0000A8   E0           MOVX      A,@DPTR
   \   0000A9   F9           MOV       R1,A
   \   0000AA   90....       MOV       DPTR,#pMtAfDataReq
   \   0000AD   E0           MOVX      A,@DPTR
   \   0000AE   240E         ADD       A,#0xe
   \   0000B0   F582         MOV       DPL,A
   \   0000B2   E4           CLR       A
   \   0000B3   3D           ADDC      A,R5
   \   0000B4   F583         MOV       DPH,A
   \   0000B6   12....       LCALL     ?Subroutine22 & 0xFFFF
   \                     ??CrossCallReturnLabel_43:
   \   0000B9   12....       LCALL     ?Subroutine25 & 0xFFFF
   \                     ??CrossCallReturnLabel_49:
   \   0000BC   12....       LCALL     `??AF_DataRequest::?relay`; Banked call to: AF_DataRequest
   \   0000BF   7409         MOV       A,#0x9
   \   0000C1   12....       LCALL     ?DEALLOC_XSTACK8
   \   0000C4   E9           MOV       A,R1
   \   0000C5   85..82       MOV       DPL,?XSP + 0
   \   0000C8   85..83       MOV       DPH,?XSP + 1
   \   0000CB   F0           MOVX      @DPTR,A
    941              (void)osal_mem_free(pMtAfDataReq);
   \   0000CC                ; Setup parameters for call to function osal_mem_free
   \   0000CC   12....       LCALL     ?Subroutine8 & 0xFFFF
    942              pMtAfDataReq = NULL;
    943            }
   \                     ??CrossCallReturnLabel_10:
   \   0000CF   8025         SJMP      ??MT_AfDataStore_3
    944            else
    945            {
    946              (void)osal_memcpy(pMtAfDataReq->data+idx, pBuf, len);
   \                     ??MT_AfDataStore_4:
   \   0000D1                ; Setup parameters for call to function osal_memcpy
   \   0000D1   8E..         MOV       ?V0,R6
   \   0000D3   8F..         MOV       ?V1,R7
   \   0000D5   75..00       MOV       ?V2,#0x0
   \   0000D8   78..         MOV       R0,#?V0
   \   0000DA   12....       LCALL     ?PUSH_XSTACK_I_THREE
   \   0000DD   E9           MOV       A,R1
   \   0000DE   FC           MOV       R4,A
   \   0000DF   7D00         MOV       R5,#0x0
   \   0000E1   E5..         MOV       A,?V4
   \   0000E3   2A           ADD       A,R2
   \   0000E4   FA           MOV       R2,A
   \   0000E5   E5..         MOV       A,?V5
   \   0000E7   3B           ADDC      A,R3
   \   0000E8   FB           MOV       R3,A
   \   0000E9   12....       LCALL     ??Subroutine62_0 & 0xFFFF
   \                     ??CrossCallReturnLabel_165:
   \   0000EC   12....       LCALL     ?DEALLOC_XSTACK8
    947              rtrn = afStatus_SUCCESS;
   \   0000EF   85..82       MOV       DPL,?XSP + 0
   \   0000F2   85..83       MOV       DPH,?XSP + 1
   \   0000F5   E4           CLR       A
    948            }
   \                     ??MT_AfDataStore_3:
   \   0000F6   12....       LCALL     ??Subroutine56_0 & 0xFFFF
    949          
    950            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
    951                                                                          MT_AF_DATA_STORE, 1, &rtrn);
   \                     ??CrossCallReturnLabel_107:
   \   0000F9   7A11         MOV       R2,#0x11
   \   0000FB   7964         MOV       R1,#0x64
   \   0000FD   12....       LCALL     `??MT_BuildAndSendZToolResponse::?relay`; Banked call to: MT_BuildAndSendZToolResponse
    952          }
   \   000100   7401         MOV       A,#0x1
   \   000102   02....       LJMP      ?Subroutine0 & 0xFFFF

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine34:
   \   000000   E9           MOV       A,R1
   \   000001   85..82       MOV       DPL,?XSP + 0
   \   000004   85..83       MOV       DPH,?XSP + 1
   \   000007                REQUIRE ??Subroutine56_0
   \   000007                ; // Fall through to label ??Subroutine56_0

   \                                 In  segment BANKED_CODE, align 1, keep-with-next
   \                     ?Subroutine36:
   \   000000   85..82       MOV       DPL,?XSP + 0
   \   000003   85..83       MOV       DPH,?XSP + 1
   \   000006   7410         MOV       A,#0x10
   \   000008                REQUIRE ??Subroutine58_0
   \   000008                ; // Fall through to label ??Subroutine58_0

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??MT_AfExec::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfExec

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??MT_AfCommandProcessing::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfCommandProcessing

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??MT_AfDataRequest::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataRequest

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??MT_AfDataRequestSrcRtg::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataRequestSrcRtg

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??MT_AfDataConfirm::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataConfirm

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??MT_AfReflectError::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfReflectError

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??MT_AfIncomingMsg::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfIncomingMsg

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??MT_AfDataRetrieve::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataRetrieve

   \                                 In  segment BANK_RELAYS, align 1
   \                     `??MT_AfDataStore::?relay`:
   \   000000   12....       LCALL   ?BDISPATCH
   \   000003   ......       DC24    MT_AfDataStore

   \                                 In  segment XDATA_ROM_C, align 1
   \                     `?<Constant {0, 0}>`:
   \   000000   00           DB 0
   \   000001   00           DB 0

   \                                 In  segment XDATA_ROM_C, align 1
   \                     __Constant_3e8:
   \   000000   E8030000     DD 1000
    953          
    954          /**************************************************************************************************
    955           * @fn          MT_AfAPSF_ConfigSet
    956           *
    957           * @brief       This function is the MT proxy for afAPSF_ConfigSet().
    958           *
    959           * input parameters
    960           *
    961           * @param       pBuf - Pointer to the received buffer.
    962           *
    963           * output parameters
    964           *
    965           * None.
    966           *
    967           * @return      None.
    968           */
    969          static void MT_AfAPSF_ConfigSet(uint8 *pBuf)
    970          {
    971            afAPSF_Config_t cfg = { pBuf[MT_RPC_POS_DAT0+1], pBuf[MT_RPC_POS_DAT0+2] };
    972            afStatus_t rtrn = afAPSF_ConfigSet(pBuf[MT_RPC_POS_DAT0], &cfg);
    973          
    974            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
    975                                                 MT_AF_APSF_CONFIG_SET, 1, (uint8 *)&rtrn);
    976          }
    977          
    978          /**************************************************************************************************
    979           * @fn          MT_AfAPSF_ConfigGet
    980           *
    981           * @brief       This function is the MT proxy for afAPSF_ConfigGet().
    982           *
    983           * input parameters
    984           *
    985           * @param       pBuf - Pointer to the received buffer.
    986           *
    987           * output parameters
    988           *
    989           * None.
    990           *
    991           * @return      None.
    992           */
    993          static void MT_AfAPSF_ConfigGet(uint8 *pBuf)
    994          {
    995            afAPSF_Config_t cfg = { 0, 0 };
    996            uint8 buf[2];
    997          
    998            afAPSF_ConfigGet( pBuf[MT_RPC_POS_DAT0], &cfg );
    999          
   1000            buf[0] = cfg.frameDelay;
   1001            buf[1] = cfg.windowSize;
   1002          
   1003            MT_BuildAndSendZToolResponse(((uint8)MT_RPC_CMD_SRSP | (uint8)MT_RPC_SYS_AF),
   1004                                                 MT_AF_APSF_CONFIG_GET, 3, buf );
   1005          }
   1006          
   1007          /***************************************************************************************************
   1008          ***************************************************************************************************/

   Maximum stack usage in bytes:

   ISTACK XSTACK Function
   ------ ------ --------
      1     19   MT_AfCommandProcessing
        0     19   -> MT_AfDataRequest
        0     19   -> MT_AfDataRequestSrcRtg
        0     19   -> MT_AfDataRetrieve
        0     19   -> MT_AfDataStore
        0     19   -> MT_BuildAndSendZToolResponse
        0     19   -> MT_BuildEndpointDesc
        0     19   -> afAPSF_ConfigGet
        0     19   -> afAPSF_ConfigSet
        0     19   -> afDelete
        0     19   -> afRegister
        0     19   -> osal_mem_alloc
        0     19   -> osal_mem_free
      3      3   MT_AfDataConfirm
        2      3   -> MT_BuildAndSendZToolResponse
      1     62   MT_AfDataRequest
        0     43   -> AF_DataRequest
        0     34   -> MT_BuildAndSendZToolResponse
        0     34   -> afFindEndPointDesc
        0     34   -> osal_build_uint16
        0     34   -> osal_mem_alloc
        0     37   -> osal_memcpy
        0     34   -> osal_set_event
        0     38   -> osal_start_timerEx
      1     66   MT_AfDataRequestSrcRtg
        0     47   -> AF_DataRequestSrcRtg
        0     35   -> MT_BuildAndSendZToolResponse
        0     35   -> afFindEndPointDesc
        0     35   -> osal_build_uint16
        0     35   -> osal_mem_alloc
        0     35   -> osal_mem_free
        0     35   -> osal_memset
      1     40   MT_AfDataRetrieve
        0     18   -> MT_BuildAndSendZToolResponse
        0     18   -> osal_build_uint16
        0     18   -> osal_build_uint32
        0     18   -> osal_mem_alloc
        0     18   -> osal_mem_free
        0     21   -> osal_memcpy
      1     43   MT_AfDataStore
        0     24   -> AF_DataRequest
        0     15   -> MT_BuildAndSendZToolResponse
        0     15   -> osal_build_uint16
        0     15   -> osal_mem_free
        0     18   -> osal_memcpy
      0     13   MT_AfExec
        0      9   -> osal_mem_free
        0      9   -> osal_set_event
        0     13   -> osal_start_timerEx
      1     29   MT_AfIncomingMsg
        0     25   -> MT_BuildAndSendZToolResponse
        0     29   -> osal_buffer_uint32
        0     25   -> osal_mem_alloc
        0     25   -> osal_mem_free
        0     28   -> osal_memcpy
        0     25   -> osal_set_event
        0     29   -> osal_start_timerEx
      3      6   MT_AfReflectError
        2      6   -> MT_BuildAndSendZToolResponse


   Segment part sizes:

   Bytes  Function/Label
   -----  --------------
       2  ?<Constant {0, 0}>
       8  ??Subroutine56_0
       6  ??Subroutine57_0
       6  ??Subroutine58_0
       4  ??Subroutine59_0
       6  ??Subroutine60_0
       6  ??Subroutine61_0
       6  ??Subroutine62_0
       8  ?Subroutine0
       8  ?Subroutine1
       3  ?Subroutine10
       6  ?Subroutine11
       4  ?Subroutine12
      12  ?Subroutine13
      16  ?Subroutine14
      12  ?Subroutine15
      12  ?Subroutine16
      12  ?Subroutine17
       6  ?Subroutine18
      15  ?Subroutine19
      10  ?Subroutine2
      19  ?Subroutine20
      15  ?Subroutine21
       6  ?Subroutine22
      14  ?Subroutine23
       6  ?Subroutine24
      13  ?Subroutine25
      13  ?Subroutine26
       8  ?Subroutine27
       4  ?Subroutine28
       4  ?Subroutine29
       3  ?Subroutine3
       9  ?Subroutine30
      17  ?Subroutine31
      10  ?Subroutine32
       2  ?Subroutine33
       7  ?Subroutine34
       8  ?Subroutine35
       8  ?Subroutine36
       5  ?Subroutine37
       5  ?Subroutine38
       5  ?Subroutine39
      13  ?Subroutine4
       5  ?Subroutine40
       4  ?Subroutine41
       9  ?Subroutine42
       2  ?Subroutine43
      11  ?Subroutine44
       9  ?Subroutine45
       9  ?Subroutine46
       6  ?Subroutine47
       6  ?Subroutine48
       9  ?Subroutine49
      15  ?Subroutine5
       9  ?Subroutine50
       6  ?Subroutine51
       6  ?Subroutine52
       9  ?Subroutine53
       9  ?Subroutine54
       7  ?Subroutine55
       5  ?Subroutine6
      16  ?Subroutine7
      13  ?Subroutine8
       4  ?Subroutine9
     367  MT_AfCommandProcessing
       6  MT_AfCommandProcessing::?relay
      49  MT_AfDataConfirm
       6  MT_AfDataConfirm::?relay
     753  MT_AfDataRequest
       6  MT_AfDataRequest::?relay
     409  MT_AfDataRequestSrcRtg
       6  MT_AfDataRequestSrcRtg::?relay
     309  MT_AfDataRetrieve
       6  MT_AfDataRetrieve::?relay
     261  MT_AfDataStore
       6  MT_AfDataStore::?relay
     148  MT_AfExec
       6  MT_AfExec::?relay
     980  MT_AfIncomingMsg
       6  MT_AfIncomingMsg::?relay
     100  MT_AfReflectError
       6  MT_AfReflectError::?relay
       4  __Constant_3e8
       2  pMtAfDataReq
       2  pMtAfInMsgList

 
 3 905 bytes in segment BANKED_CODE
    54 bytes in segment BANK_RELAYS
     6 bytes in segment XDATA_ROM_C
     4 bytes in segment XDATA_Z
 
    54 bytes of CODE     memory
     2 bytes of CONST    memory (+ 4 bytes shared)
 3 905 bytes of HUGECODE memory
     4 bytes of XDATA    memory

Errors: none
Warnings: none
